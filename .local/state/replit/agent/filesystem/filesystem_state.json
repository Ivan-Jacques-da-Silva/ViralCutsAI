{"file_contents":{"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"server/index.ts":{"content":"import 'dotenv/config';\nimport express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2090},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/pages/Home.tsx":{"content":"import { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Video, Upload, Link as LinkIcon, Loader2, Scissors, Download, MonitorPlay, Smartphone, Users } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport type { Video as VideoType, VideoCut, ProcessedCut } from \"@shared/schema\";\n\ninterface UploadResponse {\n  video: VideoType;\n  cuts: VideoCut[];\n}\n\nexport default function Home() {\n  const [activeTab, setActiveTab] = useState<\"upload\" | \"url\">(\"upload\");\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [videoUrl, setVideoUrl] = useState(\"\");\n  const [uploadTitle, setUploadTitle] = useState(\"\");\n  const [urlTitle, setUrlTitle] = useState(\"\");\n  const [currentVideo, setCurrentVideo] = useState<UploadResponse | null>(null);\n  const [selectedCuts, setSelectedCuts] = useState<Set<string>>(new Set());\n  const [selectedFormat, setSelectedFormat] = useState<\"horizontal\" | \"vertical\">(\"vertical\");\n  const { toast } = useToast();\n\n  const uploadMutation = useMutation({\n    mutationFn: async (formData: FormData) => {\n      const response = await fetch(\"/api/videos/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || \"Erro ao fazer upload\");\n      }\n      return response.json();\n    },\n    onSuccess: (data: UploadResponse) => {\n      setCurrentVideo(data);\n      setSelectedFile(null);\n      setUploadTitle(\"\");\n      setSelectedCuts(new Set());\n      toast({\n        title: \"Sucesso!\",\n        description: `Vídeo analisado! ${data.cuts.length} cortes identificados.`,\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const urlMutation = useMutation({\n    mutationFn: async (data: { url: string; title?: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/videos/url\", data);\n      return await response.json();\n    },\n    onSuccess: (data: UploadResponse) => {\n      setCurrentVideo(data);\n      setVideoUrl(\"\");\n      setUrlTitle(\"\");\n      setSelectedCuts(new Set());\n      toast({\n        title: \"Sucesso!\",\n        description: `Vídeo analisado! ${data.cuts.length} cortes identificados.`,\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const processMutation = useMutation({\n    mutationFn: async ({ cutId, format }: { cutId: string; format: string }) => {\n      const response = await apiRequest(\"POST\", `/api/cuts/${cutId}/process`, { format });\n      return await response.json();\n    },\n    onSuccess: (data: ProcessedCut) => {\n      toast({\n        title: \"Sucesso!\",\n        description: \"Corte processado com legendas!\",\n      });\n      window.open(`/api/processed/${data.id}/download`, \"_blank\");\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      if (!file.type.startsWith(\"video/\")) {\n        toast({\n          title: \"Erro\",\n          description: \"Por favor, selecione um arquivo de vídeo\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      setSelectedFile(file);\n    }\n  };\n\n  const handleUpload = () => {\n    if (!selectedFile) {\n      toast({\n        title: \"Erro\",\n        description: \"Selecione um vídeo primeiro\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"video\", selectedFile);\n    if (uploadTitle) {\n      formData.append(\"title\", uploadTitle);\n    }\n\n    uploadMutation.mutate(formData);\n  };\n\n  const handleUrlSubmit = () => {\n    if (!videoUrl) {\n      toast({\n        title: \"Erro\",\n        description: \"Digite uma URL válida\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    urlMutation.mutate({ url: videoUrl, title: urlTitle });\n  };\n\n  const toggleCutSelection = (cutId: string) => {\n    const newSelected = new Set(selectedCuts);\n    if (newSelected.has(cutId)) {\n      newSelected.delete(cutId);\n    } else {\n      newSelected.add(cutId);\n    }\n    setSelectedCuts(newSelected);\n  };\n\n  const handleProcessCuts = () => {\n    if (selectedCuts.size === 0) {\n      toast({\n        title: \"Erro\",\n        description: \"Selecione pelo menos um corte\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    selectedCuts.forEach((cutId) => {\n      processMutation.mutate({ cutId, format: selectedFormat });\n    });\n  };\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\n  };\n\n  const isProcessing = uploadMutation.isPending || urlMutation.isPending || processMutation.isPending;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"border-b\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <div className=\"flex items-center gap-3 justify-between\">\n            <div className=\"bg-primary rounded-lg p-2\">\n              <Scissors className=\"h-6 w-6 text-primary-foreground\" />\n            </div>\n            <div className=\"flex-1\">\n              <h1 className=\"text-2xl font-bold\">Cortador de Vídeos para Reels</h1>\n              <p className=\"text-sm text-muted-foreground\">IA identifica os melhores momentos e gera legendas automáticas</p>\n            </div>\n            <Link href=\"/accounts\">\n              <Button variant=\"outline\" size=\"sm\" data-testid=\"button-accounts\">\n                <Users className=\"h-4 w-4 mr-2\" /> Contas\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"container mx-auto px-4 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          <div className=\"lg:col-span-2\">\n            <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as \"upload\" | \"url\")}>\n              <TabsList className=\"grid w-full grid-cols-2\">\n                <TabsTrigger value=\"upload\">\n                  <Upload className=\"h-4 w-4 mr-2\" />\n                  Upload\n                </TabsTrigger>\n                <TabsTrigger value=\"url\">\n                  <LinkIcon className=\"h-4 w-4 mr-2\" />\n                  URL\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"upload\" className=\"mt-4\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Enviar Vídeo</CardTitle>\n                    <CardDescription>\n                      Faça upload de um vídeo e a IA identificará os melhores cortes\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"upload-title\">Título (opcional)</Label>\n                      <Input\n                        id=\"upload-title\"\n                        placeholder=\"Nome do vídeo\"\n                        value={uploadTitle}\n                        onChange={(e) => setUploadTitle(e.target.value)}\n                        disabled={isProcessing}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"video-file\">Arquivo de Vídeo</Label>\n                      <Input\n                        id=\"video-file\"\n                        type=\"file\"\n                        accept=\"video/*\"\n                        onChange={handleFileChange}\n                        disabled={isProcessing}\n                      />\n                    </div>\n                    {selectedFile && (\n                      <p className=\"text-sm text-muted-foreground\">\n                        Arquivo selecionado: {selectedFile.name}\n                      </p>\n                    )}\n                    <Button\n                      onClick={handleUpload}\n                      disabled={!selectedFile || isProcessing}\n                      className=\"w-full\"\n                    >\n                      {uploadMutation.isPending ? (\n                        <>\n                          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                          Analisando vídeo...\n                        </>\n                      ) : (\n                        <>\n                          <Upload className=\"h-4 w-4 mr-2\" />\n                          Enviar e Analisar\n                        </>\n                      )}\n                    </Button>\n                  </CardContent>\n                </Card>\n              </TabsContent>\n\n              <TabsContent value=\"url\" className=\"mt-4\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Vídeo por URL</CardTitle>\n                    <CardDescription>\n                      Cole a URL de YouTube, TikTok, Instagram ou outro vídeo\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"url-title\">Título (opcional)</Label>\n                      <Input\n                        id=\"url-title\"\n                        placeholder=\"Nome do vídeo\"\n                        value={urlTitle}\n                        onChange={(e) => setUrlTitle(e.target.value)}\n                        disabled={isProcessing}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"video-url\">URL do Vídeo</Label>\n                      <Input\n                        id=\"video-url\"\n                        placeholder=\"https://youtube.com/watch?v=...\"\n                        value={videoUrl}\n                        onChange={(e) => setVideoUrl(e.target.value)}\n                        disabled={isProcessing}\n                      />\n                    </div>\n                    <Button\n                      onClick={handleUrlSubmit}\n                      disabled={!videoUrl || isProcessing}\n                      className=\"w-full\"\n                    >\n                      {urlMutation.isPending ? (\n                        <>\n                          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                          Baixando e analisando...\n                        </>\n                      ) : (\n                        <>\n                          <LinkIcon className=\"h-4 w-4 mr-2\" />\n                          Baixar e Analisar\n                        </>\n                      )}\n                    </Button>\n                  </CardContent>\n                </Card>\n              </TabsContent>\n            </Tabs>\n\n            {currentVideo && (\n              <Card className=\"mt-4\">\n                <CardHeader>\n                  <CardTitle>{currentVideo.video.title}</CardTitle>\n                  <CardDescription>\n                    IA identificou {currentVideo.cuts.length} cortes de 1-2 minutos\n                  </CardDescription>\n                </CardHeader>\n              </Card>\n            )}\n          </div>\n\n          <div>\n            <Card>\n              <CardHeader>\n                <CardTitle>Cortes Identificados</CardTitle>\n                <CardDescription>\n                  Selecione os cortes para processar\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {!currentVideo ? (\n                  <div className=\"text-center py-8\">\n                    <Scissors className=\"h-12 w-12 mx-auto text-muted-foreground mb-2\" />\n                    <p className=\"text-sm text-muted-foreground\">\n                      Envie um vídeo para ver os cortes\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      {currentVideo.cuts.map((cut, index) => (\n                        <div\n                          key={cut.id}\n                          className={`border rounded-lg p-3 cursor-pointer transition-colors ${\n                            selectedCuts.has(cut.id) ? \"bg-primary/10 border-primary\" : \"hover:bg-muted\"\n                          }`}\n                          onClick={() => toggleCutSelection(cut.id)}\n                        >\n                          <div className=\"flex items-start justify-between gap-2\">\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <Badge variant=\"outline\">Corte {index + 1}</Badge>\n                                <span className=\"text-xs text-muted-foreground\">\n                                  {formatTime(cut.startTime)} - {formatTime(cut.endTime)}\n                                </span>\n                                <span className=\"text-xs text-muted-foreground\">\n                                  ({Math.floor((cut.endTime - cut.startTime) / 60)}min)\n                                </span>\n                              </div>\n                              <p className=\"text-sm\">{cut.description}</p>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n\n                    {selectedCuts.size > 0 && (\n                      <div className=\"space-y-4 pt-4 border-t\">\n                        <div className=\"space-y-2\">\n                          <Label>Formato de Saída</Label>\n                          <div className=\"grid grid-cols-2 gap-2\">\n                            <Button\n                              variant={selectedFormat === \"vertical\" ? \"default\" : \"outline\"}\n                              onClick={() => setSelectedFormat(\"vertical\")}\n                              className=\"w-full\"\n                            >\n                              <Smartphone className=\"h-4 w-4 mr-2\" />\n                              Reels (9:16)\n                            </Button>\n                            <Button\n                              variant={selectedFormat === \"horizontal\" ? \"default\" : \"outline\"}\n                              onClick={() => setSelectedFormat(\"horizontal\")}\n                              className=\"w-full\"\n                            >\n                              <MonitorPlay className=\"h-4 w-4 mr-2\" />\n                              HD (16:9)\n                            </Button>\n                          </div>\n                        </div>\n\n                        <Button\n                          onClick={handleProcessCuts}\n                          disabled={isProcessing}\n                          className=\"w-full\"\n                        >\n                          {processMutation.isPending ? (\n                            <>\n                              <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                              Processando com IA...\n                            </>\n                          ) : (\n                            <>\n                              <Download className=\"h-4 w-4 mr-2\" />\n                              Processar {selectedCuts.size} {selectedCuts.size === 1 ? \"Corte\" : \"Cortes\"}\n                            </>\n                          )}\n                        </Button>\n                        <p className=\"text-xs text-muted-foreground text-center\">\n                          A IA irá cortar, ajustar formato e gerar legendas automáticas\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n","size_bytes":16612},"design_guidelines.md":{"content":"# Design Guidelines: Sistema de Corte de Vídeos para Reels\n\n## Design Approach\n\n**Selected Approach:** Design System - Material Design 3 inspired\n**Justification:** Utility-focused video editing tool requiring clear hierarchy, intuitive controls, and robust component patterns for file handling and processing workflows.\n\n**Key Design Principles:**\n- Functionality-first interface with minimal visual distractions\n- Clear processing states and progress indicators\n- Efficient two-tab workflow for different input methods\n- Scannable video preview cards with actionable controls\n\n---\n\n## Core Design Elements\n\n### A. Color Palette\n\n**Dark Mode (Primary):**\n- Background: 220 15% 12% (deep blue-gray)\n- Surface: 220 15% 18% (elevated cards)\n- Surface Variant: 220 12% 22% (tabs, secondary surfaces)\n- Primary: 210 100% 65% (vibrant blue for CTAs)\n- On-Surface: 220 10% 95% (primary text)\n- On-Surface Variant: 220 8% 70% (secondary text)\n- Success: 142 76% 45% (processing complete)\n- Border: 220 15% 28%\n\n**Light Mode:**\n- Background: 0 0% 98%\n- Surface: 0 0% 100%\n- Primary: 210 95% 55%\n- On-Surface: 220 15% 15%\n- Border: 220 10% 88%\n\n### B. Typography\n\n**Font Stack:**\n- Primary: 'Inter' via Google Fonts (400, 500, 600)\n- Monospace: 'JetBrains Mono' for file names, durations\n\n**Type Scale:**\n- Hero/Page Title: text-3xl font-semibold (2rem)\n- Section Headers: text-xl font-semibold\n- Card Titles: text-base font-medium\n- Body Text: text-sm\n- Captions/Meta: text-xs text-on-surface-variant\n\n### C. Layout System\n\n**Spacing Units:** Consistent use of 4, 6, 8, 12, 16, 24px (Tailwind: p-1, p-1.5, p-2, p-3, p-4, p-6)\n\n**Container Hierarchy:**\n- App Shell: max-w-7xl mx-auto with px-4 sm:px-6 lg:px-8\n- Tab Panels: Full width with py-6 spacing\n- Cards: Consistent p-4 to p-6 padding based on density\n\n**Grid Patterns:**\n- Video Grid: grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\n- Two-column forms: grid-cols-1 md:grid-cols-2 gap-4\n\n### D. Component Library\n\n**Navigation:**\n- Horizontal tab navigation (Upload/URL) with underline indicator\n- Tab active state: border-b-2 border-primary with primary text color\n- Tab inactive: border-transparent with on-surface-variant color\n\n**Input Components:**\n- File upload: Dashed border drop zone (h-48) with centered icon and text\n- URL input: Full-width text input with platform icons (TikTok/YouTube/Facebook/Instagram)\n- All inputs: rounded-lg with focus:ring-2 ring-primary/20\n\n**Video Cards:**\n- Thumbnail preview (16:9 aspect ratio) with play icon overlay\n- Duration badge (absolute top-right, bg-black/80 text-white text-xs px-2 py-1 rounded)\n- Title truncation with tooltip on hover\n- Action buttons: Download icon button + \"Ver Cortes\" secondary button\n\n**Progress Indicators:**\n- Linear progress bar (h-1 bg-surface-variant with bg-primary fill)\n- Processing status badge with animated pulse effect\n- Percentage text below progress bar (text-sm text-center)\n\n**Buttons:**\n- Primary: bg-primary text-white hover:bg-primary/90 (rounded-lg px-4 py-2)\n- Secondary: border border-border hover:bg-surface-variant (rounded-lg px-4 py-2)\n- Icon-only: p-2 rounded-lg hover:bg-surface-variant transition\n\n**Data Display:**\n- Video list: Alternating card layout with consistent spacing\n- Empty states: Centered icon + text in muted colors\n- Error states: Red accent border with error icon and message\n\n**Overlays:**\n- Modal dialogs: max-w-2xl with backdrop blur (backdrop-blur-sm bg-black/50)\n- Download modal: List of cuts with checkboxes + \"Baixar Selecionados\" button\n\n### E. Animations\n\n**Minimal, purposeful animations only:**\n- Tab transitions: 200ms ease slide\n- Card hover: subtle scale-[1.01] transform with 150ms transition\n- Progress bar: smooth width transition with 300ms ease\n- Loading states: Gentle pulse on processing cards\n- Modal entry: 200ms fade + scale from 95% to 100%\n\n---\n\n## Images\n\n**No hero images needed** - this is a utility application, not marketing.\n\n**Video Thumbnails:**\n- Display extracted frame from uploaded/analyzed videos\n- Fallback: Gradient placeholder with video icon\n- Aspect ratio: 16:9 (standard for Reels/TikTok)\n\n**Platform Icons:**\n- Use Font Awesome or Heroicons for social platform logos (TikTok, YouTube, Facebook, Instagram)\n- Display next to URL input as visual context\n\n**Empty States:**\n- Upload tab: Cloud upload icon (Heroicons)\n- No videos analyzed: Video camera icon with \"Nenhum vídeo analisado ainda\" message\n\n---\n\n## Key Interface Sections\n\n1. **Header:** Logo + navigation breadcrumb (minimal)\n2. **Tab Navigation:** Upload | URL (active underline indicator)\n3. **Input Area:** Context-specific based on active tab\n4. **Processing Queue:** Linear list of videos being analyzed\n5. **Results Grid:** Masonry/grid of analyzed videos with cut previews\n6. **Download Modal:** Checklist interface for batch downloads","size_bytes":4820},"server/storage.ts":{"content":"import { \n  videos, \n  videoCuts, \n  processedCuts,\n  type Video, \n  type InsertVideo, \n  type VideoCut,\n  type InsertVideoCut,\n  type ProcessedCut,\n  type InsertProcessedCut\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc } from \"drizzle-orm\";\n\nexport interface IStorage {\n  createVideo(video: InsertVideo): Promise<Video>;\n  getVideo(id: string): Promise<Video | undefined>;\n  getAllVideos(): Promise<Video[]>;\n  \n  createVideoCut(cut: InsertVideoCut): Promise<VideoCut>;\n  getVideoCut(id: string): Promise<VideoCut | undefined>;\n  getVideoCutsByVideoId(videoId: string): Promise<VideoCut[]>;\n  \n  createProcessedCut(cut: InsertProcessedCut): Promise<ProcessedCut>;\n  getProcessedCut(id: string): Promise<ProcessedCut | undefined>;\n  getProcessedCutsByCutId(cutId: string): Promise<ProcessedCut[]>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async createVideo(insertVideo: InsertVideo): Promise<Video> {\n    const [video] = await db\n      .insert(videos)\n      .values(insertVideo)\n      .returning();\n    return video;\n  }\n\n  async getVideo(id: string): Promise<Video | undefined> {\n    const [video] = await db.select().from(videos).where(eq(videos.id, id));\n    return video || undefined;\n  }\n\n  async getAllVideos(): Promise<Video[]> {\n    return await db.select().from(videos).orderBy(desc(videos.uploadedAt));\n  }\n\n  async createVideoCut(insertCut: InsertVideoCut): Promise<VideoCut> {\n    const [cut] = await db\n      .insert(videoCuts)\n      .values(insertCut)\n      .returning();\n    return cut;\n  }\n\n  async getVideoCut(id: string): Promise<VideoCut | undefined> {\n    const [cut] = await db.select().from(videoCuts).where(eq(videoCuts.id, id));\n    return cut || undefined;\n  }\n\n  async getVideoCutsByVideoId(videoId: string): Promise<VideoCut[]> {\n    return await db\n      .select()\n      .from(videoCuts)\n      .where(eq(videoCuts.videoId, videoId))\n      .orderBy(videoCuts.startTime);\n  }\n\n  async createProcessedCut(insertProcessedCut: InsertProcessedCut): Promise<ProcessedCut> {\n    const [processed] = await db\n      .insert(processedCuts)\n      .values(insertProcessedCut)\n      .returning();\n    return processed;\n  }\n\n  async getProcessedCut(id: string): Promise<ProcessedCut | undefined> {\n    const [processed] = await db.select().from(processedCuts).where(eq(processedCuts.id, id));\n    return processed || undefined;\n  }\n\n  async getProcessedCutsByCutId(cutId: string): Promise<ProcessedCut[]> {\n    return await db\n      .select()\n      .from(processedCuts)\n      .where(eq(processedCuts.cutId, cutId))\n      .orderBy(desc(processedCuts.createdAt));\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":2668},"client/src/components/URLInput.tsx":{"content":"import { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { SiTiktok, SiYoutube, SiFacebook, SiInstagram } from \"react-icons/si\";\nimport { Link } from \"lucide-react\";\nimport { useState } from \"react\";\n\ninterface URLInputProps {\n  onSubmit: (url: string) => void;\n}\n\nexport function URLInput({ onSubmit }: URLInputProps) {\n  const [url, setUrl] = useState(\"\");\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (url.trim()) {\n      onSubmit(url.trim());\n      setUrl(\"\");\n    }\n  };\n\n  const getPlatformIcon = () => {\n    if (url.includes('tiktok.com')) return <SiTiktok className=\"h-4 w-4\" />;\n    if (url.includes('youtube.com') || url.includes('youtu.be')) return <SiYoutube className=\"h-4 w-4\" />;\n    if (url.includes('facebook.com') || url.includes('fb.watch')) return <SiFacebook className=\"h-4 w-4\" />;\n    if (url.includes('instagram.com')) return <SiInstagram className=\"h-4 w-4\" />;\n    return <Link className=\"h-4 w-4\" />;\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div className=\"flex gap-2 items-start\">\n        <div className=\"flex-1 relative\">\n          <div className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\">\n            {getPlatformIcon()}\n          </div>\n          <Input\n            type=\"url\"\n            placeholder=\"Cole a URL do TikTok, YouTube, Facebook ou Instagram\"\n            value={url}\n            onChange={(e) => setUrl(e.target.value)}\n            className=\"pl-10\"\n            data-testid=\"input-url\"\n          />\n        </div>\n        <Button \n          type=\"submit\" \n          disabled={!url.trim()}\n          data-testid=\"button-analyze-url\"\n        >\n          Analisar\n        </Button>\n      </div>\n      <div className=\"flex gap-3 text-muted-foreground\">\n        <SiTiktok className=\"h-5 w-5\" />\n        <SiYoutube className=\"h-5 w-5\" />\n        <SiFacebook className=\"h-5 w-5\" />\n        <SiInstagram className=\"h-5 w-5\" />\n      </div>\n    </form>\n  );\n}\n","size_bytes":2040},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/examples/EmptyState.tsx":{"content":"import { EmptyState } from '../EmptyState'\nimport { Video, Upload } from 'lucide-react'\n\nexport default function EmptyStateExample() {\n  return (\n    <div className=\"space-y-8\">\n      <EmptyState \n        title=\"Nenhum vídeo analisado\"\n        description=\"Faça upload de um vídeo ou cole uma URL para começar\"\n      />\n      <EmptyState \n        icon={<Upload className=\"h-16 w-16\" />}\n        title=\"Arraste um vídeo aqui\"\n        description=\"Suporta MP4, MOV e AVI até 2GB\"\n      />\n    </div>\n  )\n}\n","size_bytes":510},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/examples/VideoCard.tsx":{"content":"import { VideoCard } from '../VideoCard'\n\nexport default function VideoCardExample() {\n  const mockClip = {\n    id: '1',\n    thumbnailUrl: 'https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?w=400&h=225&fit=crop',\n    duration: '1:02',\n    startTime: '00:45',\n    endTime: '01:47',\n    title: 'Momento impactante - Ação inicial'\n  };\n\n  return (\n    <div className=\"max-w-sm\">\n      <VideoCard \n        clip={mockClip}\n        onDownload={(id) => console.log('Download clip:', id)}\n        onPreview={(id) => console.log('Preview clip:', id)}\n      />\n    </div>\n  )\n}\n","size_bytes":581},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/examples/FileUploadZone.tsx":{"content":"import { FileUploadZone } from '../FileUploadZone'\n\nexport default function FileUploadZoneExample() {\n  return (\n    <FileUploadZone \n      onFileSelect={(file) => console.log('File selected:', file.name)} \n    />\n  )\n}\n","size_bytes":220},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/DownloadModal.tsx":{"content":"import {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Download } from \"lucide-react\";\nimport { useState } from \"react\";\n\ninterface Clip {\n  id: string;\n  title: string;\n  duration: string;\n}\n\ninterface DownloadModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  clips: Clip[];\n  onDownload: (clipIds: string[]) => void;\n}\n\nexport function DownloadModal({ open, onOpenChange, clips, onDownload }: DownloadModalProps) {\n  const [selectedClips, setSelectedClips] = useState<Set<string>>(new Set(clips.map(c => c.id)));\n\n  const toggleClip = (clipId: string) => {\n    const newSelection = new Set(selectedClips);\n    if (newSelection.has(clipId)) {\n      newSelection.delete(clipId);\n    } else {\n      newSelection.add(clipId);\n    }\n    setSelectedClips(newSelection);\n  };\n\n  const toggleAll = () => {\n    if (selectedClips.size === clips.length) {\n      setSelectedClips(new Set());\n    } else {\n      setSelectedClips(new Set(clips.map(c => c.id)));\n    }\n  };\n\n  const handleDownload = () => {\n    onDownload(Array.from(selectedClips));\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\" data-testid=\"modal-download\">\n        <DialogHeader>\n          <DialogTitle>Baixar Cortes</DialogTitle>\n          <DialogDescription>\n            Selecione os cortes que deseja baixar\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-3 max-h-60 overflow-y-auto\">\n          <div className=\"flex items-center gap-2 pb-2 border-b border-border\">\n            <Checkbox\n              checked={selectedClips.size === clips.length}\n              onCheckedChange={toggleAll}\n              data-testid=\"checkbox-select-all\"\n            />\n            <span className=\"text-sm font-medium\">Selecionar todos</span>\n          </div>\n          {clips.map((clip) => (\n            <div key={clip.id} className=\"flex items-center gap-2 hover-elevate p-2 rounded-md\">\n              <Checkbox\n                checked={selectedClips.has(clip.id)}\n                onCheckedChange={() => toggleClip(clip.id)}\n                data-testid={`checkbox-clip-${clip.id}`}\n              />\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm truncate\">{clip.title}</p>\n                <p className=\"text-xs text-muted-foreground font-mono\">{clip.duration}</p>\n              </div>\n            </div>\n          ))}\n        </div>\n        <DialogFooter>\n          <Button\n            onClick={handleDownload}\n            disabled={selectedClips.size === 0}\n            className=\"w-full\"\n            data-testid=\"button-confirm-download\"\n          >\n            <Download className=\"h-4 w-4 mr-2\" />\n            Baixar {selectedClips.size} {selectedClips.size === 1 ? 'Corte' : 'Cortes'}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":3110},"client/src/components/ProcessingStatus.tsx":{"content":"import { Progress } from \"@/components/ui/progress\";\nimport { Loader2 } from \"lucide-react\";\n\ninterface ProcessingStatusProps {\n  fileName: string;\n  progress: number;\n  status: 'uploading' | 'analyzing' | 'processing' | 'complete';\n}\n\nexport function ProcessingStatus({ fileName, progress, status }: ProcessingStatusProps) {\n  const getStatusText = () => {\n    switch (status) {\n      case 'uploading': return 'Enviando vídeo...';\n      case 'analyzing': return 'Analisando com IA...';\n      case 'processing': return 'Gerando cortes...';\n      case 'complete': return 'Concluído!';\n      default: return 'Processando...';\n    }\n  };\n\n  return (\n    <div className=\"space-y-3 p-4 bg-card rounded-lg border border-card-border\" data-testid=\"status-processing\">\n      <div className=\"flex items-center gap-3\">\n        {status !== 'complete' && (\n          <Loader2 className=\"h-4 w-4 animate-spin text-primary\" />\n        )}\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"text-sm font-medium truncate font-mono\" data-testid=\"text-filename\">\n            {fileName}\n          </p>\n          <p className=\"text-xs text-muted-foreground\" data-testid=\"text-status\">\n            {getStatusText()}\n          </p>\n        </div>\n      </div>\n      <div className=\"space-y-1\">\n        <Progress value={progress} className=\"h-1\" />\n        <p className=\"text-xs text-center text-muted-foreground\" data-testid=\"text-progress\">\n          {progress}%\n        </p>\n      </div>\n    </div>\n  );\n}\n","size_bytes":1500},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/examples/Home.tsx":{"content":"import Home from '../../pages/Home'\n\nexport default function HomeExample() {\n  return <Home />\n}\n","size_bytes":97},"client/src/components/examples/DownloadModal.tsx":{"content":"import { DownloadModal } from '../DownloadModal'\nimport { Button } from '@/components/ui/button'\nimport { useState } from 'react'\n\nexport default function DownloadModalExample() {\n  const [open, setOpen] = useState(false);\n  \n  const mockClips = [\n    { id: '1', title: 'Momento impactante - Ação inicial', duration: '1:02' },\n    { id: '2', title: 'Cena de transição dinâmica', duration: '0:58' },\n    { id: '3', title: 'Final épico', duration: '1:05' },\n  ];\n\n  return (\n    <>\n      <Button onClick={() => setOpen(true)}>\n        Abrir Modal de Download\n      </Button>\n      <DownloadModal \n        open={open}\n        onOpenChange={setOpen}\n        clips={mockClips}\n        onDownload={(ids) => console.log('Download clips:', ids)}\n      />\n    </>\n  )\n}\n","size_bytes":767},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Home from \"@/pages/Home\";\nimport NotFound from \"@/pages/not-found\";\nimport Accounts from \"@/pages/Accounts\";\nimport OAuthSetup from \"@/pages/OAuthSetup\";\nimport OAuthCallback from \"@/pages/OAuthCallback\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/accounts\" component={Accounts} />\n      <Route path=\"/oauth/setup\" component={OAuthSetup} />\n      <Route path=\"/oauth/callback\" component={OAuthCallback} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":1014},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/EmptyState.tsx":{"content":"import { Video } from \"lucide-react\";\n\ninterface EmptyStateProps {\n  icon?: React.ReactNode;\n  title: string;\n  description: string;\n}\n\nexport function EmptyState({ icon, title, description }: EmptyStateProps) {\n  return (\n    <div className=\"flex flex-col items-center justify-center py-12 px-4 text-center\" data-testid=\"empty-state\">\n      <div className=\"text-muted-foreground mb-4\">\n        {icon || <Video className=\"h-16 w-16\" />}\n      </div>\n      <h3 className=\"text-lg font-semibold mb-2\">{title}</h3>\n      <p className=\"text-sm text-muted-foreground max-w-sm\">{description}</p>\n    </div>\n  );\n}\n","size_bytes":608},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/examples/ProcessingStatus.tsx":{"content":"import { ProcessingStatus } from '../ProcessingStatus'\n\nexport default function ProcessingStatusExample() {\n  return (\n    <div className=\"space-y-4 max-w-md\">\n      <ProcessingStatus \n        fileName=\"video-example.mp4\"\n        progress={35}\n        status=\"analyzing\"\n      />\n      <ProcessingStatus \n        fileName=\"tutorial-completo.mov\"\n        progress={100}\n        status=\"complete\"\n      />\n    </div>\n  )\n}\n","size_bytes":421},"client/src/components/examples/URLInput.tsx":{"content":"import { URLInput } from '../URLInput'\n\nexport default function URLInputExample() {\n  return (\n    <URLInput \n      onSubmit={(url) => console.log('URL submitted:', url)} \n    />\n  )\n}\n","size_bytes":185},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/VideoCard.tsx":{"content":"import { Download, Play } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface VideoClip {\n  id: string;\n  thumbnailUrl: string;\n  duration: string;\n  startTime: string;\n  endTime: string;\n  title: string;\n}\n\ninterface VideoCardProps {\n  clip: VideoClip;\n  onDownload: (id: string) => void;\n  onPreview: (id: string) => void;\n}\n\nexport function VideoCard({ clip, onDownload, onPreview }: VideoCardProps) {\n  return (\n    <Card className=\"overflow-hidden hover-elevate\" data-testid={`card-clip-${clip.id}`}>\n      <div className=\"relative aspect-video bg-muted\">\n        <img \n          src={clip.thumbnailUrl} \n          alt={clip.title}\n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute top-2 right-2\">\n          <Badge variant=\"secondary\" className=\"bg-black/80 text-white text-xs\">\n            {clip.duration}\n          </Badge>\n        </div>\n        <button\n          onClick={() => onPreview(clip.id)}\n          className=\"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 hover:opacity-100 transition-opacity\"\n          data-testid={`button-preview-${clip.id}`}\n        >\n          <div className=\"bg-white/90 rounded-full p-3\">\n            <Play className=\"h-6 w-6 text-black fill-black\" />\n          </div>\n        </button>\n      </div>\n      <CardContent className=\"p-4 space-y-3\">\n        <div>\n          <h3 className=\"font-medium text-sm line-clamp-1\" data-testid={`text-title-${clip.id}`}>\n            {clip.title}\n          </h3>\n          <p className=\"text-xs text-muted-foreground font-mono\">\n            {clip.startTime} - {clip.endTime}\n          </p>\n        </div>\n        <Button \n          onClick={() => onDownload(clip.id)}\n          className=\"w-full\"\n          size=\"sm\"\n          data-testid={`button-download-${clip.id}`}\n        >\n          <Download className=\"h-4 w-4 mr-2\" />\n          Baixar Corte\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2090},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0 0% 98%;\n\n  --foreground: 220 15% 15%;\n\n  --border: 220 10% 88%;\n\n  --card: 0 0% 100%;\n\n  --card-foreground: 220 15% 15%;\n\n  --card-border: 220 8% 92%;\n\n  --sidebar: 220 6% 96%;\n\n  --sidebar-foreground: 220 15% 15%;\n\n  --sidebar-border: 220 8% 90%;\n\n  --sidebar-primary: 210 95% 55%;\n\n  --sidebar-primary-foreground: 210 95% 98%;\n\n  --sidebar-accent: 220 12% 92%;\n\n  --sidebar-accent-foreground: 220 15% 20%;\n\n  --sidebar-ring: 210 95% 55%;\n\n  --popover: 220 8% 94%;\n\n  --popover-foreground: 220 15% 15%;\n\n  --popover-border: 220 10% 86%;\n\n  --primary: 210 95% 55%;\n\n  --primary-foreground: 210 95% 98%;\n\n  --secondary: 220 10% 90%;\n\n  --secondary-foreground: 220 15% 20%;\n\n  --muted: 220 12% 92%;\n\n  --muted-foreground: 220 15% 40%;\n\n  --accent: 210 18% 88%;\n\n  --accent-foreground: 210 95% 25%;\n\n  --destructive: 0 84% 45%;\n\n  --destructive-foreground: 0 84% 98%;\n\n  --input: 220 15% 75%;\n  --ring: 210 95% 55%;\n  --chart-1: 210 95% 45%;\n  --chart-2: 142 76% 40%;\n  --chart-3: 280 85% 50%;\n  --chart-4: 35 90% 50%;\n  --chart-5: 340 80% 50%;\n\n  --font-sans: Open Sans, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 2px 0px 0px hsl(220 10% 20% / 0.05);\n  --shadow-xs: 0px 2px 0px 0px hsl(220 10% 20% / 0.08);\n  --shadow-sm: 0px 2px 0px 0px hsl(220 10% 20% / 0.05), 0px 1px 2px -1px hsl(220 10% 20% / 0.10);\n  --shadow: 0px 2px 0px 0px hsl(220 10% 20% / 0.05), 0px 1px 2px -1px hsl(220 10% 20% / 0.10);\n  --shadow-md: 0px 2px 0px 0px hsl(220 10% 20% / 0.05), 0px 2px 4px -1px hsl(220 10% 20% / 0.12);\n  --shadow-lg: 0px 2px 0px 0px hsl(220 10% 20% / 0.05), 0px 4px 6px -1px hsl(220 10% 20% / 0.15);\n  --shadow-xl: 0px 2px 0px 0px hsl(220 10% 20% / 0.05), 0px 8px 10px -1px hsl(220 10% 20% / 0.18);\n  --shadow-2xl: 0px 2px 0px 0px hsl(220 10% 20% / 0.10);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 220 15% 12%;\n\n  --foreground: 220 10% 95%;\n\n  --border: 220 15% 28%;\n\n  --card: 220 15% 18%;\n\n  --card-foreground: 220 10% 95%;\n\n  --card-border: 220 15% 24%;\n\n  --sidebar: 220 15% 15%;\n\n  --sidebar-foreground: 220 10% 95%;\n\n  --sidebar-border: 220 15% 20%;\n\n  --sidebar-primary: 210 100% 65%;\n\n  --sidebar-primary-foreground: 210 100% 98%;\n\n  --sidebar-accent: 220 12% 22%;\n\n  --sidebar-accent-foreground: 220 10% 95%;\n\n  --sidebar-ring: 210 100% 65%;\n\n  --popover: 220 12% 22%;\n\n  --popover-foreground: 220 10% 95%;\n\n  --popover-border: 220 12% 28%;\n\n  --primary: 210 100% 65%;\n\n  --primary-foreground: 210 100% 98%;\n\n  --secondary: 220 10% 28%;\n\n  --secondary-foreground: 220 10% 95%;\n\n  --muted: 220 12% 25%;\n\n  --muted-foreground: 220 8% 70%;\n\n  --accent: 220 15% 24%;\n\n  --accent-foreground: 220 10% 95%;\n\n  --destructive: 0 84% 35%;\n\n  --destructive-foreground: 0 84% 98%;\n\n  --input: 220 15% 40%;\n  --ring: 210 100% 65%;\n  --chart-1: 210 100% 70%;\n  --chart-2: 142 76% 55%;\n  --chart-3: 280 85% 65%;\n  --chart-4: 35 90% 60%;\n  --chart-5: 340 80% 60%;\n\n  --shadow-2xs: 0px 2px 0px 0px hsl(220 20% 5% / 0.20);\n  --shadow-xs: 0px 2px 0px 0px hsl(220 20% 5% / 0.30);\n  --shadow-sm: 0px 2px 0px 0px hsl(220 20% 5% / 0.20), 0px 1px 2px -1px hsl(220 20% 5% / 0.40);\n  --shadow: 0px 2px 0px 0px hsl(220 20% 5% / 0.20), 0px 1px 2px -1px hsl(220 20% 5% / 0.40);\n  --shadow-md: 0px 2px 0px 0px hsl(220 20% 5% / 0.20), 0px 2px 4px -1px hsl(220 20% 5% / 0.50);\n  --shadow-lg: 0px 2px 0px 0px hsl(220 20% 5% / 0.20), 0px 4px 6px -1px hsl(220 20% 5% / 0.60);\n  --shadow-xl: 0px 2px 0px 0px hsl(220 20% 5% / 0.20), 0px 8px 10px -1px hsl(220 20% 5% / 0.70);\n  --shadow-2xl: 0px 2px 0px 0px hsl(220 20% 5% / 0.40);\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":11251},"client/src/components/ThemeToggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useEffect, useState } from \"react\";\n\nexport function ThemeToggle() {\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"dark\");\n\n  useEffect(() => {\n    const savedTheme = localStorage.getItem(\"theme\") as \"light\" | \"dark\" | null;\n    const prefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n    const initialTheme = savedTheme || (prefersDark ? \"dark\" : \"light\");\n    \n    setTheme(initialTheme);\n    document.documentElement.classList.toggle(\"dark\", initialTheme === \"dark\");\n  }, []);\n\n  const toggleTheme = () => {\n    const newTheme = theme === \"dark\" ? \"light\" : \"dark\";\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\");\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      data-testid=\"button-theme-toggle\"\n    >\n      {theme === \"dark\" ? (\n        <Sun className=\"h-5 w-5\" />\n      ) : (\n        <Moon className=\"h-5 w-5\" />\n      )}\n    </Button>\n  );\n}\n","size_bytes":1134},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport fs from \"fs\";\nimport { analyzeVideoForCuts, generateSubtitles } from \"./gemini\";\nimport { isSocialMediaUrl, downloadVideoFromPlatform } from \"./video-downloader\";\nimport { cutVideo, addSubtitlesToVideo } from \"./video-processor\";\n\nconst uploadDir = path.join(process.cwd(), \"uploads\");\nconst processedDir = path.join(process.cwd(), \"processed\");\n\nif (!fs.existsSync(uploadDir)) {\n  fs.mkdirSync(uploadDir, { recursive: true });\n}\nif (!fs.existsSync(processedDir)) {\n  fs.mkdirSync(processedDir, { recursive: true });\n}\n\nfunction sanitizeFilename(filename: string): string {\n  return filename.replace(/[^a-zA-Z0-9._-]/g, '_');\n}\n\nconst upload = multer({\n  storage: multer.diskStorage({\n    destination: (req, file, cb) => {\n      cb(null, uploadDir);\n    },\n    filename: (req, file, cb) => {\n      const sanitized = sanitizeFilename(file.originalname);\n      const uniqueName = `${Date.now()}-${sanitized}`;\n      cb(null, uniqueName);\n    },\n  }),\n  fileFilter: (req, file, cb) => {\n    if (file.mimetype.startsWith(\"video/\")) {\n      cb(null, true);\n    } else {\n      cb(new Error(\"Apenas arquivos de vídeo são permitidos\"));\n    }\n  },\n  limits: {\n    fileSize: 2 * 1024 * 1024 * 1024, // 2GB\n  },\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  app.post(\"/api/videos/upload\", upload.single(\"video\"), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ error: \"Nenhum arquivo enviado\" });\n      }\n\n      const { title } = req.body;\n      const videoPath = req.file.path;\n\n      const video = await storage.createVideo({\n        title: title || req.file.originalname,\n        videoPath,\n        source: \"upload\",\n      });\n\n      const cuts = await analyzeVideoForCuts(videoPath);\n\n      for (const cut of cuts) {\n        await storage.createVideoCut({\n          videoId: video.id,\n          startTime: cut.startTime,\n          endTime: cut.endTime,\n          description: cut.description,\n        });\n      }\n\n      const videoCuts = await storage.getVideoCutsByVideoId(video.id);\n\n      res.json({ video, cuts: videoCuts });\n    } catch (error: any) {\n      console.error(\"Erro no upload:\", error);\n      res.status(500).json({ error: error.message || \"Erro ao processar vídeo\" });\n    }\n  });\n\n  app.post(\"/api/videos/url\", async (req, res) => {\n    try {\n      const { url, title } = req.body;\n\n      if (!url) {\n        return res.status(400).json({ error: \"URL é obrigatória\" });\n      }\n\n      let parsedUrl;\n      try {\n        parsedUrl = new URL(url);\n      } catch {\n        return res.status(400).json({ error: \"URL inválida\" });\n      }\n\n      if (![\"http:\", \"https:\"].includes(parsedUrl.protocol)) {\n        return res.status(400).json({ error: \"Apenas URLs HTTP/HTTPS são permitidas\" });\n      }\n\n      if (parsedUrl.hostname === \"localhost\" || parsedUrl.hostname === \"127.0.0.1\" || parsedUrl.hostname.startsWith(\"192.168.\") || parsedUrl.hostname.startsWith(\"10.\")) {\n        return res.status(400).json({ error: \"URLs internas não são permitidas\" });\n      }\n\n      let videoPath: string;\n      let videoTitle: string;\n\n      if (isSocialMediaUrl(url)) {\n        videoPath = await downloadVideoFromPlatform(url, uploadDir);\n        videoTitle = title || path.basename(videoPath, path.extname(videoPath));\n      } else {\n        const response = await fetch(url, {\n          headers: {\n            'User-Agent': 'VideoAnalyzer/1.0'\n          },\n          signal: AbortSignal.timeout(30000),\n        });\n\n        if (!response.ok) {\n          return res.status(400).json({ error: \"Não foi possível baixar o vídeo da URL\" });\n        }\n\n        const contentType = response.headers.get(\"content-type\");\n        if (!contentType || !contentType.startsWith(\"video/\")) {\n          return res.status(400).json({ error: \"A URL não aponta para um arquivo de vídeo\" });\n        }\n\n        const contentLength = response.headers.get(\"content-length\");\n        if (contentLength && parseInt(contentLength) > 100 * 1024 * 1024) {\n          return res.status(400).json({ error: \"Vídeo muito grande (máximo 100MB)\" });\n        }\n\n        const urlBasename = sanitizeFilename(path.basename(url) || \"video.mp4\");\n        const filename = `${Date.now()}-${urlBasename}`;\n        videoPath = path.join(uploadDir, filename);\n\n        const writeStream = fs.createWriteStream(videoPath);\n        \n        await new Promise((resolve, reject) => {\n          if (!response.body) {\n            reject(new Error(\"Sem corpo de resposta\"));\n            return;\n          }\n          \n          const reader = response.body.getReader();\n          let totalBytes = 0;\n          const maxSize = 100 * 1024 * 1024;\n\n          const pump = async () => {\n            try {\n              const { done, value } = await reader.read();\n              if (done) {\n                writeStream.end();\n                resolve(true);\n                return;\n              }\n\n              totalBytes += value.length;\n              if (totalBytes > maxSize) {\n                writeStream.destroy();\n                fs.unlinkSync(videoPath);\n                reject(new Error(\"Vídeo excedeu o tamanho máximo\"));\n                return;\n              }\n\n              if (!writeStream.write(value)) {\n                writeStream.once('drain', pump);\n              } else {\n                pump();\n              }\n            } catch (err) {\n              reject(err);\n            }\n          };\n\n          pump();\n          writeStream.on('error', reject);\n        });\n\n        videoTitle = title || filename;\n      }\n\n      const video = await storage.createVideo({\n        title: videoTitle,\n        videoPath,\n        source: \"url\",\n      });\n\n      const cuts = await analyzeVideoForCuts(videoPath);\n\n      for (const cut of cuts) {\n        await storage.createVideoCut({\n          videoId: video.id,\n          startTime: cut.startTime,\n          endTime: cut.endTime,\n          description: cut.description,\n        });\n      }\n\n      const videoCuts = await storage.getVideoCutsByVideoId(video.id);\n\n      res.json({ video, cuts: videoCuts });\n    } catch (error: any) {\n      console.error(\"Erro ao processar URL:\", error);\n      res.status(500).json({ error: error.message || \"Erro ao processar vídeo\" });\n    }\n  });\n\n  app.get(\"/api/videos\", async (req, res) => {\n    try {\n      const videos = await storage.getAllVideos();\n      res.json(videos);\n    } catch (error: any) {\n      console.error(\"Erro ao listar vídeos:\", error);\n      res.status(500).json({ error: error.message || \"Erro ao listar vídeos\" });\n    }\n  });\n\n  app.get(\"/api/videos/:id\", async (req, res) => {\n    try {\n      const video = await storage.getVideo(req.params.id);\n      if (!video) {\n        return res.status(404).json({ error: \"Vídeo não encontrado\" });\n      }\n      const cuts = await storage.getVideoCutsByVideoId(video.id);\n      res.json({ video, cuts });\n    } catch (error: any) {\n      console.error(\"Erro ao buscar vídeo:\", error);\n      res.status(500).json({ error: error.message || \"Erro ao buscar vídeo\" });\n    }\n  });\n\n  app.get(\"/api/videos/:videoId/cuts\", async (req, res) => {\n    try {\n      const cuts = await storage.getVideoCutsByVideoId(req.params.videoId);\n      res.json(cuts);\n    } catch (error: any) {\n      console.error(\"Erro ao listar cortes:\", error);\n      res.status(500).json({ error: error.message || \"Erro ao listar cortes\" });\n    }\n  });\n\n  app.post(\"/api/cuts/:cutId/process\", async (req, res) => {\n    try {\n      const { cutId } = req.params;\n      const { format } = req.body;\n\n      if (!format || (format !== \"horizontal\" && format !== \"vertical\")) {\n        return res.status(400).json({ error: \"Formato inválido. Use 'horizontal' ou 'vertical'\" });\n      }\n\n      const cut = await storage.getVideoCut(cutId);\n      if (!cut) {\n        return res.status(404).json({ error: \"Corte não encontrado\" });\n      }\n\n      const video = await storage.getVideo(cut.videoId);\n      if (!video) {\n        return res.status(404).json({ error: \"Vídeo não encontrado\" });\n      }\n\n      const subtitles = await generateSubtitles(video.videoPath, cut.startTime, cut.endTime);\n\n      let outputPath = await cutVideo(\n        video.videoPath,\n        cut.startTime,\n        cut.endTime,\n        format,\n        processedDir\n      );\n\n      if (subtitles) {\n        outputPath = await addSubtitlesToVideo(outputPath, subtitles, processedDir);\n      }\n\n      const processedCut = await storage.createProcessedCut({\n        cutId: cut.id,\n        format,\n        outputPath,\n        subtitles: subtitles || null,\n      });\n\n      res.json(processedCut);\n    } catch (error: any) {\n      console.error(\"Erro ao processar corte:\", error);\n      res.status(500).json({ error: error.message || \"Erro ao processar corte\" });\n    }\n  });\n\n  app.get(\"/api/processed/:id/download\", async (req, res) => {\n    try {\n      const processed = await storage.getProcessedCut(req.params.id);\n      if (!processed) {\n        return res.status(404).json({ error: \"Corte processado não encontrado\" });\n      }\n\n      const filePath = processed.outputPath;\n      if (!fs.existsSync(filePath)) {\n        return res.status(404).json({ error: \"Arquivo não encontrado\" });\n      }\n\n      const filename = path.basename(filePath);\n      res.download(filePath, filename);\n    } catch (error: any) {\n      console.error(\"Erro ao fazer download:\", error);\n      res.status(500).json({ error: error.message || \"Erro ao fazer download\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":9766},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/examples/ThemeToggle.tsx":{"content":"import { ThemeToggle } from '../ThemeToggle'\n\nexport default function ThemeToggleExample() {\n  return <ThemeToggle />\n}\n","size_bytes":120},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, integer, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const videos = pgTable(\"videos\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  videoPath: text(\"video_path\").notNull(),\n  source: text(\"source\").notNull(),\n  uploadedAt: timestamp(\"uploaded_at\").notNull().default(sql`now()`),\n});\n\nexport const insertVideoSchema = createInsertSchema(videos).omit({\n  id: true,\n  uploadedAt: true,\n});\n\nexport type InsertVideo = z.infer<typeof insertVideoSchema>;\nexport type Video = typeof videos.$inferSelect;\n\nexport const videoCuts = pgTable(\"video_cuts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  videoId: varchar(\"video_id\").notNull().references(() => videos.id, { onDelete: 'cascade' }),\n  startTime: integer(\"start_time\").notNull(),\n  endTime: integer(\"end_time\").notNull(),\n  description: text(\"description\"),\n  createdAt: timestamp(\"created_at\").notNull().default(sql`now()`),\n});\n\nexport const insertVideoCutSchema = createInsertSchema(videoCuts).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertVideoCut = z.infer<typeof insertVideoCutSchema>;\nexport type VideoCut = typeof videoCuts.$inferSelect;\n\nexport const processedCuts = pgTable(\"processed_cuts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  cutId: varchar(\"cut_id\").notNull().references(() => videoCuts.id, { onDelete: 'cascade' }),\n  format: text(\"format\").notNull(),\n  outputPath: text(\"output_path\").notNull(),\n  subtitles: text(\"subtitles\"),\n  createdAt: timestamp(\"created_at\").notNull().default(sql`now()`),\n});\n\nexport const insertProcessedCutSchema = createInsertSchema(processedCuts).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertProcessedCut = z.infer<typeof insertProcessedCutSchema>;\nexport type ProcessedCut = typeof processedCuts.$inferSelect;\n","size_bytes":2007},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"sans-serif\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"JetBrains Mono\", \"monospace\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4064},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/FileUploadZone.tsx":{"content":"import { Upload, Video } from \"lucide-react\";\nimport { useState } from \"react\";\n\ninterface FileUploadZoneProps {\n  onFileSelect: (file: File) => void;\n}\n\nexport function FileUploadZone({ onFileSelect }: FileUploadZoneProps) {\n  const [isDragging, setIsDragging] = useState(false);\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setIsDragging(true);\n    } else if (e.type === \"dragleave\") {\n      setIsDragging(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n\n    const files = Array.from(e.dataTransfer.files);\n    const videoFile = files.find(file => file.type.startsWith('video/'));\n    \n    if (videoFile) {\n      onFileSelect(videoFile);\n    }\n  };\n\n  const handleFileInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files[0]) {\n      onFileSelect(files[0]);\n    }\n  };\n\n  return (\n    <div\n      className={`\n        relative h-48 rounded-lg border-2 border-dashed transition-colors\n        ${isDragging ? 'border-primary bg-primary/5' : 'border-border'}\n      `}\n      onDragEnter={handleDrag}\n      onDragLeave={handleDrag}\n      onDragOver={handleDrag}\n      onDrop={handleDrop}\n      data-testid=\"dropzone-upload\"\n    >\n      <input\n        type=\"file\"\n        accept=\"video/*\"\n        onChange={handleFileInput}\n        className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n        data-testid=\"input-file\"\n      />\n      <div className=\"absolute inset-0 flex flex-col items-center justify-center gap-2 pointer-events-none\">\n        {isDragging ? (\n          <Video className=\"h-12 w-12 text-primary\" />\n        ) : (\n          <Upload className=\"h-12 w-12 text-muted-foreground\" />\n        )}\n        <p className=\"text-sm font-medium text-foreground\">\n          {isDragging ? 'Solte o vídeo aqui' : 'Arraste um vídeo ou clique para selecionar'}\n        </p>\n        <p className=\"text-xs text-muted-foreground\">\n          MP4, MOV, AVI (máx. 2GB)\n        </p>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2185},"server/social-media/auth/youtube-auth.ts":{"content":"import { google } from 'googleapis';\nimport fs from 'fs';\nimport path from 'path';\nimport { socialMediaConfig } from '../config';\n\nexport class YouTubeAuth {\n  private config = socialMediaConfig.youtube;\n  private oauth2Client: any;\n\n  constructor() {\n    this.oauth2Client = new google.auth.OAuth2(\n      this.config.clientId,\n      this.config.clientSecret,\n      this.config.redirectUri\n    );\n  }\n\n  /**\n   * Gera a URL de autorização para o YouTube\n   */\n  getAuthUrl(state?: string): string {\n    const authUrl = this.oauth2Client.generateAuthUrl({\n      access_type: 'offline', // Necessário para refresh token\n      scope: this.config.scope,\n      state: state || 'default_state',\n      prompt: 'consent' // Força a tela de consentimento para obter refresh token\n    });\n\n    return authUrl;\n  }\n\n  /**\n   * Troca o código de autorização por tokens de acesso\n   */\n  async exchangeCodeForTokens(code: string): Promise<{\n    access_token: string;\n    refresh_token?: string;\n    scope: string;\n    token_type: string;\n    expiry_date: number;\n  }> {\n    try {\n      const { tokens } = await this.oauth2Client.getToken(code);\n      \n      if (!tokens.access_token) {\n        throw new Error('Não foi possível obter o token de acesso');\n      }\n\n      // Define as credenciais no cliente OAuth2\n      this.oauth2Client.setCredentials(tokens);\n\n      return {\n        access_token: tokens.access_token,\n        refresh_token: tokens.refresh_token,\n        scope: tokens.scope || this.config.scope.join(' '),\n        token_type: tokens.token_type || 'Bearer',\n        expiry_date: tokens.expiry_date || Date.now() + 3600000 // 1 hora por padrão\n      };\n    } catch (error) {\n      console.error('Erro ao trocar código por tokens do YouTube:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Atualiza o token de acesso usando o refresh token\n   */\n  async refreshAccessToken(refreshToken: string): Promise<{\n    access_token: string;\n    expiry_date: number;\n    token_type: string;\n  }> {\n    try {\n      this.oauth2Client.setCredentials({\n        refresh_token: refreshToken\n      });\n\n      const { credentials } = await this.oauth2Client.refreshAccessToken();\n\n      return {\n        access_token: credentials.access_token!,\n        expiry_date: credentials.expiry_date!,\n        token_type: credentials.token_type || 'Bearer'\n      };\n    } catch (error) {\n      console.error('Erro ao atualizar token do YouTube:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Obtém informações do canal do usuário autenticado\n   */\n  async getChannelInfo(accessToken: string): Promise<{\n    id: string;\n    title: string;\n    description: string;\n    customUrl?: string;\n    thumbnails: any;\n    statistics: {\n      viewCount: string;\n      subscriberCount: string;\n      videoCount: string;\n    };\n  }> {\n    try {\n      // Configura as credenciais\n      this.oauth2Client.setCredentials({\n        access_token: accessToken\n      });\n\n      const youtube = google.youtube({ version: 'v3', auth: this.oauth2Client });\n\n      const response = await youtube.channels.list({\n        part: ['snippet', 'statistics', 'contentDetails'],\n        mine: true\n      });\n\n      if (!response.data.items || response.data.items.length === 0) {\n        throw new Error('Nenhum canal encontrado para este usuário');\n      }\n\n      const channel = response.data.items[0];\n\n      return {\n        id: channel.id!,\n        title: channel.snippet!.title!,\n        description: channel.snippet!.description!,\n        customUrl: channel.snippet!.customUrl,\n        thumbnails: channel.snippet!.thumbnails,\n        statistics: {\n          viewCount: channel.statistics!.viewCount!,\n          subscriberCount: channel.statistics!.subscriberCount!,\n          videoCount: channel.statistics!.videoCount!\n        }\n      };\n    } catch (error) {\n      console.error('Erro ao obter informações do canal YouTube:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Verifica se o token ainda é válido\n   */\n  async validateToken(accessToken: string): Promise<boolean> {\n    try {\n      await this.getChannelInfo(accessToken);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Revoga o token de acesso\n   */\n  async revokeToken(accessToken: string): Promise<boolean> {\n    try {\n      this.oauth2Client.setCredentials({\n        access_token: accessToken\n      });\n\n      await this.oauth2Client.revokeCredentials();\n      return true;\n    } catch (error) {\n      console.error('Erro ao revogar token do YouTube:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Carrega credenciais de um arquivo JSON (client_secrets.json)\n   */\n  static loadCredentialsFromFile(filePath: string): {\n    clientId: string;\n    clientSecret: string;\n    redirectUri: string;\n  } {\n    try {\n      if (!fs.existsSync(filePath)) {\n        throw new Error(`Arquivo de credenciais não encontrado: ${filePath}`);\n      }\n\n      const credentials = JSON.parse(fs.readFileSync(filePath, 'utf8'));\n      \n      // Suporte para diferentes formatos de arquivo de credenciais\n      let clientInfo;\n      if (credentials.web) {\n        clientInfo = credentials.web;\n      } else if (credentials.installed) {\n        clientInfo = credentials.installed;\n      } else {\n        clientInfo = credentials;\n      }\n\n      return {\n        clientId: clientInfo.client_id,\n        clientSecret: clientInfo.client_secret,\n        redirectUri: clientInfo.redirect_uris ? clientInfo.redirect_uris[0] : clientInfo.redirect_uri\n      };\n    } catch (error) {\n      console.error('Erro ao carregar credenciais do arquivo:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Salva tokens em um arquivo para uso posterior\n   */\n  static saveTokensToFile(tokens: any, filePath: string): void {\n    try {\n      const dir = path.dirname(filePath);\n      if (!fs.existsSync(dir)) {\n        fs.mkdirSync(dir, { recursive: true });\n      }\n\n      fs.writeFileSync(filePath, JSON.stringify(tokens, null, 2));\n    } catch (error) {\n      console.error('Erro ao salvar tokens no arquivo:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Carrega tokens de um arquivo\n   */\n  static loadTokensFromFile(filePath: string): any {\n    try {\n      if (!fs.existsSync(filePath)) {\n        return null;\n      }\n\n      return JSON.parse(fs.readFileSync(filePath, 'utf8'));\n    } catch (error) {\n      console.error('Erro ao carregar tokens do arquivo:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Obtém o cliente OAuth2 configurado\n   */\n  getOAuth2Client(): any {\n    return this.oauth2Client;\n  }\n\n  /**\n   * Define as credenciais no cliente OAuth2\n   */\n  setCredentials(credentials: any): void {\n    this.oauth2Client.setCredentials(credentials);\n  }\n\n  /**\n   * Verifica se o token está próximo do vencimento (dentro de 5 minutos)\n   */\n  isTokenExpiringSoon(expiryDate: number): boolean {\n    const fiveMinutesFromNow = Date.now() + (5 * 60 * 1000);\n    return expiryDate <= fiveMinutesFromNow;\n  }\n}","size_bytes":6973},"server/gemini.ts":{"content":"import * as fs from \"fs\";\nimport path from \"path\";\nimport { GoogleGenAI } from \"@google/genai\";\nimport { exec } from \"child_process\";\nimport { execFile as execFileCb } from \"child_process\";\nimport { promisify } from \"util\";\n\nconst execAsync = promisify(exec);\nconst execFileAsync = promisify(execFileCb);\nconst ai = new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY || \"\" });\n\ninterface VideoCutSegment {\n  startTime: number;\n  endTime: number;\n  description: string;\n}\n\nfunction resolveBinary(bin: \"ffprobe\" | \"ffmpeg\"): string {\n  const envPath = bin === \"ffprobe\" ? process.env.FFPROBE_PATH : process.env.FFMPEG_PATH;\n  const candidates: string[] = [];\n  if (envPath) candidates.push(envPath);\n  // Common Windows installs\n  candidates.push(\n    `C:/ProgramData/chocolatey/bin/${bin}.exe`,\n    `C:/ProgramData/chocolatey/lib/ffmpeg/tools/ffmpeg/bin/${bin}.exe`,\n    `C:/ffmpeg/bin/${bin}.exe`,\n    `C:/Program Files/ffmpeg/bin/${bin}.exe`,\n    `C:/Program Files (x86)/ffmpeg/bin/${bin}.exe`\n  );\n  // Use plain name last (PATH)\n  candidates.push(bin);\n  for (const c of candidates) {\n    try {\n      if (fs.existsSync(c)) return c;\n    } catch {}\n  }\n  return bin;\n}\n\n// Fallback duration getter using execFile for reliable ENOENT detection\nasync function getVideoDurationFixed(videoPath: string): Promise<number> {\n  try {\n    const ffprobeBin = resolveBinary(\"ffprobe\");\n    const { stdout } = await execFileAsync(ffprobeBin, [\n      \"-v\",\n      \"error\",\n      \"-show_entries\",\n      \"format=duration\",\n      \"-of\",\n      \"default=noprint_wrappers=1:nokey=1\",\n      videoPath,\n    ]);\n    const duration = parseFloat(String(stdout).trim());\n    if (isNaN(duration)) {\n      throw new Error(\"Duração inválida\");\n    }\n    return duration;\n  } catch (error: any) {\n    const msg = String(error?.message || \"\").toLowerCase();\n    if (error?.code === 'ENOENT' || msg.includes('not found') || msg.includes('is not recognized') || msg.includes('not recognized')) {\n      throw new Error(\"FFmpeg/ffprobe não foi encontrado no PATH. Defina FFPROBE_PATH/FFMPEG_PATH ou instale o FFmpeg: https://ffmpeg.org/download.html\");\n    }\n    throw new Error(\"Não foi possível obter a duração do vídeo\");\n  }\n}\n\nasync function getVideoDuration(videoPath: string): Promise<number> {\n  try {\n    const { stdout } = await execAsync(\n      `ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 \"${videoPath}\"`\n    );\n    const duration = parseFloat(stdout.trim());\n    if (isNaN(duration)) {\n      throw new Error(\"Duração inválida\");\n    }\n    return duration;\n  } catch (error: any) {\n    console.error(\"Erro ao obter duração do vídeo:\", error);\n\n    if (error.message?.includes('não é reconhecido') || error.message?.includes('not found')) {\n      throw new Error(\"FFmpeg não está instalado. Por favor, instale FFmpeg em seu sistema: https://ffmpeg.org/download.html\");\n    }\n\n    throw new Error(\"Não foi possível obter a duração do vídeo\");\n  }\n}\n\nexport async function analyzeVideoForCuts(\n  videoPath: string\n): Promise<{ startTime: number; endTime: number; description: string }[]> {\n  try {\n    let duration: number;\n    try {\n      duration = await getVideoDurationFixed(videoPath);\n    } catch (durationError: any) {\n      console.error(\"Erro ao obter duração:\", durationError);\n      throw new Error(`Falha ao obter duração do vídeo: ${durationError.message}`);\n    }\n\n    const videoBytes = fs.readFileSync(videoPath);\n    const ext = path.extname(videoPath).toLowerCase();\n    const mimeType =\n      ext === \".webm\"\n        ? \"video/webm\"\n        : ext === \".mkv\"\n        ? \"video/x-matroska\"\n        : \"video/mp4\";\n\n    const contents = [\n      {\n        inlineData: {\n          data: videoBytes.toString(\"base64\"),\n          mimeType,\n        },\n      },\n      `Analise este vídeo completo que tem ${duration} segundos de duração.\n\nIdentifique os melhores momentos para criar cortes para Reels/Stories, seguindo estas regras OBRIGATÓRIAS:\n- Cada corte deve ter entre 60 e 120 segundos (1-2 minutos)\n- NÃO crie cortes abruptos no meio de uma frase ou ação\n- Identifique momentos naturais de início e fim (início de nova cena, nova fala, novo tópico)\n- Priorize segmentos com conteúdo interessante e engajador\n- Evite momentos de silêncio ou transição no início/fim dos cortes\n\nRetorne sua resposta EXATAMENTE neste formato JSON (sem texto adicional):\n[\n  {\n    \"startTime\": tempo_inicial_em_segundos,\n    \"endTime\": tempo_final_em_segundos,\n    \"description\": \"Descrição breve do que acontece neste segmento\"\n  }\n]\n\nIMPORTANTE: O tempo deve ser em segundos inteiros. Cada corte deve ter duração mínima de 60s e máxima de 120s.`,\n    ];\n\n    const response = await ai.models.generateContent({\n      model: \"gemini-2.0-flash-exp\",\n      contents: contents,\n    });\n\n    const responseText = response.text || \"\";\n\n    const jsonMatch = responseText.match(/\\[[\\s\\S]*\\]/);\n    if (!jsonMatch) {\n      throw new Error(\"IA não retornou formato válido\");\n    }\n\n    const cuts: VideoCutSegment[] = JSON.parse(jsonMatch[0]);\n\n    const validCuts = cuts.filter(cut => {\n      const cutDuration = cut.endTime - cut.startTime;\n      return cutDuration >= 60 && cutDuration <= 120 && cut.endTime <= duration;\n    });\n\n    if (validCuts.length === 0) {\n      const numCuts = Math.floor(duration / 90);\n      const fallbackCuts: VideoCutSegment[] = [];\n      for (let i = 0; i < numCuts; i++) {\n        const start = i * 90;\n        const end = Math.min(start + 90, duration);\n        if (end - start >= 60) {\n          fallbackCuts.push({\n            startTime: start,\n            endTime: end,\n            description: `Segmento ${i + 1} do vídeo`,\n          });\n        }\n      }\n      return fallbackCuts;\n    }\n\n    return validCuts;\n  } catch (error: any) {\n    console.error(\"Erro ao analisar vídeo:\", error);\n    throw new Error(`Falha ao analisar vídeo para cortes: ${error.message}`);\n  }\n}\n\nexport async function generateSubtitles(videoPath: string, startTime: number, endTime: number): Promise<string> {\n  try {\n    const videoBytes = fs.readFileSync(videoPath);\n    const ext = path.extname(videoPath).toLowerCase();\n    const mimeType =\n      ext === \".webm\"\n        ? \"video/webm\"\n        : ext === \".mkv\"\n        ? \"video/x-matroska\"\n        : \"video/mp4\";\n\n    const contents = [\n      {\n        inlineData: {\n          data: videoBytes.toString(\"base64\"),\n          mimeType,\n        },\n      },\n      `Analise este vídeo do segundo ${startTime} até o segundo ${endTime}.\n\nExtraia TODAS as falas e crie legendas no formato SRT (SubRip).\n\nFormato SRT esperado:\n1\n00:00:00,000 --> 00:00:02,500\nPrimeira fala\n\n2\n00:00:02,500 --> 00:00:05,000\nSegunda fala\n\nRegras:\n- Use timestamps relativos (começando de 00:00:00)\n- Quebre as legendas em partes de até 2 linhas e 42 caracteres por linha\n- Sincronize com as falas do vídeo\n- Se não houver falas, retorne \"SEM_FALAS\"\n\nRetorne APENAS o conteúdo SRT, sem explicações.`,\n    ];\n\n    const response = await ai.models.generateContent({\n      model: \"gemini-2.0-flash-exp\",\n      contents: contents,\n    });\n\n    const subtitles = response.text || \"\";\n\n    if (subtitles.includes(\"SEM_FALAS\")) {\n      return \"\";\n    }\n\n    return subtitles.trim();\n  } catch (error: any) {\n    console.error(\"Erro ao gerar legendas:\", error);\n    return \"\";\n  }\n}\n","size_bytes":7388},"server/social-media/publishers/instagram-publisher.ts":{"content":"import axios from 'axios';\nimport FormData from 'form-data';\nimport fs from 'fs';\nimport path from 'path';\nimport { PostContent, PublishResult } from '../config';\n\nexport class InstagramPublisher {\n  private graphUrl = 'https://graph.facebook.com/v18.0';\n\n  /**\n   * Publica um Reel no Instagram\n   */\n  async publishReel(\n    pageAccessToken: string,\n    instagramAccountId: string,\n    content: PostContent\n  ): Promise<PublishResult> {\n    try {\n      // Primeiro, cria o container do media\n      const containerResult = await this.createMediaContainer(\n        pageAccessToken,\n        instagramAccountId,\n        content\n      );\n\n      if (!containerResult.success) {\n        return {\n          platform: 'instagram',\n          success: false,\n          error: containerResult.error\n        };\n      }\n\n      // Aguarda o processamento do container\n      await this.waitForContainerProcessing(\n        pageAccessToken,\n        containerResult.container_id!\n      );\n\n      // Publica o container\n      const publishResult = await this.publishContainer(\n        pageAccessToken,\n        instagramAccountId,\n        containerResult.container_id!\n      );\n\n      return publishResult;\n    } catch (error) {\n      console.error('Erro ao publicar Reel no Instagram:', error);\n      return {\n        platform: 'instagram',\n        success: false,\n        error: error instanceof Error ? error.message : 'Erro desconhecido'\n      };\n    }\n  }\n\n  /**\n   * Cria um container de media para o Reel\n   */\n  private async createMediaContainer(\n    pageAccessToken: string,\n    instagramAccountId: string,\n    content: PostContent\n  ): Promise<{\n    success: boolean;\n    container_id?: string;\n    error?: string;\n  }> {\n    try {\n      // Verifica se o arquivo existe\n      if (!fs.existsSync(content.videoPath)) {\n        throw new Error('Arquivo de vídeo não encontrado');\n      }\n\n      // Primeiro, faz upload do vídeo para um servidor temporário ou usa URL pública\n      // Para desenvolvimento local, você precisará de um servidor público ou usar ngrok\n      const videoUrl = await this.uploadVideoToPublicUrl(content.videoPath);\n\n      // Formata a legenda\n      const caption = this.formatCaption(content);\n\n      const response = await axios.post(\n        `${this.graphUrl}/${instagramAccountId}/media`,\n        {\n          media_type: 'REELS',\n          video_url: videoUrl,\n          caption: caption.substring(0, 2200), // Limite do Instagram\n          share_to_feed: true, // Compartilha no feed também\n          cover_url: content.thumbnailPath ? await this.uploadImageToPublicUrl(content.thumbnailPath) : undefined\n        },\n        {\n          params: {\n            access_token: pageAccessToken\n          }\n        }\n      );\n\n      if (response.data.error) {\n        throw new Error(`Erro ao criar container: ${response.data.error.message}`);\n      }\n\n      return {\n        success: true,\n        container_id: response.data.id\n      };\n    } catch (error) {\n      console.error('Erro ao criar container do Instagram:', error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Erro ao criar container'\n      };\n    }\n  }\n\n  /**\n   * Aguarda o processamento do container\n   */\n  private async waitForContainerProcessing(\n    pageAccessToken: string,\n    containerId: string,\n    maxAttempts: number = 30\n  ): Promise<void> {\n    for (let attempt = 0; attempt < maxAttempts; attempt++) {\n      try {\n        const response = await axios.get(\n          `${this.graphUrl}/${containerId}`,\n          {\n            params: {\n              fields: 'status_code',\n              access_token: pageAccessToken\n            }\n          }\n        );\n\n        const statusCode = response.data.status_code;\n\n        if (statusCode === 'FINISHED') {\n          return; // Processamento concluído\n        } else if (statusCode === 'ERROR') {\n          throw new Error('Erro no processamento do vídeo');\n        }\n\n        // Aguarda 2 segundos antes da próxima verificação\n        await new Promise(resolve => setTimeout(resolve, 2000));\n      } catch (error) {\n        if (attempt === maxAttempts - 1) {\n          throw error;\n        }\n      }\n    }\n\n    throw new Error('Timeout no processamento do vídeo');\n  }\n\n  /**\n   * Publica o container processado\n   */\n  private async publishContainer(\n    pageAccessToken: string,\n    instagramAccountId: string,\n    containerId: string\n  ): Promise<PublishResult> {\n    try {\n      const response = await axios.post(\n        `${this.graphUrl}/${instagramAccountId}/media_publish`,\n        {\n          creation_id: containerId\n        },\n        {\n          params: {\n            access_token: pageAccessToken\n          }\n        }\n      );\n\n      if (response.data.error) {\n        throw new Error(`Erro ao publicar: ${response.data.error.message}`);\n      }\n\n      const mediaId = response.data.id;\n\n      return {\n        platform: 'instagram',\n        success: true,\n        postId: mediaId,\n        postUrl: `https://www.instagram.com/reel/${mediaId}/`\n      };\n    } catch (error) {\n      console.error('Erro ao publicar container do Instagram:', error);\n      return {\n        platform: 'instagram',\n        success: false,\n        error: error instanceof Error ? error.message : 'Erro ao publicar'\n      };\n    }\n  }\n\n  /**\n   * Publica uma foto no Instagram\n   */\n  async publishPhoto(\n    pageAccessToken: string,\n    instagramAccountId: string,\n    imagePath: string,\n    caption: string\n  ): Promise<PublishResult> {\n    try {\n      // Upload da imagem\n      const imageUrl = await this.uploadImageToPublicUrl(imagePath);\n\n      // Cria container\n      const containerResponse = await axios.post(\n        `${this.graphUrl}/${instagramAccountId}/media`,\n        {\n          image_url: imageUrl,\n          caption: caption.substring(0, 2200)\n        },\n        {\n          params: {\n            access_token: pageAccessToken\n          }\n        }\n      );\n\n      if (containerResponse.data.error) {\n        throw new Error(`Erro ao criar container de imagem: ${containerResponse.data.error.message}`);\n      }\n\n      const containerId = containerResponse.data.id;\n\n      // Publica\n      const publishResponse = await axios.post(\n        `${this.graphUrl}/${instagramAccountId}/media_publish`,\n        {\n          creation_id: containerId\n        },\n        {\n          params: {\n            access_token: pageAccessToken\n          }\n        }\n      );\n\n      if (publishResponse.data.error) {\n        throw new Error(`Erro ao publicar imagem: ${publishResponse.data.error.message}`);\n      }\n\n      return {\n        platform: 'instagram',\n        success: true,\n        postId: publishResponse.data.id,\n        postUrl: `https://www.instagram.com/p/${publishResponse.data.id}/`\n      };\n    } catch (error) {\n      console.error('Erro ao publicar foto no Instagram:', error);\n      return {\n        platform: 'instagram',\n        success: false,\n        error: error instanceof Error ? error.message : 'Erro desconhecido'\n      };\n    }\n  }\n\n  /**\n   * Formata a legenda combinando título, descrição e hashtags\n   */\n  private formatCaption(content: PostContent): string {\n    let caption = '';\n    \n    if (content.title) {\n      caption += content.title + '\\n\\n';\n    }\n    \n    if (content.description) {\n      caption += content.description + '\\n\\n';\n    }\n    \n    if (content.hashtags && content.hashtags.length > 0) {\n      const hashtags = content.hashtags\n        .map(tag => tag.startsWith('#') ? tag : `#${tag}`)\n        .join(' ');\n      caption += hashtags;\n    }\n    \n    return caption.trim();\n  }\n\n  /**\n   * Faz upload do vídeo para uma URL pública (implementação simplificada)\n   * NOTA: Em produção, você precisará implementar um serviço de upload real\n   */\n  private async uploadVideoToPublicUrl(videoPath: string): Promise<string> {\n    // Esta é uma implementação placeholder\n    // Em um ambiente real, você precisaria:\n    // 1. Fazer upload para um serviço como AWS S3, Cloudinary, etc.\n    // 2. Ou usar ngrok para expor seu servidor local\n    // 3. Ou implementar um endpoint público temporário\n    \n    console.warn('AVISO: uploadVideoToPublicUrl precisa ser implementado com um serviço real');\n    \n    // Por enquanto, retorna uma URL placeholder\n    // Você deve substituir isso por uma implementação real\n    return `https://your-public-server.com/uploads/${path.basename(videoPath)}`;\n  }\n\n  /**\n   * Faz upload da imagem para uma URL pública (implementação simplificada)\n   */\n  private async uploadImageToPublicUrl(imagePath: string): Promise<string> {\n    // Mesma observação do método acima\n    console.warn('AVISO: uploadImageToPublicUrl precisa ser implementado com um serviço real');\n    \n    return `https://your-public-server.com/uploads/${path.basename(imagePath)}`;\n  }\n\n  /**\n   * Obtém informações sobre uma publicação\n   */\n  async getMediaInfo(\n    pageAccessToken: string,\n    mediaId: string\n  ): Promise<{\n    id: string;\n    media_type: string;\n    media_url: string;\n    permalink: string;\n    timestamp: string;\n    caption?: string;\n    like_count?: number;\n    comments_count?: number;\n  }> {\n    try {\n      const response = await axios.get(\n        `${this.graphUrl}/${mediaId}`,\n        {\n          params: {\n            fields: 'id,media_type,media_url,permalink,timestamp,caption,like_count,comments_count',\n            access_token: pageAccessToken\n          }\n        }\n      );\n\n      if (response.data.error) {\n        throw new Error(`Erro ao obter informações da mídia: ${response.data.error.message}`);\n      }\n\n      return response.data;\n    } catch (error) {\n      console.error('Erro ao obter informações da mídia Instagram:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Lista as publicações recentes\n   */\n  async getRecentMedia(\n    pageAccessToken: string,\n    instagramAccountId: string,\n    limit: number = 25\n  ): Promise<Array<{\n    id: string;\n    media_type: string;\n    media_url: string;\n    permalink: string;\n    timestamp: string;\n    caption?: string;\n  }>> {\n    try {\n      const response = await axios.get(\n        `${this.graphUrl}/${instagramAccountId}/media`,\n        {\n          params: {\n            fields: 'id,media_type,media_url,permalink,timestamp,caption',\n            limit: limit,\n            access_token: pageAccessToken\n          }\n        }\n      );\n\n      if (response.data.error) {\n        throw new Error(`Erro ao obter mídias recentes: ${response.data.error.message}`);\n      }\n\n      return response.data.data;\n    } catch (error) {\n      console.error('Erro ao obter mídias recentes do Instagram:', error);\n      throw error;\n    }\n  }\n}","size_bytes":10716},"server/social-media/auth/instagram-auth.ts":{"content":"import axios from 'axios';\nimport { socialMediaConfig } from '../config';\n\nexport class InstagramAuth {\n  private config = socialMediaConfig.instagram;\n  private baseUrl = 'https://api.instagram.com';\n  private graphUrl = 'https://graph.facebook.com/v18.0';\n\n  /**\n   * Gera a URL de autorização para o Instagram\n   */\n  getAuthUrl(state?: string): string {\n    const params = new URLSearchParams({\n      client_id: this.config.clientId,\n      redirect_uri: this.config.redirectUri,\n      scope: this.config.scope.join(','),\n      response_type: 'code',\n      state: state || 'default_state'\n    });\n\n    return `${this.baseUrl}/oauth/authorize?${params.toString()}`;\n  }\n\n  /**\n   * Troca o código de autorização por um token de acesso de curta duração\n   */\n  async exchangeCodeForShortToken(code: string): Promise<{\n    access_token: string;\n    user_id: number;\n  }> {\n    try {\n      const response = await axios.post(`${this.baseUrl}/oauth/access_token`, {\n        client_id: this.config.clientId,\n        client_secret: this.config.clientSecret,\n        grant_type: 'authorization_code',\n        redirect_uri: this.config.redirectUri,\n        code: code\n      }, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n\n      if (response.data.error) {\n        throw new Error(`Instagram OAuth Error: ${response.data.error_description}`);\n      }\n\n      return response.data;\n    } catch (error) {\n      console.error('Erro ao trocar código por token do Instagram:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Converte token de curta duração em token de longa duração\n   */\n  async exchangeForLongLivedToken(shortToken: string): Promise<{\n    access_token: string;\n    token_type: string;\n    expires_in: number;\n  }> {\n    try {\n      const response = await axios.get(`${this.graphUrl}/access_token`, {\n        params: {\n          grant_type: 'ig_exchange_token',\n          client_secret: this.config.clientSecret,\n          access_token: shortToken\n        }\n      });\n\n      if (response.data.error) {\n        throw new Error(`Instagram Long-lived Token Error: ${response.data.error.message}`);\n      }\n\n      return response.data;\n    } catch (error) {\n      console.error('Erro ao obter token de longa duração do Instagram:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Atualiza o token de longa duração\n   */\n  async refreshLongLivedToken(longLivedToken: string): Promise<{\n    access_token: string;\n    token_type: string;\n    expires_in: number;\n  }> {\n    try {\n      const response = await axios.get(`${this.graphUrl}/refresh_access_token`, {\n        params: {\n          grant_type: 'ig_refresh_token',\n          access_token: longLivedToken\n        }\n      });\n\n      if (response.data.error) {\n        throw new Error(`Instagram Refresh Token Error: ${response.data.error.message}`);\n      }\n\n      return response.data;\n    } catch (error) {\n      console.error('Erro ao atualizar token do Instagram:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Obtém informações do usuário autenticado\n   */\n  async getUserInfo(accessToken: string): Promise<{\n    id: string;\n    username: string;\n    account_type: string;\n    media_count: number;\n  }> {\n    try {\n      const response = await axios.get(`${this.graphUrl}/me`, {\n        params: {\n          fields: 'id,username,account_type,media_count',\n          access_token: accessToken\n        }\n      });\n\n      if (response.data.error) {\n        throw new Error(`Instagram User Info Error: ${response.data.error.message}`);\n      }\n\n      return response.data;\n    } catch (error) {\n      console.error('Erro ao obter informações do usuário Instagram:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Obtém as páginas do Facebook associadas (necessário para Instagram Business)\n   */\n  async getFacebookPages(accessToken: string): Promise<Array<{\n    id: string;\n    name: string;\n    access_token: string;\n    instagram_business_account?: {\n      id: string;\n    };\n  }>> {\n    try {\n      const response = await axios.get(`${this.graphUrl}/me/accounts`, {\n        params: {\n          fields: 'id,name,access_token,instagram_business_account{id}',\n          access_token: accessToken\n        }\n      });\n\n      if (response.data.error) {\n        throw new Error(`Facebook Pages Error: ${response.data.error.message}`);\n      }\n\n      return response.data.data;\n    } catch (error) {\n      console.error('Erro ao obter páginas do Facebook:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Obtém informações da conta Instagram Business\n   */\n  async getInstagramBusinessAccount(\n    pageAccessToken: string,\n    instagramAccountId: string\n  ): Promise<{\n    id: string;\n    username: string;\n    name: string;\n    profile_picture_url: string;\n    followers_count: number;\n    media_count: number;\n  }> {\n    try {\n      const response = await axios.get(`${this.graphUrl}/${instagramAccountId}`, {\n        params: {\n          fields: 'id,username,name,profile_picture_url,followers_count,media_count',\n          access_token: pageAccessToken\n        }\n      });\n\n      if (response.data.error) {\n        throw new Error(`Instagram Business Account Error: ${response.data.error.message}`);\n      }\n\n      return response.data;\n    } catch (error) {\n      console.error('Erro ao obter conta Instagram Business:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Verifica se o token ainda é válido\n   */\n  async validateToken(accessToken: string): Promise<boolean> {\n    try {\n      await this.getUserInfo(accessToken);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Obtém informações sobre o token (incluindo tempo de expiração)\n   */\n  async getTokenInfo(accessToken: string): Promise<{\n    app_id: string;\n    type: string;\n    application: string;\n    data_access_expires_at: number;\n    expires_at: number;\n    is_valid: boolean;\n    scopes: string[];\n    user_id: string;\n  }> {\n    try {\n      const response = await axios.get(`${this.graphUrl}/debug_token`, {\n        params: {\n          input_token: accessToken,\n          access_token: `${this.config.clientId}|${this.config.clientSecret}`\n        }\n      });\n\n      if (response.data.error) {\n        throw new Error(`Token Info Error: ${response.data.error.message}`);\n      }\n\n      return response.data.data;\n    } catch (error) {\n      console.error('Erro ao obter informações do token:', error);\n      throw error;\n    }\n  }\n}","size_bytes":6493},"client/src/pages/SocialMediaPage.tsx":{"content":"import React from 'react';\nimport SocialMediaPublisher from '@/components/SocialMediaPublisher';\n\nexport default function SocialMediaPage() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <SocialMediaPublisher />\n    </div>\n  );\n}","size_bytes":250},"mim/src/styles/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}","size_bytes":328},"server/content-generator.ts":{"content":"import { GoogleGenAI } from \"@google/genai\";\n\nconst GEMINI_API_KEY = process.env.GEMINI_API_KEY || \"\";\nconst hasGeminiKey = GEMINI_API_KEY.length > 0;\n\nif (!hasGeminiKey) {\n  console.warn(\"⚠️  GEMINI_API_KEY não configurada - Geração de conteúdo limitada\");\n}\n\nconst ai = hasGeminiKey ? new GoogleGenAI({ apiKey: GEMINI_API_KEY }) : null;\n\nexport interface ContentSuggestions {\n  title: string;\n  description: string;\n  hashtags: string;\n}\n\nexport async function generatePublicationContent(\n  analysis: string,\n  transcription: string\n): Promise<ContentSuggestions> {\n  if (!hasGeminiKey || !ai) {\n    console.warn(\"[content-generator] GEMINI_API_KEY não configurada - Usando sugestões padrão\");\n    return {\n      title: \"Vídeo incrível!\",\n      description: \"Confira este momento impactante! Configure GEMINI_API_KEY para sugestões personalizadas. 🔥\",\n      hashtags: \"#viral #fyp #trending #shorts #reels\"\n    };\n  }\n\n  try {\n    const prompt = `Você é um especialista em marketing de conteúdo para redes sociais (TikTok, YouTube Shorts, Instagram Reels, Facebook).\n\nANÁLISE DO VÍDEO:\n${analysis}\n\nTRANSCRIÇÃO DO ÁUDIO:\n${transcription}\n\nTAREFA:\nCrie sugestões otimizadas para publicação nas redes sociais. As sugestões devem ser:\n- **Chamativas e virais** - que gerem cliques e engajamento\n- **Otimizadas para algoritmos** - com palavras-chave relevantes\n- **Curtas e impactantes** - diretas ao ponto\n\nREQUISITOS:\n1. **TÍTULO**: Máximo 100 caracteres, chamativo, que gere curiosidade\n2. **DESCRIÇÃO**: Entre 150-300 caracteres, com call-to-action e contexto\n3. **HASHTAGS**: Entre 5-10 hashtags relevantes e populares, separadas por espaço\n\nIMPORTANTE:\n- Use linguagem natural e envolvente\n- Inclua emojis estratégicos (mas com moderação)\n- Foque no momento mais impactante do vídeo\n- As hashtags devem ser em português e inglês quando relevante\n\nRESPONDA APENAS COM UM JSON VÁLIDO neste formato:\n{\n  \"title\": \"título chamativo aqui\",\n  \"description\": \"descrição completa aqui com call-to-action\",\n  \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3\"\n}`;\n\n    const response = await ai.models.generateContent({\n      model: \"gemini-2.5-pro\",\n      contents: [{ role: \"user\", parts: [{ text: prompt }] }],\n      config: {\n        responseMimeType: \"application/json\",\n        responseSchema: {\n          type: \"object\",\n          properties: {\n            title: { type: \"string\" },\n            description: { type: \"string\" },\n            hashtags: { type: \"string\" }\n          },\n          required: [\"title\", \"description\", \"hashtags\"]\n        }\n      }\n    });\n\n    const result = JSON.parse(response.text || \"{}\");\n\n    return {\n      title: result.title || \"Vídeo incrível!\",\n      description: result.description || \"Confira este momento impactante!\",\n      hashtags: result.hashtags || \"#viral #fyp #trending\"\n    };\n  } catch (error) {\n    console.error(\"Erro ao gerar sugestões de conteúdo:\", error);\n    \n    // Fallback básico\n    return {\n      title: \"Vídeo incrível!\",\n      description: \"Confira este momento impactante! 🔥\",\n      hashtags: \"#viral #fyp #trending #shorts #reels\"\n    };\n  }\n}\n","size_bytes":3159},"server/social-media/scheduler.ts":{"content":"import { Database } from 'better-sqlite3';\nimport cron from 'node-cron';\nimport { SocialMediaManager } from './social-media-manager';\n\nexport interface ScheduledPost {\n  id: string;\n  videoPath: string;\n  title: string;\n  description: string;\n  hashtags: string[];\n  accounts: string[];\n  privacy: string;\n  scheduledFor: Date;\n  status: 'pending' | 'processing' | 'completed' | 'failed';\n  createdAt: Date;\n  publishedAt?: Date;\n  error?: string;\n  results?: any[];\n}\n\nexport interface ScheduleOptions {\n  videoPath: string;\n  title: string;\n  description: string;\n  hashtags: string[];\n  accounts: string[];\n  privacy: string;\n  scheduledFor: Date;\n  generateContent?: boolean;\n  contentOptions?: {\n    tone: string;\n    targetAudience: string;\n    keywords: string[];\n  };\n}\n\nexport class PostScheduler {\n  private db: Database;\n  private socialMediaManager: SocialMediaManager;\n  private isRunning: boolean = false;\n\n  constructor(db: Database, socialMediaManager: SocialMediaManager) {\n    this.db = db;\n    this.socialMediaManager = socialMediaManager;\n    this.initializeDatabase();\n    this.startScheduler();\n  }\n\n  private initializeDatabase() {\n    // Tabela para posts agendados\n    this.db.exec(`\n      CREATE TABLE IF NOT EXISTS scheduled_posts (\n        id TEXT PRIMARY KEY,\n        video_path TEXT NOT NULL,\n        title TEXT NOT NULL,\n        description TEXT,\n        hashtags TEXT NOT NULL,\n        accounts TEXT NOT NULL,\n        privacy TEXT DEFAULT 'public',\n        scheduled_for DATETIME NOT NULL,\n        status TEXT DEFAULT 'pending',\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        published_at DATETIME,\n        error TEXT,\n        results TEXT\n      )\n    `);\n\n    // Índices para performance\n    this.db.exec(`\n      CREATE INDEX IF NOT EXISTS idx_scheduled_posts_status ON scheduled_posts(status);\n      CREATE INDEX IF NOT EXISTS idx_scheduled_posts_scheduled_for ON scheduled_posts(scheduled_for);\n    `);\n  }\n\n  /**\n   * Agenda uma nova publicação\n   */\n  schedulePost(options: ScheduleOptions): string {\n    const id = `scheduled_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    \n    const stmt = this.db.prepare(`\n      INSERT INTO scheduled_posts (\n        id, video_path, title, description, hashtags, accounts, \n        privacy, scheduled_for, status, created_at\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'pending', CURRENT_TIMESTAMP)\n    `);\n\n    stmt.run(\n      id,\n      options.videoPath,\n      options.title,\n      options.description,\n      JSON.stringify(options.hashtags),\n      JSON.stringify(options.accounts),\n      options.privacy,\n      options.scheduledFor.toISOString()\n    );\n\n    console.log(`Post agendado com ID: ${id} para ${options.scheduledFor}`);\n    return id;\n  }\n\n  /**\n   * Lista posts agendados\n   */\n  getScheduledPosts(status?: string): ScheduledPost[] {\n    let query = 'SELECT * FROM scheduled_posts';\n    const params: any[] = [];\n\n    if (status) {\n      query += ' WHERE status = ?';\n      params.push(status);\n    }\n\n    query += ' ORDER BY scheduled_for ASC';\n\n    const stmt = this.db.prepare(query);\n    const rows = stmt.all(...params) as any[];\n\n    return rows.map(row => ({\n      id: row.id,\n      videoPath: row.video_path,\n      title: row.title,\n      description: row.description,\n      hashtags: JSON.parse(row.hashtags),\n      accounts: JSON.parse(row.accounts),\n      privacy: row.privacy,\n      scheduledFor: new Date(row.scheduled_for),\n      status: row.status,\n      createdAt: new Date(row.created_at),\n      publishedAt: row.published_at ? new Date(row.published_at) : undefined,\n      error: row.error,\n      results: row.results ? JSON.parse(row.results) : undefined\n    }));\n  }\n\n  /**\n   * Obtém um post agendado por ID\n   */\n  getScheduledPost(id: string): ScheduledPost | null {\n    const stmt = this.db.prepare('SELECT * FROM scheduled_posts WHERE id = ?');\n    const row = stmt.get(id) as any;\n\n    if (!row) return null;\n\n    return {\n      id: row.id,\n      videoPath: row.video_path,\n      title: row.title,\n      description: row.description,\n      hashtags: JSON.parse(row.hashtags),\n      accounts: JSON.parse(row.accounts),\n      privacy: row.privacy,\n      scheduledFor: new Date(row.scheduled_for),\n      status: row.status,\n      createdAt: new Date(row.created_at),\n      publishedAt: row.published_at ? new Date(row.published_at) : undefined,\n      error: row.error,\n      results: row.results ? JSON.parse(row.results) : undefined\n    };\n  }\n\n  /**\n   * Cancela um post agendado\n   */\n  cancelScheduledPost(id: string): boolean {\n    const stmt = this.db.prepare(`\n      UPDATE scheduled_posts \n      SET status = 'cancelled' \n      WHERE id = ? AND status = 'pending'\n    `);\n\n    const result = stmt.run(id);\n    return result.changes > 0;\n  }\n\n  /**\n   * Atualiza o status de um post agendado\n   */\n  private updatePostStatus(id: string, status: string, error?: string, results?: any[]) {\n    const stmt = this.db.prepare(`\n      UPDATE scheduled_posts \n      SET status = ?, error = ?, results = ?, published_at = ?\n      WHERE id = ?\n    `);\n\n    stmt.run(\n      status,\n      error || null,\n      results ? JSON.stringify(results) : null,\n      status === 'completed' ? new Date().toISOString() : null,\n      id\n    );\n  }\n\n  /**\n   * Inicia o scheduler\n   */\n  private startScheduler() {\n    if (this.isRunning) return;\n\n    // Executa a cada minuto\n    cron.schedule('* * * * *', () => {\n      this.processPendingPosts();\n    });\n\n    this.isRunning = true;\n    console.log('Scheduler de publicações iniciado');\n  }\n\n  /**\n   * Processa posts pendentes que devem ser publicados\n   */\n  private async processPendingPosts() {\n    const now = new Date();\n    const stmt = this.db.prepare(`\n      SELECT * FROM scheduled_posts \n      WHERE status = 'pending' AND scheduled_for <= ?\n      ORDER BY scheduled_for ASC\n    `);\n\n    const pendingPosts = stmt.all(now.toISOString()) as any[];\n\n    for (const postData of pendingPosts) {\n      await this.processScheduledPost(postData);\n    }\n  }\n\n  /**\n   * Processa um post agendado individual\n   */\n  private async processScheduledPost(postData: any) {\n    const post: ScheduledPost = {\n      id: postData.id,\n      videoPath: postData.video_path,\n      title: postData.title,\n      description: postData.description,\n      hashtags: JSON.parse(postData.hashtags),\n      accounts: JSON.parse(postData.accounts),\n      privacy: postData.privacy,\n      scheduledFor: new Date(postData.scheduled_for),\n      status: postData.status,\n      createdAt: new Date(postData.created_at)\n    };\n\n    console.log(`Processando post agendado: ${post.id}`);\n\n    try {\n      // Atualiza status para processando\n      this.updatePostStatus(post.id, 'processing');\n\n      // Publica o conteúdo\n      const results = await this.socialMediaManager.publishContent({\n        videoPath: post.videoPath,\n        title: post.title,\n        description: post.description,\n        hashtags: post.hashtags,\n        accounts: post.accounts,\n        privacy: post.privacy,\n        generateContent: false // Posts agendados já têm conteúdo definido\n      });\n\n      // Verifica se houve sucesso em pelo menos uma plataforma\n      const hasSuccess = results.some(result => result.success);\n\n      if (hasSuccess) {\n        this.updatePostStatus(post.id, 'completed', undefined, results);\n        console.log(`Post ${post.id} publicado com sucesso`);\n      } else {\n        const errors = results.map(r => r.error).filter(Boolean).join(', ');\n        this.updatePostStatus(post.id, 'failed', errors, results);\n        console.error(`Falha ao publicar post ${post.id}: ${errors}`);\n      }\n\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Erro desconhecido';\n      this.updatePostStatus(post.id, 'failed', errorMessage);\n      console.error(`Erro ao processar post agendado ${post.id}:`, error);\n    }\n  }\n\n  /**\n   * Para o scheduler\n   */\n  stop() {\n    this.isRunning = false;\n    console.log('Scheduler de publicações parado');\n  }\n\n  /**\n   * Obtém estatísticas do scheduler\n   */\n  getStats() {\n    const stats = {\n      total: 0,\n      pending: 0,\n      processing: 0,\n      completed: 0,\n      failed: 0,\n      cancelled: 0\n    };\n\n    const stmt = this.db.prepare(`\n      SELECT status, COUNT(*) as count \n      FROM scheduled_posts \n      GROUP BY status\n    `);\n\n    const rows = stmt.all() as any[];\n\n    rows.forEach(row => {\n      stats[row.status as keyof typeof stats] = row.count;\n      stats.total += row.count;\n    });\n\n    return stats;\n  }\n\n  /**\n   * Remove posts antigos (mais de 30 dias)\n   */\n  cleanupOldPosts() {\n    const thirtyDaysAgo = new Date();\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n    const stmt = this.db.prepare(`\n      DELETE FROM scheduled_posts \n      WHERE created_at < ? AND status IN ('completed', 'failed', 'cancelled')\n    `);\n\n    const result = stmt.run(thirtyDaysAgo.toISOString());\n    console.log(`Removidos ${result.changes} posts antigos`);\n\n    return result.changes;\n  }\n}","size_bytes":9063},"server/db.ts":{"content":"import pg from 'pg';\nimport { drizzle } from 'drizzle-orm/node-postgres';\nimport * as schema from \"@shared/schema\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nconst { Pool } = pg;\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle(pool, { schema });\n\n// Ensure required tables exist to avoid runtime 42P01 errors\n// This is a lightweight safety net; drizzle-kit push remains the source of truth.\nasync function ensureSchema() {\n  const client = await pool.connect();\n  try {\n    await client.query('CREATE EXTENSION IF NOT EXISTS pgcrypto;');\n    await client.query(`\n      CREATE TABLE IF NOT EXISTS \"videos\" (\n        \"id\" varchar PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\n        \"title\" text NOT NULL,\n        \"video_path\" text NOT NULL,\n        \"source\" text NOT NULL,\n        \"uploaded_at\" timestamp NOT NULL DEFAULT now()\n      );\n    `);\n    await client.query(`\n      CREATE TABLE IF NOT EXISTS \"video_cuts\" (\n        \"id\" varchar PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\n        \"video_id\" varchar NOT NULL REFERENCES \"videos\"(\"id\") ON DELETE CASCADE,\n        \"start_time\" integer NOT NULL,\n        \"end_time\" integer NOT NULL,\n        \"description\" text,\n        \"created_at\" timestamp NOT NULL DEFAULT now()\n      );\n    `);\n    await client.query(`\n      CREATE TABLE IF NOT EXISTS \"processed_cuts\" (\n        \"id\" varchar PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\n        \"cut_id\" varchar NOT NULL REFERENCES \"video_cuts\"(\"id\") ON DELETE CASCADE,\n        \"format\" text NOT NULL,\n        \"output_path\" text NOT NULL,\n        \"subtitles\" text,\n        \"created_at\" timestamp NOT NULL DEFAULT now()\n      );\n    `);\n  } finally {\n    client.release();\n  }\n}\n\n// Fire and forget on module load\nvoid ensureSchema();\n","size_bytes":1887},"server/video-processor.ts":{"content":"import { execFile } from \"child_process\";\nimport { promisify } from \"util\";\nimport path from \"path\";\nimport fs from \"fs\";\n\nconst execFileAsync = promisify(execFile);\n\nfunction resolveFFmpeg(): string {\n  const envPath = process.env.FFMPEG_PATH;\n  const candidates: string[] = [];\n  if (envPath) candidates.push(envPath);\n  candidates.push(\n    \"C:/ProgramData/chocolatey/bin/ffmpeg.exe\",\n    \"C:/ffmpeg/bin/ffmpeg.exe\",\n    \"C:/Program Files/ffmpeg/bin/ffmpeg.exe\",\n    \"C:/Program Files (x86)/ffmpeg/bin/ffmpeg.exe\",\n    \"ffmpeg\"\n  );\n  for (const c of candidates) {\n    try { if (fs.existsSync(c)) return c; } catch {}\n  }\n  return \"ffmpeg\";\n}\n\nexport async function cutVideo(\n  inputPath: string,\n  startTime: number,\n  endTime: number,\n  format: \"horizontal\" | \"vertical\",\n  outputDir: string\n): Promise<string> {\n  try {\n    const timestamp = Date.now();\n    const outputFilename = `cut_${timestamp}.mp4`;\n    const outputPath = path.join(outputDir, outputFilename);\n\n    const args: string[] = [\n      \"-i\", inputPath,\n      \"-ss\", startTime.toString(),\n      \"-to\", endTime.toString(),\n    ];\n\n    if (format === \"vertical\") {\n      args.push(\n        // garanta que o áudio seja mantido se existir\n        \"-map\", \"0:v:0\",\n        \"-map\", \"0:a:0?\",\n        \"-vf\", \"crop=ih*9/16:ih,scale=1080:1920\",\n        \"-c:v\", \"libx264\",\n        \"-preset\", \"fast\",\n        \"-crf\", \"23\",\n        \"-c:a\", \"aac\",\n        \"-b:a\", \"128k\",\n        outputPath\n      );\n    } else {\n      args.push(\n        // garanta que o áudio seja mantido se existir\n        \"-map\", \"0:v:0\",\n        \"-map\", \"0:a:0?\",\n        \"-vf\", \"scale=1920:1080:force_original_aspect_ratio=decrease,pad=1920:1080:(ow-iw)/2:(oh-ih)/2\",\n        \"-c:v\", \"libx264\",\n        \"-preset\", \"fast\",\n        \"-crf\", \"23\",\n        \"-c:a\", \"aac\",\n        \"-b:a\", \"128k\",\n        outputPath\n      );\n    }\n\n    await execFileAsync(resolveFFmpeg(), args, {\n      timeout: 300000,\n      maxBuffer: 50 * 1024 * 1024,\n    });\n\n    if (!fs.existsSync(outputPath)) {\n      throw new Error(\"Vídeo cortado não foi criado\");\n    }\n\n    return outputPath;\n  } catch (error: any) {\n    console.error(\"Erro ao cortar vídeo:\", error);\n    if (error.message?.includes('não é reconhecido') || error.message?.includes('not found')) {\n      throw new Error(\"FFmpeg não está instalado. Por favor, instale FFmpeg: https://ffmpeg.org/download.html\");\n    }\n    throw new Error(`Falha ao cortar vídeo: ${error.message}`);\n  }\n}\n\nexport async function addSubtitlesToVideo(\n  videoPath: string,\n  subtitlesContent: string,\n  outputDir: string\n): Promise<string> {\n  try {\n    if (!subtitlesContent || subtitlesContent.trim() === \"\") {\n      return videoPath;\n    }\n\n    const timestamp = Date.now();\n    const srtFilename = `subtitles_${timestamp}.srt`;\n    const srtPath = path.join(outputDir, srtFilename);\n\n    fs.writeFileSync(srtPath, subtitlesContent, \"utf-8\");\n\n    const outputFilename = `with_subtitles_${timestamp}.mp4`;\n    const outputPath = path.join(outputDir, outputFilename);\n\n    // Build filter using only the SRT filename and run ffmpeg with cwd=outputDir to avoid Windows drive colon issues\n    const subtitlesFilter = `subtitles=filename='${srtFilename}':force_style='FontName=Arial,FontSize=24,PrimaryColour=&HFFFFFF,OutlineColour=&H000000,BorderStyle=3,Outline=2,Shadow=0,BackColour=&H00000000'`;\n\n    const args: string[] = [\n      \"-i\", videoPath,\n      // mantenha o primeiro vídeo e o primeiro áudio (se existir)\n      \"-map\", \"0:v:0\",\n      \"-map\", \"0:a:0?\",\n      \"-vf\", subtitlesFilter,\n      \"-c:a\", \"copy\",\n      outputPath\n    ];\n\n    await execFileAsync(resolveFFmpeg(), args, {\n      timeout: 300000,\n      maxBuffer: 50 * 1024 * 1024,\n      cwd: outputDir,\n    });\n\n    if (fs.existsSync(videoPath) && videoPath !== outputPath) {\n      fs.unlinkSync(videoPath);\n    }\n\n    if (fs.existsSync(srtPath)) {\n      fs.unlinkSync(srtPath);\n    }\n\n    if (!fs.existsSync(outputPath)) {\n      throw new Error(\"Vídeo com legendas não foi criado\");\n    }\n\n    return outputPath;\n  } catch (error: any) {\n    console.error(\"Erro ao adicionar legendas:\", error);\n    if (error.message?.includes('não é reconhecido') || error.message?.includes('not found')) {\n      throw new Error(\"FFmpeg não está instalado. Por favor, instale FFmpeg: https://ffmpeg.org/download.html\");\n    }\n    throw new Error(`Falha ao adicionar legendas: ${error.message}`);\n  }\n}\n","size_bytes":4422},"scripts/setup.js":{"content":"// Setup script: provisions Postgres (db/role/privileges), creates tables, seeds user, and updates .env\n// Quick usage:\n//   node scripts/setup.js\n// Options (CLI):\n//   --db-name video_app --db-host localhost --db-port 5432\n//   --app-user app_user --app-pass app_pass\n//   --admin-url postgresql://postgres:postgres@localhost:5432/postgres\n//   --username admin --password admin123  (usuario de aplicação na tabela users)\n// Options (ENV):\n//   ADMIN_DATABASE_URL, SETUP_DB_NAME, SETUP_DB_HOST, SETUP_DB_PORT, SETUP_APP_USER, SETUP_APP_PASSWORD, SETUP_USERNAME, SETUP_PASSWORD\n\nimport { execSync } from 'node:child_process';\nimport { existsSync, readFileSync, writeFileSync } from 'node:fs';\nimport process from 'node:process';\n\n// Load .env if available (best-effort). If dotenv isn't installed, fallback to manual parse\nlet dotenvLoaded = false;\ntry { await import('dotenv/config'); dotenvLoaded = true; } catch {}\nif (!dotenvLoaded) {\n  try {\n    const raw = readFileSync('.env', 'utf8');\n    for (const line of raw.split(/\\r?\\n/)) {\n      if (!line || line.trim().startsWith('#')) continue;\n      const idx = line.indexOf('=');\n      if (idx === -1) continue;\n      const k = line.slice(0, idx);\n      const v = line.slice(idx + 1);\n      if (!(k in process.env)) process.env[k] = v;\n    }\n  } catch {}\n}\n\nfunction log(step, msg) { console.log(`[${step}] ${msg}`); }\n\nfunction parseArgs(argv) {\n  const args = {};\n  for (let i = 2; i < argv.length; i++) {\n    const a = argv[i];\n    if (a === '--username' || a === '-u') args.username = argv[++i]; // seed app user (users table)\n    else if (a === '--password' || a === '-p') args.password = argv[++i]; // seed app password (users table)\n    else if (a === '--app-user') args.appUser = argv[++i]; // DB role name\n    else if (a === '--app-pass') args.appPass = argv[++i]; // DB role password\n    else if (a === '--db-name') args.dbName = argv[++i];\n    else if (a === '--db-host') args.dbHost = argv[++i];\n    else if (a === '--db-port') args.dbPort = parseInt(argv[++i], 10);\n    else if (a === '--admin-url') args.adminUrl = argv[++i];\n    else if (a === '--admin-user') args.adminUser = argv[++i];\n    else if (a === '--admin-pass') args.adminPass = argv[++i];\n    else if (a === '--reset') args.reset = true;\n  }\n  return args;\n}\n\nconst {\n  username: argUser,\n  password: argPass,\n  appUser: argAppUser,\n  appPass: argAppPass,\n  dbName: argDbName,\n  dbHost: argDbHost,\n  dbPort: argDbPort,\n  adminUrl: argAdminUrl,\n  adminUser: argAdminUser,\n  adminPass: argAdminPass,\n  reset: argReset,\n} = parseArgs(process.argv);\n\nconst SEED_USERNAME = argUser || process.env.SETUP_USERNAME || 'admin';\nconst SEED_PASSWORD = argPass || process.env.SETUP_PASSWORD || 'admin123';\n\nconst DB_HOST = argDbHost || process.env.SETUP_DB_HOST || 'localhost';\nconst DB_PORT = argDbPort || parseInt(process.env.SETUP_DB_PORT || '5432', 10);\nconst DB_NAME = argDbName || process.env.SETUP_DB_NAME || 'video_app';\nconst APP_DB_USER = argAppUser || process.env.SETUP_APP_USER || 'video_app_user';\nconst APP_DB_PASSWORD = argAppPass || process.env.SETUP_APP_PASSWORD || 'video_app_pass123';\nlet ADMIN_DATABASE_URL = argAdminUrl || process.env.ADMIN_DATABASE_URL || '';\nif (!ADMIN_DATABASE_URL && argAdminUser) {\n  const ap = argAdminPass || '';\n  ADMIN_DATABASE_URL = makeDbUrl({ user: argAdminUser, pass: ap, host: DB_HOST, port: DB_PORT, db: 'postgres' });\n}\n\nfunction makeDbUrl({ user, pass, host, port, db }) {\n  const u = encodeURIComponent(user);\n  const p = encodeURIComponent(pass);\n  return `postgresql://${u}:${p}@${host}:${port}/${db}`;\n}\n\nfunction replaceDbInUrl(urlStr, dbName) {\n  const u = new URL(urlStr);\n  u.pathname = `/${dbName}`;\n  return u.toString();\n}\n\nconst TARGET_DATABASE_URL = makeDbUrl({\n  user: APP_DB_USER,\n  pass: APP_DB_PASSWORD,\n  host: DB_HOST,\n  port: DB_PORT,\n  db: DB_NAME,\n});\n\n// 1) Install dependencies (ensure base deps; ensure 'pg')\ntry {\n  const ensureBaseDeps = () => {\n    if (!existsSync('node_modules')) {\n      const hasLock = existsSync('package-lock.json');\n      log('deps', `${hasLock ? 'npm ci' : 'npm install'} iniciando...`);\n      execSync(hasLock ? 'npm ci' : 'npm install', { stdio: 'inherit' });\n    } else {\n      log('deps', 'Dependências já instaladas, pulando.');\n    }\n  };\n  ensureBaseDeps();\n\n  // Ensure 'pg' is installed\n  let pgOk = true;\n  try { await import('pg'); } catch { pgOk = false; }\n  if (!pgOk) {\n    log('deps', \"Instalando dependência 'pg'...\");\n    execSync('npm install pg@^8', { stdio: 'inherit' });\n  }\n} catch (err) {\n  console.error('Falha ao instalar dependências:', err.message || err);\n  process.exit(1);\n}\n\n// 2) Provision DB/ROLE and prepare effective DATABASE_URL\nimport pgModule from 'pg';\nconst { Pool, Client } = pgModule;\n\nlet provisioned = false;\nconst originalEnvDatabaseUrl = process.env.DATABASE_URL || '';\n\nlet adminConn = ADMIN_DATABASE_URL;\nif (!adminConn) {\n  const guesses = [\n    makeDbUrl({ user: 'postgres', pass: 'postgres', host: DB_HOST, port: DB_PORT, db: 'postgres' }),\n    makeDbUrl({ user: 'postgres', pass: 'admin', host: DB_HOST, port: DB_PORT, db: 'postgres' }),\n    makeDbUrl({ user: 'postgres', pass: '', host: DB_HOST, port: DB_PORT, db: 'postgres' }),\n    makeDbUrl({ user: 'admin', pass: 'admin', host: DB_HOST, port: DB_PORT, db: 'postgres' }),\n    makeDbUrl({ user: 'admin', pass: '', host: DB_HOST, port: DB_PORT, db: 'postgres' }),\n  ];\n  for (const g of guesses) {\n    try { const c = new Client({ connectionString: g }); await c.connect(); await c.end(); adminConn = g; break; } catch {}\n  }\n}\n\nlet effectiveDatabaseUrl = originalEnvDatabaseUrl;\n// Treat placeholder DATABASE_URL values as empty\nconst maybeUrl = (effectiveDatabaseUrl || '').toLowerCase();\nif (maybeUrl.includes('seu_usuario') || maybeUrl.includes('sua_senha')) {\n  effectiveDatabaseUrl = '';\n}\n\nif (!adminConn) {\n  log('provision', 'Admin indisponível; continuando com DATABASE_URL existente (se configurado).');\n  if (!effectiveDatabaseUrl) {\n    console.error('Erro: sem ADMIN_DATABASE_URL e sem DATABASE_URL válido no .env. Configure um dos dois e rode novamente.');\n    console.error('Exemplo: node scripts/setup.js --admin-user admin --admin-pass SUA_SENHA');\n    process.exit(1);\n  }\n\n  // Se a DATABASE_URL aponta para o usuário do app padrão e não há admin,\n  // valide a conexão antes de seguir. Se falhar, oriente o usuário.\n  try {\n    const test = new Client({ connectionString: effectiveDatabaseUrl });\n    await test.connect();\n    await test.end();\n  } catch (e) {\n    const who = (() => { try { return new URL(effectiveDatabaseUrl).username; } catch { return 'desconhecido'; } })();\n    console.error(`Erro: não foi possível autenticar com DATABASE_URL (usuário '${who}').`);\n    console.error('Sem acesso admin, não é possível criar o usuário/DB automaticamente.');\n    console.error('Rode com credenciais de admin para provisionar:');\n    console.error('  node scripts/setup.js --admin-user admin --admin-pass SUA_SENHA');\n    console.error('Ou ajuste manualmente a DATABASE_URL no .env para um usuário existente e com permissão.');\n    process.exit(1);\n  }\n} else {\n  log('provision', `Conectando como admin para ${argReset ? 'resetar' : 'criar'} DB/ROLE...`);\n  const admin = new Pool({ connectionString: adminConn });\n  try {\n    if (argReset) {\n      // terminate connections and drop database if exists\n      const adminDbName = new URL(adminConn).pathname.slice(1) || 'postgres';\n      if (adminDbName === DB_NAME) {\n        // switch to postgres DB for drop target\n        admin.end();\n      }\n      const ctl = new Pool({ connectionString: replaceDbInUrl(adminConn, 'postgres') });\n      try {\n        await ctl.query(`SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE datname = $1 AND pid <> pg_backend_pid();`, [DB_NAME]);\n        await ctl.query(`DROP DATABASE IF EXISTS \"${DB_NAME}\"`);\n        log('provision', `Banco '${DB_NAME}' dropado.`);\n      } finally { await ctl.end(); }\n    }\n\n    // Create database if not exists\n    const dbExists = await admin.query('SELECT 1 FROM pg_database WHERE datname = $1', [DB_NAME]);\n    if (dbExists.rowCount === 0) {\n      await admin.query(`CREATE DATABASE \"${DB_NAME}\"`);\n      log('provision', `Banco '${DB_NAME}' criado.`);\n    } else {\n      log('provision', `Banco '${DB_NAME}' já existe.`);\n    }\n\n    // Create / update role\n    const roleExists = await admin.query('SELECT 1 FROM pg_roles WHERE rolname = $1', [APP_DB_USER]);\n    if (roleExists.rowCount === 0) {\n      const pw = APP_DB_PASSWORD.replace(/'/g, \"''\");\n      await admin.query(`CREATE ROLE \"${APP_DB_USER}\" LOGIN PASSWORD '${pw}'`);\n      log('provision', `Role '${APP_DB_USER}' criada.`);\n    } else {\n      const pw = APP_DB_PASSWORD.replace(/'/g, \"''\");\n      await admin.query(`ALTER ROLE \"${APP_DB_USER}\" WITH LOGIN PASSWORD '${pw}'`);\n      log('provision', `Role '${APP_DB_USER}' já existe; senha atualizada.`);\n    }\n\n    // Connect to target DB for grants and extension\n    const adminDb = new Pool({ connectionString: replaceDbInUrl(adminConn, DB_NAME) });\n    try {\n      await adminDb.query('CREATE EXTENSION IF NOT EXISTS pgcrypto;');\n      await adminDb.query(`GRANT CONNECT ON DATABASE \"${DB_NAME}\" TO \"${APP_DB_USER}\";`).catch(()=>{});\n      await adminDb.query(`GRANT USAGE ON SCHEMA public TO \"${APP_DB_USER}\";`);\n      await adminDb.query(`GRANT CREATE ON SCHEMA public TO \"${APP_DB_USER}\";`);\n      await adminDb.query(`GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO \"${APP_DB_USER}\";`);\n      await adminDb.query(`GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO \"${APP_DB_USER}\";`);\n      await adminDb.query(`ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON TABLES TO \"${APP_DB_USER}\";`);\n      await adminDb.query(`ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON SEQUENCES TO \"${APP_DB_USER}\";`);\n      log('provision', 'Permissões concedidas e pgcrypto habilitado.');\n    } finally { await adminDb.end(); }\n\n    provisioned = true;\n    effectiveDatabaseUrl = TARGET_DATABASE_URL;\n  } finally { await admin.end(); }\n}\n\n// When --reset without admin, do a best-effort: drop existing tables via current user\nif (argReset && !provisioned) {\n  try {\n    log('reset', 'Sem admin: tentando limpar tabelas existentes (best-effort)...');\n    const pool = new Pool({ connectionString: effectiveDatabaseUrl });\n    try {\n      await pool.query('DROP TABLE IF EXISTS videos CASCADE;');\n      await pool.query('DROP TABLE IF EXISTS users CASCADE;');\n    } finally { await pool.end(); }\n  } catch {}\n}\n\n// Update .env only if provisioning succeeded (to avoid breaking a valid local DATABASE_URL)\nif (provisioned) {\n  try {\n    let envContent = '';\n    try { envContent = readFileSync('.env', 'utf8'); } catch {}\n    const lines = envContent.split(/\\r?\\n/).filter(l => l.length > 0);\n    const kv = Object.fromEntries(lines.map(l => {\n      const idx = l.indexOf('=');\n      if (idx === -1) return [l, ''];\n      return [l.slice(0, idx), l.slice(idx+1)];\n    }));\n    kv['DATABASE_URL'] = effectiveDatabaseUrl;\n    const out = Object.entries(kv).map(([k,v]) => `${k}=${v}`).join('\\n');\n    writeFileSync('.env', out + '\\n', 'utf8');\n    process.env.DATABASE_URL = effectiveDatabaseUrl;\n    log('env', 'DATABASE_URL atualizado em .env');\n  } catch (e) {\n    console.warn('Aviso: não foi possível atualizar .env automaticamente:', e.message || e);\n    process.env.DATABASE_URL = effectiveDatabaseUrl;\n  }\n}\n\n// 3) Push schema with app user\ntry {\n  log('db:push', 'Aplicando schema com drizzle-kit push...');\n  execSync('npx drizzle-kit push', { stdio: 'inherit', env: { ...process.env, DATABASE_URL: effectiveDatabaseUrl } });\n} catch (err) {\n  console.error('Falha ao executar drizzle-kit push:', err.message || err);\n  process.exit(1);\n}\n\n// 4) Seed default application user\ntry {\n  log('seed', 'Inserindo usuário padrão na tabela users...');\n  const pool = new Pool({ connectionString: effectiveDatabaseUrl });\n  try {\n    const insertSQL = `\n      INSERT INTO users (username, password)\n      VALUES ($1, $2)\n      ON CONFLICT (username) DO NOTHING\n      RETURNING id;\n    `;\n    const res = await pool.query(insertSQL, [SEED_USERNAME, SEED_PASSWORD]);\n    if (res.rowCount && res.rows[0]?.id) {\n      log('seed', `Usuário '${SEED_USERNAME}' criado (id=${res.rows[0].id}).`);\n    } else {\n      log('seed', `Usuário '${SEED_USERNAME}' já existe; nenhuma alteração.`);\n    }\n  } finally { await pool.end(); }\n} catch (err) {\n  console.error('Falha ao semear usuário:', err.message || err);\n  process.exit(1);\n}\n\nlog('ok', 'Setup concluído com sucesso. Agora rode: npm run dev');\n","size_bytes":12644},"server/social-media/social-media-manager.ts":{"content":"import Database from 'better-sqlite3';\nimport path from 'path';\nimport fs from 'fs';\n\n// Importa autenticadores\nimport { TikTokAuth } from './auth/tiktok-auth';\nimport { InstagramAuth } from './auth/instagram-auth';\nimport { YouTubeAuth } from './auth/youtube-auth';\n\n// Importa publicadores\nimport { TikTokPublisher } from './publishers/tiktok-publisher';\nimport { InstagramPublisher } from './publishers/instagram-publisher';\nimport { YouTubePublisher } from './publishers/youtube-publisher';\n\n// Importa gerador de conteúdo\nimport { ContentGenerator } from './ai/content-generator';\n\n// Importa scheduler e monitoring\nimport { PostScheduler, ScheduleOptions } from './scheduler';\nimport { PublicationMonitor } from './monitoring';\n\nimport type { \n  SocialAccount, \n  PostContent, \n  PublishResult,\n  ContentGenerationOptions,\n  GeneratedContent\n} from './config';\n\nexport interface PublishRequest {\n  content: PostContent;\n  accounts: string[]; // IDs das contas conectadas\n  generateContent?: boolean;\n  contentOptions?: {\n    tone: 'casual' | 'professional' | 'funny' | 'inspiring' | 'educational';\n    targetAudience: string;\n    keywords?: string[];\n  };\n}\n\nexport interface PublishResponse {\n  success: boolean;\n  results: PublishResult[];\n  generatedContent?: any;\n  errors?: string[];\n}\n\nexport class SocialMediaManager {\n  private db: Database.Database;\n  private tiktokAuth: TikTokAuth;\n  private instagramAuth: InstagramAuth;\n  private youtubeAuth: YouTubeAuth;\n  private tiktokPublisher: TikTokPublisher;\n  private instagramPublisher: InstagramPublisher;\n  private youtubePublisher: YouTubePublisher;\n  private contentGenerator?: ContentGenerator;\n  private scheduler: PostScheduler;\n  private monitor: PublicationMonitor;\n\n  constructor(dbPath: string, geminiApiKey?: string) {\n    this.db = new Database(dbPath);\n    this.initializeDatabase();\n    \n    // Inicializa autenticadores\n    this.tiktokAuth = new TikTokAuth();\n    this.instagramAuth = new InstagramAuth();\n    this.youtubeAuth = new YouTubeAuth();\n    \n    // Inicializa publishers\n    this.tiktokPublisher = new TikTokPublisher();\n    this.instagramPublisher = new InstagramPublisher();\n    this.youtubePublisher = new YouTubePublisher(this.youtubeAuth.getOAuth2Client());\n    \n    // Inicializa gerador de conteúdo se API key fornecida\n    if (geminiApiKey) {\n      this.contentGenerator = new ContentGenerator(geminiApiKey);\n    }\n\n    // Inicializa scheduler e monitor\n    this.scheduler = new PostScheduler(this.db, this);\n    this.monitor = new PublicationMonitor(this.db);\n  }\n\n  /**\n   * Inicializa as tabelas do banco de dados\n   */\n  private initializeDatabase(): void {\n    // Tabela de contas conectadas\n    this.db.exec(`\n      CREATE TABLE IF NOT EXISTS social_accounts (\n        id TEXT PRIMARY KEY,\n        platform TEXT NOT NULL,\n        account_id TEXT NOT NULL,\n        account_name TEXT NOT NULL,\n        access_token TEXT NOT NULL,\n        refresh_token TEXT,\n        expires_at INTEGER,\n        is_active INTEGER DEFAULT 1,\n        created_at INTEGER DEFAULT (strftime('%s', 'now')),\n        updated_at INTEGER DEFAULT (strftime('%s', 'now'))\n      )\n    `);\n\n    // Tabela de publicações\n    this.db.exec(`\n      CREATE TABLE IF NOT EXISTS publications (\n        id TEXT PRIMARY KEY,\n        title TEXT NOT NULL,\n        description TEXT,\n        video_path TEXT NOT NULL,\n        thumbnail_path TEXT,\n        platforms TEXT NOT NULL, -- JSON array\n        hashtags TEXT, -- JSON array\n        privacy TEXT DEFAULT 'public',\n        scheduled_at INTEGER,\n        status TEXT DEFAULT 'draft', -- draft, scheduled, publishing, published, failed\n        created_at INTEGER DEFAULT (strftime('%s', 'now')),\n        updated_at INTEGER DEFAULT (strftime('%s', 'now'))\n      )\n    `);\n\n    // Tabela de resultados de publicação\n    this.db.exec(`\n      CREATE TABLE IF NOT EXISTS publication_results (\n        id TEXT PRIMARY KEY,\n        publication_id TEXT NOT NULL,\n        platform TEXT NOT NULL,\n        account_id TEXT NOT NULL,\n        post_id TEXT,\n        post_url TEXT,\n        status TEXT NOT NULL, -- success, failed, pending\n        error_message TEXT,\n        published_at INTEGER,\n        created_at INTEGER DEFAULT (strftime('%s', 'now')),\n        FOREIGN KEY (publication_id) REFERENCES publications (id)\n      )\n    `);\n\n    // Tabela de conteúdo gerado por IA\n    this.db.exec(`\n      CREATE TABLE IF NOT EXISTS generated_content (\n        id TEXT PRIMARY KEY,\n        publication_id TEXT NOT NULL,\n        platform TEXT NOT NULL,\n        generated_title TEXT,\n        generated_description TEXT,\n        generated_hashtags TEXT, -- JSON array\n        ai_suggestions TEXT, -- JSON object\n        created_at INTEGER DEFAULT (strftime('%s', 'now')),\n        FOREIGN KEY (publication_id) REFERENCES publications (id)\n      )\n    `);\n  }\n\n  /**\n   * Conecta uma conta de rede social\n   */\n  async connectAccount(platform: string, authCode: string, state?: string): Promise<SocialMediaAccount> {\n    try {\n      let accountData: any;\n      let tokens: any;\n\n      switch (platform.toLowerCase()) {\n        case 'tiktok':\n          tokens = await this.tiktokAuth.exchangeCodeForTokens(authCode, state);\n          const tiktokUser = await this.tiktokAuth.getUserInfo(tokens.access_token);\n          accountData = {\n            platform: 'tiktok',\n            accountId: tiktokUser.open_id,\n            accountName: tiktokUser.display_name || tiktokUser.username,\n            accessToken: tokens.access_token,\n            refreshToken: tokens.refresh_token,\n            expiresAt: new Date(Date.now() + tokens.expires_in * 1000)\n          };\n          break;\n\n        case 'instagram':\n          const shortToken = await this.instagramAuth.exchangeCodeForShortToken(authCode);\n          const longToken = await this.instagramAuth.exchangeForLongLivedToken(shortToken.access_token);\n          const instagramUser = await this.instagramAuth.getUserInfo(longToken.access_token);\n          accountData = {\n            platform: 'instagram',\n            accountId: instagramUser.id,\n            accountName: instagramUser.username,\n            accessToken: longToken.access_token,\n            expiresAt: new Date(Date.now() + longToken.expires_in * 1000)\n          };\n          break;\n\n        case 'youtube':\n          tokens = await this.youtubeAuth.exchangeCodeForTokens(authCode);\n          this.youtubeAuth.setCredentials(tokens);\n          const youtubeChannel = await this.youtubeAuth.getChannelInfo(tokens.access_token);\n          accountData = {\n            platform: 'youtube',\n            accountId: youtubeChannel.id,\n            accountName: youtubeChannel.title,\n            accessToken: tokens.access_token,\n            refreshToken: tokens.refresh_token,\n            expiresAt: new Date(tokens.expiry_date)\n          };\n          break;\n\n        default:\n          throw new Error(`Plataforma não suportada: ${platform}`);\n      }\n\n      // Salva no banco de dados\n      const account: SocialMediaAccount = {\n        id: `${platform}_${accountData.accountId}_${Date.now()}`,\n        platform: accountData.platform,\n        accountId: accountData.accountId,\n        accountName: accountData.accountName,\n        accessToken: accountData.accessToken,\n        refreshToken: accountData.refreshToken,\n        expiresAt: accountData.expiresAt,\n        isActive: true,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n\n      this.saveAccount(account);\n      return account;\n    } catch (error) {\n      console.error(`Erro ao conectar conta ${platform}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Publica conteúdo em múltiplas redes sociais\n   */\n  async publishContent(request: PublishRequest): Promise<PublishResponse> {\n    const results: PublishResult[] = [];\n    const errors: string[] = [];\n    let generatedContent: any = null;\n\n    try {\n      // Gera conteúdo com IA se solicitado\n      if (request.generateContent && this.contentGenerator && request.contentOptions) {\n        const platforms = await this.getAccountPlatforms(request.accounts);\n        generatedContent = await this.contentGenerator.generateContent({\n          videoPath: request.content.videoPath,\n          videoTitle: request.content.title,\n          videoDescription: request.content.description,\n          targetPlatforms: platforms,\n          contentType: 'video',\n          tone: request.contentOptions.tone,\n          targetAudience: request.contentOptions.targetAudience,\n          keywords: request.contentOptions.keywords\n        });\n\n        // Atualiza o conteúdo com as sugestões da IA\n        if (generatedContent.suggestions.bestTitle) {\n          request.content.title = generatedContent.suggestions.bestTitle;\n        }\n        if (generatedContent.suggestions.bestDescription) {\n          request.content.description = generatedContent.suggestions.bestDescription;\n        }\n        if (generatedContent.suggestions.recommendedHashtags) {\n          request.content.hashtags = generatedContent.suggestions.recommendedHashtags;\n        }\n      }\n\n      // Publica em cada conta\n      for (const accountId of request.accounts) {\n        try {\n          const account = this.getAccount(accountId);\n          if (!account || !account.isActive) {\n            errors.push(`Conta ${accountId} não encontrada ou inativa`);\n            continue;\n          }\n\n          // Verifica se o token precisa ser renovado\n          await this.refreshTokenIfNeeded(account);\n\n          let result: PublishResult;\n\n          switch (account.platform) {\n            case 'tiktok':\n              result = await this.tiktokPublisher.publishVideo(account.accessToken, request.content);\n              break;\n\n            case 'instagram':\n              // Para Instagram, precisamos do page access token\n              const pages = await this.instagramAuth.getFacebookPages(account.accessToken);\n              const page = pages.find(p => p.instagram_business_account?.id === account.accountId);\n              if (!page) {\n                throw new Error('Página do Facebook não encontrada para esta conta Instagram');\n              }\n              result = await this.instagramPublisher.publishReel(\n                page.access_token,\n                account.accountId,\n                request.content\n              );\n              break;\n\n            case 'youtube':\n              this.youtubePublisher = new YouTubePublisher(this.youtubeAuth.getOAuth2Client());\n              const isShort = this.isVideoShort(request.content.videoPath);\n              result = await this.youtubePublisher.publishVideo(\n                account.accessToken,\n                request.content,\n                isShort\n              );\n              break;\n\n            default:\n              throw new Error(`Plataforma não suportada: ${account.platform}`);\n          }\n\n          results.push(result);\n\n          // Salva o resultado no banco\n          this.savePublicationResult(accountId, result);\n\n        } catch (error) {\n          const errorMsg = `Erro ao publicar na conta ${accountId}: ${error instanceof Error ? error.message : 'Erro desconhecido'}`;\n          errors.push(errorMsg);\n          \n          results.push({\n            platform: this.getAccount(accountId)?.platform || 'unknown',\n            success: false,\n            error: errorMsg\n          });\n        }\n      }\n\n      const success = results.some(r => r.success);\n\n      return {\n        success,\n        results,\n        generatedContent,\n        errors: errors.length > 0 ? errors : undefined\n      };\n\n    } catch (error) {\n      console.error('Erro geral na publicação:', error);\n      return {\n        success: false,\n        results,\n        errors: [error instanceof Error ? error.message : 'Erro desconhecido']\n      };\n    }\n  }\n\n  /**\n   * Obtém URL de autorização para uma plataforma\n   */\n  getAuthUrl(platform: string, state?: string): string {\n    switch (platform.toLowerCase()) {\n      case 'tiktok':\n        return this.tiktokAuth.getAuthUrl(state);\n      case 'instagram':\n        return this.instagramAuth.getAuthUrl(state);\n      case 'youtube':\n        return this.youtubeAuth.getAuthUrl(state);\n      default:\n        throw new Error(`Plataforma não suportada: ${platform}`);\n    }\n  }\n\n  /**\n   * Lista contas conectadas\n   */\n  getConnectedAccounts(): SocialMediaAccount[] {\n    const stmt = this.db.prepare('SELECT * FROM social_accounts WHERE is_active = 1 ORDER BY created_at DESC');\n    const rows = stmt.all() as any[];\n    \n    return rows.map(row => ({\n      id: row.id,\n      platform: row.platform,\n      accountId: row.account_id,\n      accountName: row.account_name,\n      accessToken: row.access_token,\n      refreshToken: row.refresh_token,\n      expiresAt: row.expires_at ? new Date(row.expires_at * 1000) : undefined,\n      isActive: Boolean(row.is_active),\n      createdAt: new Date(row.created_at * 1000),\n      updatedAt: new Date(row.updated_at * 1000)\n    }));\n  }\n\n  /**\n   * Desconecta uma conta\n   */\n  async disconnectAccount(accountId: string): Promise<boolean> {\n    try {\n      const account = this.getAccount(accountId);\n      if (!account) return false;\n\n      // Revoga o token na plataforma\n      switch (account.platform) {\n        case 'tiktok':\n          await this.tiktokAuth.revokeToken(account.accessToken);\n          break;\n        case 'youtube':\n          await this.youtubeAuth.revokeToken(account.accessToken);\n          break;\n        // Instagram não tem revogação direta via API\n      }\n\n      // Marca como inativa no banco\n      const stmt = this.db.prepare('UPDATE social_accounts SET is_active = 0, updated_at = ? WHERE id = ?');\n      stmt.run(Math.floor(Date.now() / 1000), accountId);\n\n      return true;\n    } catch (error) {\n      console.error('Erro ao desconectar conta:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Gera conteúdo com IA\n   */\n  async generateContentWithAI(\n    videoPath: string,\n    platforms: string[],\n    options: {\n      tone: string;\n      targetAudience: string;\n      keywords?: string[];\n    }\n  ): Promise<any> {\n    if (!this.contentGenerator) {\n      throw new Error('Gerador de conteúdo não configurado. Forneça uma API key do Gemini.');\n    }\n\n    return this.contentGenerator.analyzeVideoAndGenerateContent(\n      videoPath,\n      platforms,\n      {\n        tone: options.tone as any,\n        targetAudience: options.targetAudience,\n        keywords: options.keywords,\n      }\n    );\n  }\n\n  // Métodos privados auxiliares\n\n  private saveAccount(account: SocialMediaAccount): void {\n    const stmt = this.db.prepare(`\n      INSERT OR REPLACE INTO social_accounts \n      (id, platform, account_id, account_name, access_token, refresh_token, expires_at, is_active, created_at, updated_at)\n      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n    `);\n\n    stmt.run(\n      account.id,\n      account.platform,\n      account.accountId,\n      account.accountName,\n      account.accessToken,\n      account.refreshToken || null,\n      account.expiresAt ? Math.floor(account.expiresAt.getTime() / 1000) : null,\n      account.isActive ? 1 : 0,\n      Math.floor(account.createdAt.getTime() / 1000),\n      Math.floor(account.updatedAt.getTime() / 1000)\n    );\n  }\n\n  private getAccount(accountId: string): SocialMediaAccount | null {\n    const stmt = this.db.prepare('SELECT * FROM social_accounts WHERE id = ? AND is_active = 1');\n    const row = stmt.get(accountId) as any;\n    \n    if (!row) return null;\n\n    return {\n      id: row.id,\n      platform: row.platform,\n      accountId: row.account_id,\n      accountName: row.account_name,\n      accessToken: row.access_token,\n      refreshToken: row.refresh_token,\n      expiresAt: row.expires_at ? new Date(row.expires_at * 1000) : undefined,\n      isActive: Boolean(row.is_active),\n      createdAt: new Date(row.created_at * 1000),\n      updatedAt: new Date(row.updated_at * 1000)\n    };\n  }\n\n  private async getAccountPlatforms(accountIds: string[]): Promise<string[]> {\n    const platforms = new Set<string>();\n    for (const id of accountIds) {\n      const account = this.getAccount(id);\n      if (account) {\n        platforms.add(account.platform);\n      }\n    }\n    return Array.from(platforms);\n  }\n\n  private async refreshTokenIfNeeded(account: SocialMediaAccount): Promise<void> {\n    if (!account.expiresAt || !account.refreshToken) return;\n\n    const fiveMinutesFromNow = new Date(Date.now() + 5 * 60 * 1000);\n    \n    if (account.expiresAt <= fiveMinutesFromNow) {\n      try {\n        let newTokens: any;\n\n        switch (account.platform) {\n          case 'tiktok':\n            newTokens = await this.tiktokAuth.refreshAccessToken(account.refreshToken);\n            break;\n          case 'instagram':\n            newTokens = await this.instagramAuth.refreshLongLivedToken(account.accessToken);\n            break;\n          case 'youtube':\n            newTokens = await this.youtubeAuth.refreshAccessToken(account.refreshToken);\n            break;\n        }\n\n        if (newTokens) {\n          account.accessToken = newTokens.access_token;\n          if (newTokens.refresh_token) {\n            account.refreshToken = newTokens.refresh_token;\n          }\n          if (newTokens.expires_in) {\n            account.expiresAt = new Date(Date.now() + newTokens.expires_in * 1000);\n          } else if (newTokens.expiry_date) {\n            account.expiresAt = new Date(newTokens.expiry_date);\n          }\n          account.updatedAt = new Date();\n\n          this.saveAccount(account);\n        }\n      } catch (error) {\n        console.error('Erro ao renovar token:', error);\n      }\n    }\n  }\n\n  private savePublicationResult(accountId: string, result: PublishResult): void {\n    const stmt = this.db.prepare(`\n      INSERT INTO publication_results \n      (id, publication_id, platform, account_id, post_id, post_url, status, error_message, published_at)\n      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\n    `);\n\n    stmt.run(\n      `result_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      'temp_publication_id', // Seria o ID real da publicação\n      result.platform,\n      accountId,\n      result.postId || null,\n      result.postUrl || null,\n      result.success ? 'success' : 'failed',\n      result.error || null,\n      result.success ? Math.floor(Date.now() / 1000) : null\n    );\n  }\n\n  // Métodos do Scheduler\n  async schedulePost(content: PostContent, accounts: string[], scheduleOptions: ScheduleOptions): Promise<string> {\n    return await this.scheduler.schedulePost(content, accounts, scheduleOptions);\n  }\n\n  async getScheduledPosts(filters?: any): Promise<any[]> {\n    return await this.scheduler.getScheduledPosts(filters);\n  }\n\n  async cancelScheduledPost(postId: string): Promise<boolean> {\n    return await this.scheduler.cancelPost(postId);\n  }\n\n  async getSchedulerStats(): Promise<any> {\n    return await this.scheduler.getStats();\n  }\n\n  startScheduler(): void {\n    this.scheduler.start();\n  }\n\n  stopScheduler(): void {\n    this.scheduler.stop();\n  }\n\n  // Métodos do Monitor\n  async getPublicationLogs(filters?: any): Promise<any[]> {\n    return await this.monitor.getLogs(filters);\n  }\n\n  async getSystemMetrics(): Promise<any> {\n    return await this.monitor.getSystemMetrics();\n  }\n\n  async getAccountStats(accountId: string): Promise<any> {\n    return await this.monitor.getAccountStats(accountId);\n  }\n\n  async exportLogs(format: 'csv' | 'json' = 'csv'): Promise<string> {\n    if (format === 'csv') {\n      return await this.monitor.exportLogsToCSV();\n    }\n    // Para JSON, retorna os logs como string\n    const logs = await this.monitor.getLogs();\n    return JSON.stringify(logs, null, 2);\n  }\n\n  // Método para preview de conteúdo\n  async previewContent(content: PostContent, platform: string): Promise<any> {\n    const preview = {\n      platform,\n      content: {\n        title: content.title,\n        description: content.description,\n        hashtags: content.hashtags,\n        videoPath: content.videoPath,\n        thumbnailPath: content.thumbnailPath\n      },\n      estimatedReach: this.calculateEstimatedReach(platform, content.hashtags?.length || 0),\n      suggestedImprovements: this.getSuggestedImprovements(content, platform)\n    };\n\n    return preview;\n  }\n\n  private calculateEstimatedReach(platform: string, hashtagCount: number): number {\n    // Lógica simples para estimar alcance baseado na plataforma e hashtags\n    const baseReach = {\n      'tiktok': 1000,\n      'instagram': 500,\n      'youtube': 200\n    };\n\n    const base = baseReach[platform as keyof typeof baseReach] || 100;\n    return base + (hashtagCount * 50);\n  }\n\n  private getSuggestedImprovements(content: PostContent, platform: string): string[] {\n    const suggestions: string[] = [];\n\n    if (!content.title || content.title.length < 10) {\n      suggestions.push('Considere um título mais descritivo e atrativo');\n    }\n\n    if (!content.hashtags || content.hashtags.length < 3) {\n      suggestions.push('Adicione mais hashtags relevantes para aumentar o alcance');\n    }\n\n    if (platform === 'youtube' && (!content.description || content.description.length < 100)) {\n      suggestions.push('Descrições mais detalhadas performam melhor no YouTube');\n    }\n\n    if (platform === 'tiktok' && content.hashtags && !content.hashtags.some(tag => tag.toLowerCase().includes('fyp'))) {\n      suggestions.push('Considere adicionar hashtags populares do TikTok como #fyp');\n    }\n\n    return suggestions;\n  }\n\n  private isVideoShort(videoPath: string): boolean {\n    // Implementação simplificada - em produção, você analisaria a duração real do vídeo\n    // Por enquanto, assume que vídeos com \"short\" no nome são Shorts\n    return videoPath.toLowerCase().includes('short') || videoPath.toLowerCase().includes('reel');\n  }\n}\n","size_bytes":21817},"mim/src/App.tsx":{"content":"import React from 'react'\n\nfunction App() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">Meu Website</h1>\n        </div>\n      </header>\n      <main>\n        <div className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\n          <div className=\"px-4 py-6 sm:px-0\">\n            <div className=\"border-4 border-dashed border-gray-200 rounded-lg h-96 flex items-center justify-center\">\n              <div className=\"text-center\">\n                <h2 className=\"text-2xl font-semibold text-gray-900 mb-4\">\n                  Website criado com sucesso!\n                </h2>\n                <p className=\"text-gray-600\">\n                  Seu projeto está pronto para ser personalizado.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n\nexport default App","size_bytes":1006},"mim/src/main.tsx":{"content":"import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\nimport './styles/index.css'\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)","size_bytes":238},"client/src/components/PublicationModal.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Loader2, Sparkles } from \"lucide-react\";\nimport { SiTiktok, SiYoutube, SiInstagram, SiFacebook } from \"react-icons/si\";\nimport type { PublicationMetadata, SocialAccount } from \"@shared/schema\";\n\ninterface PublicationModalProps {\n  videoId: string;\n  videoTitle: string;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function PublicationModal({ videoId, videoTitle, open, onOpenChange }: PublicationModalProps) {\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [hashtags, setHashtags] = useState(\"\");\n  const [selectedPlatforms, setSelectedPlatforms] = useState<string[]>([]);\n  const [useAISuggestions, setUseAISuggestions] = useState(false);\n  const { toast } = useToast();\n\n  // Get existing metadata\n  const { data: metadata, isLoading: isLoadingMetadata } = useQuery<PublicationMetadata | null>({\n    queryKey: [\"/api/videos\", videoId, \"metadata\"],\n    enabled: open,\n  });\n\n  // Get social accounts\n  const { data: accounts = [] } = useQuery<SocialAccount[]>({\n    queryKey: [\"/api/social-accounts\"],\n    enabled: open,\n  });\n\n  // Generate suggestions mutation\n  const generateMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", `/api/videos/${videoId}/generate-suggestions`, {});\n      return await response.json();\n    },\n    onSuccess: (data: PublicationMetadata) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\", videoId, \"metadata\"] });\n      setTitle(data.customTitle || data.aiSuggestedTitle || \"\");\n      setDescription(data.customDescription || data.aiSuggestedDescription || \"\");\n      setHashtags(data.customHashtags || data.aiSuggestedHashtags || \"\");\n      setUseAISuggestions(true);\n      toast({\n        title: \"Sugestões geradas!\",\n        description: \"A IA criou título, descrição e hashtags para você\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Publish mutation\n  const publishMutation = useMutation({\n    mutationFn: async () => {\n      // Publish with custom metadata\n      const response = await apiRequest(\"POST\", `/api/videos/${videoId}/publish`, {\n        platforms: selectedPlatforms,\n        title,\n        description,\n        hashtags,\n      });\n      return await response.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\", videoId, \"publications\"] });\n      toast({\n        title: \"Publicação iniciada!\",\n        description: data.message,\n      });\n      onOpenChange(false);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao publicar\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Load existing metadata when dialog opens\n  useEffect(() => {\n    if (open && metadata) {\n      setTitle(metadata.customTitle || metadata.aiSuggestedTitle || videoTitle || \"\");\n      setDescription(metadata.customDescription || metadata.aiSuggestedDescription || \"\");\n      setHashtags(metadata.customHashtags || metadata.aiSuggestedHashtags || \"\");\n      setUseAISuggestions(!!(metadata.aiSuggestedTitle));\n    } else if (open && !metadata) {\n      setTitle(videoTitle || \"\");\n      setDescription(\"\");\n      setHashtags(\"\");\n      setUseAISuggestions(false);\n    }\n  }, [open, metadata, videoTitle]);\n\n  const handlePublish = () => {\n    if (!title.trim()) {\n      toast({\n        title: \"Erro\",\n        description: \"Digite um título para a publicação\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (selectedPlatforms.length === 0) {\n      toast({\n        title: \"Erro\",\n        description: \"Selecione pelo menos uma plataforma\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    publishMutation.mutate();\n  };\n\n  const platformIcons: Record<string, any> = {\n    tiktok: SiTiktok,\n    youtube: SiYoutube,\n    instagram: SiInstagram,\n    facebook: SiFacebook,\n  };\n\n  const platformLabels: Record<string, string> = {\n    tiktok: \"TikTok\",\n    youtube: \"YouTube Shorts\",\n    instagram: \"Instagram Reels\",\n    facebook: \"Facebook\",\n  };\n\n  const availablePlatforms = [\"tiktok\", \"youtube\", \"instagram\", \"facebook\"];\n  const connectedPlatforms = accounts.map(acc => acc.platform);\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Publicar Vídeo nas Redes Sociais</DialogTitle>\n          <DialogDescription>\n            Configure o conteúdo e escolha onde publicar\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {/* AI Suggestions Button */}\n          <div className=\"flex justify-end\">\n            <Button\n              onClick={() => generateMutation.mutate()}\n              disabled={generateMutation.isPending}\n              variant=\"outline\"\n              size=\"sm\"\n              data-testid=\"button-generate-suggestions\"\n            >\n              {generateMutation.isPending ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Gerando...\n                </>\n              ) : (\n                <>\n                  <Sparkles className=\"h-4 w-4 mr-2\" />\n                  Gerar com IA\n                </>\n              )}\n            </Button>\n          </div>\n\n          {/* Title */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"title\">Título *</Label>\n            <Input\n              id=\"title\"\n              data-testid=\"input-title\"\n              placeholder=\"Título chamativo para o vídeo\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              maxLength={100}\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              {title.length}/100 caracteres\n            </p>\n          </div>\n\n          {/* Description */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"description\">Descrição</Label>\n            <Textarea\n              id=\"description\"\n              data-testid=\"textarea-description\"\n              placeholder=\"Descrição do vídeo...\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              rows={4}\n              maxLength={300}\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              {description.length}/300 caracteres\n            </p>\n          </div>\n\n          {/* Hashtags */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"hashtags\">Hashtags</Label>\n            <Input\n              id=\"hashtags\"\n              data-testid=\"input-hashtags\"\n              placeholder=\"#viral #fyp #trending\"\n              value={hashtags}\n              onChange={(e) => setHashtags(e.target.value)}\n            />\n          </div>\n\n          {/* Platform Selection */}\n          <div className=\"space-y-3\">\n            <Label>Selecione as Plataformas *</Label>\n            <div className=\"grid grid-cols-2 gap-3\">\n              {availablePlatforms.map((platform) => {\n                const Icon = platformIcons[platform];\n                const isConnected = connectedPlatforms.includes(platform);\n                const isSelected = selectedPlatforms.includes(platform);\n\n                return (\n                  <div\n                    key={platform}\n                    className={`flex items-center space-x-2 p-3 rounded-md border ${\n                      !isConnected ? \"opacity-50 bg-muted\" : \"\"\n                    }`}\n                  >\n                    <Checkbox\n                      id={`platform-${platform}`}\n                      data-testid={`checkbox-${platform}`}\n                      checked={isSelected}\n                      onCheckedChange={(checked) => {\n                        if (checked) {\n                          setSelectedPlatforms([...selectedPlatforms, platform]);\n                        } else {\n                          setSelectedPlatforms(selectedPlatforms.filter(p => p !== platform));\n                        }\n                      }}\n                      disabled={!isConnected}\n                    />\n                    <label\n                      htmlFor={`platform-${platform}`}\n                      className=\"flex items-center gap-2 text-sm font-medium cursor-pointer flex-1\"\n                    >\n                      <Icon className=\"h-4 w-4\" />\n                      {platformLabels[platform]}\n                      {!isConnected && (\n                        <span className=\"text-xs text-muted-foreground\">(não conectada)</span>\n                      )}\n                    </label>\n                  </div>\n                );\n              })}\n            </div>\n            {connectedPlatforms.length === 0 && (\n              <p className=\"text-sm text-muted-foreground\">\n                Nenhuma conta conectada. Vá para Configurações para conectar suas contas.\n              </p>\n            )}\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} data-testid=\"button-cancel\">\n            Cancelar\n          </Button>\n          <Button\n            onClick={handlePublish}\n            disabled={publishMutation.isPending || selectedPlatforms.length === 0}\n            data-testid=\"button-publish\"\n          >\n            {publishMutation.isPending ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Publicando...\n              </>\n            ) : (\n              `Publicar em ${selectedPlatforms.length} plataforma(s)`\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":10502},"server/preview-manager.ts":{"content":"import fs from 'fs';\nimport path from 'path';\n\ninterface PreviewSession {\n  id: string;\n  projectPath: string;\n  createdAt: Date;\n  lastAccessed: Date;\n  isActive: boolean;\n}\n\nexport class PreviewManager {\n  private sessions: Map<string, PreviewSession> = new Map();\n\n  async createPreviewSession(projectPath: string): Promise<PreviewSession> {\n    const sessionId = this.generateSessionId();\n    \n    const session: PreviewSession = {\n      id: sessionId,\n      projectPath,\n      createdAt: new Date(),\n      lastAccessed: new Date(),\n      isActive: true,\n    };\n\n    this.sessions.set(sessionId, session);\n    return session;\n  }\n\n  private generateSessionId(): string {\n    return Date.now().toString();\n  }\n\n  getSession(sessionId: string): PreviewSession | undefined {\n    return this.sessions.get(sessionId);\n  }\n\n  getAllSessions(): PreviewSession[] {\n    return Array.from(this.sessions.values());\n  }\n\n  async stopPreviewSession(sessionId: string): Promise<void> {\n    const session = this.sessions.get(sessionId);\n    if (!session) return;\n\n    session.isActive = false;\n    this.sessions.delete(sessionId);\n\n    console.log(`Preview session ${sessionId} stopped`);\n  }\n}","size_bytes":1183},"server/social-media/monitoring.ts":{"content":"import { Database } from 'better-sqlite3';\nimport fs from 'fs';\nimport path from 'path';\n\nexport interface PublicationLog {\n  id: string;\n  postId?: string;\n  platform: string;\n  accountId: string;\n  action: 'publish' | 'update' | 'delete' | 'auth' | 'error';\n  status: 'success' | 'error' | 'warning' | 'info';\n  message: string;\n  details?: any;\n  timestamp: Date;\n  duration?: number;\n  metadata?: {\n    videoPath?: string;\n    title?: string;\n    fileSize?: number;\n    platform_post_id?: string;\n    platform_post_url?: string;\n    error_code?: string;\n    retry_count?: number;\n  };\n}\n\nexport interface SystemMetrics {\n  totalPublications: number;\n  successfulPublications: number;\n  failedPublications: number;\n  successRate: number;\n  averagePublishTime: number;\n  platformStats: Record<string, {\n    total: number;\n    successful: number;\n    failed: number;\n    successRate: number;\n  }>;\n  recentErrors: PublicationLog[];\n  systemHealth: 'healthy' | 'warning' | 'critical';\n}\n\nexport class PublicationMonitor {\n  private db: Database;\n  private logDir: string;\n\n  constructor(db: Database, logDir: string = 'logs') {\n    this.db = db;\n    this.logDir = logDir;\n    this.initializeDatabase();\n    this.ensureLogDirectory();\n  }\n\n  private initializeDatabase() {\n    // Tabela para logs de publicação\n    this.db.exec(`\n      CREATE TABLE IF NOT EXISTS publication_logs (\n        id TEXT PRIMARY KEY,\n        post_id TEXT,\n        platform TEXT NOT NULL,\n        account_id TEXT NOT NULL,\n        action TEXT NOT NULL,\n        status TEXT NOT NULL,\n        message TEXT NOT NULL,\n        details TEXT,\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n        duration INTEGER,\n        metadata TEXT\n      )\n    `);\n\n    // Índices para performance\n    this.db.exec(`\n      CREATE INDEX IF NOT EXISTS idx_publication_logs_platform ON publication_logs(platform);\n      CREATE INDEX IF NOT EXISTS idx_publication_logs_status ON publication_logs(status);\n      CREATE INDEX IF NOT EXISTS idx_publication_logs_timestamp ON publication_logs(timestamp);\n      CREATE INDEX IF NOT EXISTS idx_publication_logs_account ON publication_logs(account_id);\n    `);\n  }\n\n  private ensureLogDirectory() {\n    if (!fs.existsSync(this.logDir)) {\n      fs.mkdirSync(this.logDir, { recursive: true });\n    }\n  }\n\n  /**\n   * Registra um log de publicação\n   */\n  log(logData: Omit<PublicationLog, 'id' | 'timestamp'>): string {\n    const id = `log_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const timestamp = new Date();\n\n    const stmt = this.db.prepare(`\n      INSERT INTO publication_logs (\n        id, post_id, platform, account_id, action, status, \n        message, details, timestamp, duration, metadata\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n    `);\n\n    stmt.run(\n      id,\n      logData.postId || null,\n      logData.platform,\n      logData.accountId,\n      logData.action,\n      logData.status,\n      logData.message,\n      logData.details ? JSON.stringify(logData.details) : null,\n      timestamp.toISOString(),\n      logData.duration || null,\n      logData.metadata ? JSON.stringify(logData.metadata) : null\n    );\n\n    // Também salva em arquivo de log\n    this.writeToLogFile(id, { ...logData, id, timestamp });\n\n    return id;\n  }\n\n  /**\n   * Escreve log em arquivo\n   */\n  private writeToLogFile(id: string, logData: PublicationLog) {\n    const logFileName = `social-media-${new Date().toISOString().split('T')[0]}.log`;\n    const logFilePath = path.join(this.logDir, logFileName);\n\n    const logEntry = {\n      id,\n      timestamp: logData.timestamp.toISOString(),\n      platform: logData.platform,\n      action: logData.action,\n      status: logData.status,\n      message: logData.message,\n      details: logData.details,\n      metadata: logData.metadata\n    };\n\n    const logLine = JSON.stringify(logEntry) + '\\n';\n\n    try {\n      fs.appendFileSync(logFilePath, logLine);\n    } catch (error) {\n      console.error('Erro ao escrever log em arquivo:', error);\n    }\n  }\n\n  /**\n   * Obtém logs com filtros\n   */\n  getLogs(filters: {\n    platform?: string;\n    accountId?: string;\n    status?: string;\n    action?: string;\n    startDate?: Date;\n    endDate?: Date;\n    limit?: number;\n    offset?: number;\n  } = {}): PublicationLog[] {\n    let query = 'SELECT * FROM publication_logs WHERE 1=1';\n    const params: any[] = [];\n\n    if (filters.platform) {\n      query += ' AND platform = ?';\n      params.push(filters.platform);\n    }\n\n    if (filters.accountId) {\n      query += ' AND account_id = ?';\n      params.push(filters.accountId);\n    }\n\n    if (filters.status) {\n      query += ' AND status = ?';\n      params.push(filters.status);\n    }\n\n    if (filters.action) {\n      query += ' AND action = ?';\n      params.push(filters.action);\n    }\n\n    if (filters.startDate) {\n      query += ' AND timestamp >= ?';\n      params.push(filters.startDate.toISOString());\n    }\n\n    if (filters.endDate) {\n      query += ' AND timestamp <= ?';\n      params.push(filters.endDate.toISOString());\n    }\n\n    query += ' ORDER BY timestamp DESC';\n\n    if (filters.limit) {\n      query += ' LIMIT ?';\n      params.push(filters.limit);\n\n      if (filters.offset) {\n        query += ' OFFSET ?';\n        params.push(filters.offset);\n      }\n    }\n\n    const stmt = this.db.prepare(query);\n    const rows = stmt.all(...params) as any[];\n\n    return rows.map(row => ({\n      id: row.id,\n      postId: row.post_id,\n      platform: row.platform,\n      accountId: row.account_id,\n      action: row.action,\n      status: row.status,\n      message: row.message,\n      details: row.details ? JSON.parse(row.details) : undefined,\n      timestamp: new Date(row.timestamp),\n      duration: row.duration,\n      metadata: row.metadata ? JSON.parse(row.metadata) : undefined\n    }));\n  }\n\n  /**\n   * Obtém métricas do sistema\n   */\n  getSystemMetrics(days: number = 30): SystemMetrics {\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() - days);\n\n    // Estatísticas gerais\n    const generalStats = this.db.prepare(`\n      SELECT \n        COUNT(*) as total,\n        SUM(CASE WHEN status = 'success' THEN 1 ELSE 0 END) as successful,\n        SUM(CASE WHEN status = 'error' THEN 1 ELSE 0 END) as failed,\n        AVG(CASE WHEN duration IS NOT NULL THEN duration ELSE NULL END) as avg_duration\n      FROM publication_logs \n      WHERE action = 'publish' AND timestamp >= ?\n    `).get(startDate.toISOString()) as any;\n\n    // Estatísticas por plataforma\n    const platformStats = this.db.prepare(`\n      SELECT \n        platform,\n        COUNT(*) as total,\n        SUM(CASE WHEN status = 'success' THEN 1 ELSE 0 END) as successful,\n        SUM(CASE WHEN status = 'error' THEN 1 ELSE 0 END) as failed\n      FROM publication_logs \n      WHERE action = 'publish' AND timestamp >= ?\n      GROUP BY platform\n    `).all(startDate.toISOString()) as any[];\n\n    // Erros recentes\n    const recentErrors = this.getLogs({\n      status: 'error',\n      startDate,\n      limit: 10\n    });\n\n    // Calcula métricas\n    const totalPublications = generalStats.total || 0;\n    const successfulPublications = generalStats.successful || 0;\n    const failedPublications = generalStats.failed || 0;\n    const successRate = totalPublications > 0 ? (successfulPublications / totalPublications) * 100 : 0;\n    const averagePublishTime = generalStats.avg_duration || 0;\n\n    // Estatísticas por plataforma\n    const platformStatsMap: Record<string, any> = {};\n    platformStats.forEach(stat => {\n      const platformSuccessRate = stat.total > 0 ? (stat.successful / stat.total) * 100 : 0;\n      platformStatsMap[stat.platform] = {\n        total: stat.total,\n        successful: stat.successful,\n        failed: stat.failed,\n        successRate: platformSuccessRate\n      };\n    });\n\n    // Determina saúde do sistema\n    let systemHealth: 'healthy' | 'warning' | 'critical' = 'healthy';\n    if (successRate < 50) {\n      systemHealth = 'critical';\n    } else if (successRate < 80) {\n      systemHealth = 'warning';\n    }\n\n    return {\n      totalPublications,\n      successfulPublications,\n      failedPublications,\n      successRate,\n      averagePublishTime,\n      platformStats: platformStatsMap,\n      recentErrors,\n      systemHealth\n    };\n  }\n\n  /**\n   * Obtém estatísticas de uma conta específica\n   */\n  getAccountStats(accountId: string, days: number = 30) {\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() - days);\n\n    const stats = this.db.prepare(`\n      SELECT \n        platform,\n        COUNT(*) as total_actions,\n        SUM(CASE WHEN status = 'success' THEN 1 ELSE 0 END) as successful_actions,\n        SUM(CASE WHEN status = 'error' THEN 1 ELSE 0 END) as failed_actions,\n        SUM(CASE WHEN action = 'publish' THEN 1 ELSE 0 END) as publications,\n        AVG(CASE WHEN duration IS NOT NULL THEN duration ELSE NULL END) as avg_duration\n      FROM publication_logs \n      WHERE account_id = ? AND timestamp >= ?\n      GROUP BY platform\n    `).all(accountId, startDate.toISOString()) as any[];\n\n    return stats.map(stat => ({\n      platform: stat.platform,\n      totalActions: stat.total_actions,\n      successfulActions: stat.successful_actions,\n      failedActions: stat.failed_actions,\n      publications: stat.publications,\n      successRate: stat.total_actions > 0 ? (stat.successful_actions / stat.total_actions) * 100 : 0,\n      averageDuration: stat.avg_duration || 0\n    }));\n  }\n\n  /**\n   * Obtém logs de erro detalhados\n   */\n  getErrorAnalysis(days: number = 7) {\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() - days);\n\n    const errorsByPlatform = this.db.prepare(`\n      SELECT \n        platform,\n        COUNT(*) as error_count,\n        GROUP_CONCAT(DISTINCT message) as error_messages\n      FROM publication_logs \n      WHERE status = 'error' AND timestamp >= ?\n      GROUP BY platform\n      ORDER BY error_count DESC\n    `).all(startDate.toISOString()) as any[];\n\n    const errorsByType = this.db.prepare(`\n      SELECT \n        message,\n        COUNT(*) as occurrence_count,\n        platform\n      FROM publication_logs \n      WHERE status = 'error' AND timestamp >= ?\n      GROUP BY message, platform\n      ORDER BY occurrence_count DESC\n      LIMIT 20\n    `).all(startDate.toISOString()) as any[];\n\n    return {\n      errorsByPlatform: errorsByPlatform.map(row => ({\n        platform: row.platform,\n        errorCount: row.error_count,\n        errorMessages: row.error_messages ? row.error_messages.split(',') : []\n      })),\n      errorsByType: errorsByType.map(row => ({\n        message: row.message,\n        occurrenceCount: row.occurrence_count,\n        platform: row.platform\n      }))\n    };\n  }\n\n  /**\n   * Limpa logs antigos\n   */\n  cleanupOldLogs(days: number = 90) {\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - days);\n\n    const stmt = this.db.prepare(`\n      DELETE FROM publication_logs \n      WHERE timestamp < ?\n    `);\n\n    const result = stmt.run(cutoffDate.toISOString());\n    console.log(`Removidos ${result.changes} logs antigos`);\n\n    return result.changes;\n  }\n\n  /**\n   * Exporta logs para arquivo CSV\n   */\n  exportLogs(filters: any = {}, filePath?: string): string {\n    const logs = this.getLogs(filters);\n    \n    if (!filePath) {\n      filePath = path.join(this.logDir, `export_${Date.now()}.csv`);\n    }\n\n    const csvHeader = 'ID,Timestamp,Platform,Account,Action,Status,Message,Duration,PostID,Metadata\\n';\n    const csvRows = logs.map(log => {\n      const metadata = log.metadata ? JSON.stringify(log.metadata).replace(/\"/g, '\"\"') : '';\n      return [\n        log.id,\n        log.timestamp.toISOString(),\n        log.platform,\n        log.accountId,\n        log.action,\n        log.status,\n        `\"${log.message.replace(/\"/g, '\"\"')}\"`,\n        log.duration || '',\n        log.postId || '',\n        `\"${metadata}\"`\n      ].join(',');\n    }).join('\\n');\n\n    const csvContent = csvHeader + csvRows;\n    fs.writeFileSync(filePath, csvContent);\n\n    return filePath;\n  }\n}","size_bytes":12063},"server/routes/social-media.ts":{"content":"import express from 'express';\nimport multer from 'multer';\nimport path from 'path';\nimport fs from 'fs';\nimport { SocialMediaManager, PublishRequest } from '../social-media/social-media-manager';\n\nconst router = express.Router();\n\n// Configuração do multer para upload de vídeos\nconst storage = multer.diskStorage({\n  destination: (req, file, cb) => {\n    const uploadDir = path.join(process.cwd(), 'uploads', 'social-media');\n    if (!fs.existsSync(uploadDir)) {\n      fs.mkdirSync(uploadDir, { recursive: true });\n    }\n    cb(null, uploadDir);\n  },\n  filename: (req, file, cb) => {\n    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n    cb(null, `video-${uniqueSuffix}${path.extname(file.originalname)}`);\n  }\n});\n\nconst upload = multer({\n  storage,\n  limits: {\n    fileSize: 500 * 1024 * 1024 // 500MB\n  },\n  fileFilter: (req, file, cb) => {\n    const allowedTypes = /mp4|avi|mov|wmv|flv|webm|mkv/;\n    const extname = allowedTypes.test(path.extname(file.originalname).toLowerCase());\n    const mimetype = allowedTypes.test(file.mimetype);\n\n    if (mimetype && extname) {\n      return cb(null, true);\n    } else {\n      cb(new Error('Apenas arquivos de vídeo são permitidos!'));\n    }\n  }\n});\n\n// Inicializa o gerenciador de redes sociais\nconst dbPath = path.join(process.cwd(), 'data', 'social-media.db');\nconst geminiApiKey = process.env.GEMINI_API_KEY;\n\n// Cria diretório de dados se não existir\nconst dataDir = path.dirname(dbPath);\nif (!fs.existsSync(dataDir)) {\n  fs.mkdirSync(dataDir, { recursive: true });\n}\n\nconst socialMediaManager = new SocialMediaManager(dbPath, geminiApiKey);\n\n/**\n * GET /api/social-media/platforms\n * Lista plataformas disponíveis\n */\nrouter.get('/platforms', (req, res) => {\n  res.json({\n    success: true,\n    platforms: [\n      {\n        id: 'tiktok',\n        name: 'TikTok',\n        description: 'Publique vídeos curtos e virais',\n        icon: '🎵',\n        maxDuration: 180, // 3 minutos\n        supportedFormats: ['mp4', 'mov', 'avi']\n      },\n      {\n        id: 'instagram',\n        name: 'Instagram',\n        description: 'Publique Reels e posts',\n        icon: '📸',\n        maxDuration: 90, // 1.5 minutos para Reels\n        supportedFormats: ['mp4', 'mov']\n      },\n      {\n        id: 'youtube',\n        name: 'YouTube',\n        description: 'Publique vídeos e Shorts',\n        icon: '📺',\n        maxDuration: null, // Sem limite\n        supportedFormats: ['mp4', 'mov', 'avi', 'wmv', 'flv', 'webm', 'mkv']\n      },\n      {\n        id: 'facebook',\n        name: 'Facebook',\n        description: 'Publique vídeos na sua página',\n        icon: '👥',\n        maxDuration: 240, // 4 minutos\n        supportedFormats: ['mp4', 'mov', 'avi']\n      }\n    ]\n  });\n});\n\n/**\n * GET /api/social-media/auth/:platform\n * Obtém URL de autorização para uma plataforma\n */\nrouter.get('/auth/:platform', (req, res) => {\n  try {\n    const { platform } = req.params;\n    const { state } = req.query;\n    \n    const authUrl = socialMediaManager.getAuthUrl(platform, state as string);\n    \n    res.json({\n      success: true,\n      authUrl,\n      platform\n    });\n  } catch (error) {\n    res.status(400).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Erro desconhecido'\n    });\n  }\n});\n\n/**\n * POST /api/social-media/auth/:platform/callback\n * Processa callback de autorização\n */\nrouter.post('/auth/:platform/callback', async (req, res) => {\n  try {\n    const { platform } = req.params;\n    const { code, state } = req.body;\n    \n    if (!code) {\n      return res.status(400).json({\n        success: false,\n        error: 'Código de autorização não fornecido'\n      });\n    }\n    \n    const account = await socialMediaManager.connectAccount(platform, code, state as string | undefined);\n    \n    res.json({\n      success: true,\n      account: {\n        id: account.id,\n        platform: account.platform,\n        accountName: account.accountName,\n        isActive: account.isActive,\n        createdAt: account.createdAt\n      }\n    });\n  } catch (error) {\n    console.error('Erro no callback de autorização:', error);\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Erro ao conectar conta'\n    });\n  }\n});\n\n/**\n * GET /auth/:platform/callback\n * Facilita o callback direto do provedor (ex.: TikTok) via querystring\n */\nrouter.get('/auth/:platform/callback', async (req, res) => {\n  try {\n    const { platform } = req.params;\n    const { code, state } = req.query as { code?: string; state?: string };\n\n    if (!code) {\n      return res.status(400).send('Missing authorization code');\n    }\n\n    const account = await socialMediaManager.connectAccount(platform, code, state);\n\n    // Responde com uma página simples que fecha o popup\n    res.setHeader('Content-Type', 'text/html; charset=utf-8');\n    res.send(`<!doctype html><html><body>\n      <script>\n        try { window.opener && window.opener.postMessage({ type: 'social-auth', platform: '${platform}', success: true }, '*'); } catch {}\n        window.close();\n      </script>\n      <p>Conta conectada. Você pode fechar esta janela.</p>\n    </body></html>`);\n  } catch (error) {\n    console.error('Erro no callback GET de autorização:', error);\n    res.status(500).send('Erro ao conectar conta');\n  }\n});\n\n/**\n * GET /api/social-media/accounts\n * Lista contas conectadas\n */\nrouter.get('/accounts', (req, res) => {\n  try {\n    const accounts = socialMediaManager.getConnectedAccounts();\n    \n    res.json({\n      success: true,\n      accounts: accounts.map(account => ({\n        id: account.id,\n        platform: account.platform,\n        accountName: account.accountName,\n        isActive: account.isActive,\n        createdAt: account.createdAt,\n        expiresAt: account.expiresAt\n      }))\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Erro ao listar contas'\n    });\n  }\n});\n\n/**\n * DELETE /api/social-media/accounts/:accountId\n * Desconecta uma conta\n */\nrouter.delete('/accounts/:accountId', async (req, res) => {\n  try {\n    const { accountId } = req.params;\n    \n    const success = await socialMediaManager.disconnectAccount(accountId);\n    \n    if (success) {\n      res.json({\n        success: true,\n        message: 'Conta desconectada com sucesso'\n      });\n    } else {\n      res.status(404).json({\n        success: false,\n        error: 'Conta não encontrada'\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Erro ao desconectar conta'\n    });\n  }\n});\n\n/**\n * POST /api/social-media/generate-content\n * Gera conteúdo com IA\n */\nrouter.post('/generate-content', upload.single('video'), async (req, res) => {\n  try {\n    if (!req.file) {\n      return res.status(400).json({\n        success: false,\n        error: 'Arquivo de vídeo é obrigatório'\n      });\n    }\n\n    const { platforms, tone, targetAudience, keywords } = req.body;\n    \n    if (!platforms) {\n      return res.status(400).json({\n        success: false,\n        error: 'Plataformas são obrigatórias'\n      });\n    }\n\n    const platformList = Array.isArray(platforms) ? platforms : JSON.parse(platforms);\n    const keywordList = keywords ? (Array.isArray(keywords) ? keywords : JSON.parse(keywords)) : undefined;\n\n    const generatedContent = await socialMediaManager.generateContentWithAI(\n      req.file.path,\n      platformList,\n      {\n        tone: tone || 'casual',\n        targetAudience: targetAudience || 'geral',\n        keywords: keywordList\n      }\n    );\n\n    res.json({\n      success: true,\n      content: generatedContent,\n      videoPath: req.file.path\n    });\n  } catch (error) {\n    console.error('Erro ao gerar conteúdo:', error);\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Erro ao gerar conteúdo'\n    });\n  }\n});\n\n/**\n * POST /api/social-media/publish\n * Publica conteúdo em redes sociais\n */\nrouter.post('/publish', upload.single('video'), async (req, res) => {\n  try {\n    if (!req.file) {\n      return res.status(400).json({\n        success: false,\n        error: 'Arquivo de vídeo é obrigatório'\n      });\n    }\n\n    const {\n      title,\n      description,\n      hashtags,\n      accounts,\n      privacy,\n      generateContent,\n      contentOptions\n    } = req.body;\n\n    if (!accounts || !Array.isArray(JSON.parse(accounts)) || JSON.parse(accounts).length === 0) {\n      return res.status(400).json({\n        success: false,\n        error: 'Pelo menos uma conta deve ser selecionada'\n      });\n    }\n\n    const publishRequest: PublishRequest = {\n      content: {\n        title: title || 'Vídeo sem título',\n        description: description || '',\n        videoPath: req.file.path,\n        hashtags: hashtags ? JSON.parse(hashtags) : [],\n        privacy: privacy || 'public'\n      },\n      accounts: JSON.parse(accounts),\n      generateContent: generateContent === 'true',\n      contentOptions: contentOptions ? JSON.parse(contentOptions) : undefined\n    };\n\n    const result = await socialMediaManager.publishContent(publishRequest);\n\n    res.json(result);\n  } catch (error) {\n    console.error('Erro ao publicar conteúdo:', error);\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Erro ao publicar conteúdo'\n    });\n  }\n});\n\n/**\n * POST /api/social-media/preview\n * Gera preview do conteúdo antes da publicação\n */\nrouter.post('/preview', upload.single('video'), async (req, res) => {\n  try {\n    if (!req.file) {\n      return res.status(400).json({\n        success: false,\n        error: 'Arquivo de vídeo é obrigatório'\n      });\n    }\n\n    const {\n      title,\n      description,\n      hashtags,\n      accounts,\n      generateContent,\n      contentOptions\n    } = req.body;\n\n    let finalContent = {\n      title: title || 'Vídeo sem título',\n      description: description || '',\n      hashtags: hashtags ? JSON.parse(hashtags) : []\n    };\n\n    let generatedContent = null;\n\n    // Gera conteúdo com IA se solicitado\n    if (generateContent === 'true' && contentOptions) {\n      const accountList = JSON.parse(accounts);\n      const platforms = await Promise.all(\n        accountList.map(async (accountId: string) => {\n          const connectedAccounts = socialMediaManager.getConnectedAccounts();\n          const account = connectedAccounts.find(acc => acc.id === accountId);\n          return account?.platform || 'unknown';\n        })\n      );\n\n      const options = JSON.parse(contentOptions);\n      generatedContent = await socialMediaManager.generateContentWithAI(\n        req.file.path,\n        platforms.filter(p => p !== 'unknown'),\n        options\n      );\n\n      // Aplica sugestões da IA\n      if (generatedContent.suggestions.bestTitle) {\n        finalContent.title = generatedContent.suggestions.bestTitle;\n      }\n      if (generatedContent.suggestions.bestDescription) {\n        finalContent.description = generatedContent.suggestions.bestDescription;\n      }\n      if (generatedContent.suggestions.recommendedHashtags) {\n        finalContent.hashtags = generatedContent.suggestions.recommendedHashtags;\n      }\n    }\n\n    res.json({\n      success: true,\n      preview: {\n        content: finalContent,\n        generatedContent,\n        videoInfo: {\n          filename: req.file.filename,\n          size: req.file.size,\n          mimetype: req.file.mimetype,\n          path: req.file.path\n        }\n      }\n    });\n  } catch (error) {\n    console.error('Erro ao gerar preview:', error);\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Erro ao gerar preview'\n    });\n  }\n});\n\n/**\n * GET /api/social-media/status\n * Verifica status do sistema\n */\nrouter.get('/status', (req, res) => {\n  const accounts = socialMediaManager.getConnectedAccounts();\n  const hasGeminiKey = !!process.env.GEMINI_API_KEY;\n\n  res.json({\n    success: true,\n    status: {\n      connectedAccounts: accounts.length,\n      platforms: [...new Set(accounts.map(acc => acc.platform))],\n      aiEnabled: hasGeminiKey,\n      uptime: process.uptime(),\n      version: '1.0.0'\n    }\n  });\n});\n\n/**\n * POST /api/social-media/schedule\n * Agenda uma publicação\n */\nrouter.post('/schedule', upload.single('video'), async (req, res) => {\n  try {\n    const { content, accounts, scheduleOptions } = req.body;\n    \n    const parsedContent = JSON.parse(content);\n    if (req.file) {\n      parsedContent.videoPath = req.file.path;\n    }\n\n    const postId = await socialMediaManager.schedulePost(\n      parsedContent,\n      JSON.parse(accounts),\n      JSON.parse(scheduleOptions)\n    );\n\n    res.json({ success: true, postId });\n  } catch (error) {\n    console.error('Erro ao agendar publicação:', error);\n    res.status(500).json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Erro interno do servidor' \n    });\n  }\n});\n\n/**\n * GET /api/social-media/scheduled\n * Lista posts agendados\n */\nrouter.get('/scheduled', async (req, res) => {\n  try {\n    const filters = req.query;\n    const posts = await socialMediaManager.getScheduledPosts(filters);\n    res.json({ success: true, posts });\n  } catch (error) {\n    console.error('Erro ao buscar posts agendados:', error);\n    res.status(500).json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Erro interno do servidor' \n    });\n  }\n});\n\n/**\n * DELETE /api/social-media/scheduled/:postId\n * Cancela post agendado\n */\nrouter.delete('/scheduled/:postId', async (req, res) => {\n  try {\n    const { postId } = req.params;\n    const success = await socialMediaManager.cancelScheduledPost(postId);\n    res.json({ success });\n  } catch (error) {\n    console.error('Erro ao cancelar post agendado:', error);\n    res.status(500).json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Erro interno do servidor' \n    });\n  }\n});\n\n/**\n * GET /api/social-media/scheduler/stats\n * Estatísticas do scheduler\n */\nrouter.get('/scheduler/stats', async (req, res) => {\n  try {\n    const stats = await socialMediaManager.getSchedulerStats();\n    res.json({ success: true, stats });\n  } catch (error) {\n    console.error('Erro ao buscar estatísticas do scheduler:', error);\n    res.status(500).json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Erro interno do servidor' \n    });\n  }\n});\n\n/**\n * GET /api/social-media/logs\n * Logs de publicação\n */\nrouter.get('/logs', async (req, res) => {\n  try {\n    const filters = req.query;\n    const logs = await socialMediaManager.getPublicationLogs(filters);\n    res.json({ success: true, logs });\n  } catch (error) {\n    console.error('Erro ao buscar logs:', error);\n    res.status(500).json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Erro interno do servidor' \n    });\n  }\n});\n\n/**\n * GET /api/social-media/metrics\n * Métricas do sistema\n */\nrouter.get('/metrics', async (req, res) => {\n  try {\n    const metrics = await socialMediaManager.getSystemMetrics();\n    res.json({ success: true, metrics });\n  } catch (error) {\n    console.error('Erro ao buscar métricas:', error);\n    res.status(500).json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Erro interno do servidor' \n    });\n  }\n});\n\n/**\n * GET /api/social-media/accounts/:accountId/stats\n * Estatísticas de conta específica\n */\nrouter.get('/accounts/:accountId/stats', async (req, res) => {\n  try {\n    const { accountId } = req.params;\n    const stats = await socialMediaManager.getAccountStats(accountId);\n    res.json({ success: true, stats });\n  } catch (error) {\n    console.error('Erro ao buscar estatísticas da conta:', error);\n    res.status(500).json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Erro interno do servidor' \n    });\n  }\n});\n\n/**\n * GET /api/social-media/logs/export\n * Exporta logs\n */\nrouter.get('/logs/export', async (req, res) => {\n  try {\n    const format = req.query.format as 'csv' | 'json' || 'csv';\n    const data = await socialMediaManager.exportLogs(format);\n    \n    const filename = `social-media-logs-${new Date().toISOString().split('T')[0]}.${format}`;\n    const contentType = format === 'csv' ? 'text/csv' : 'application/json';\n    \n    res.setHeader('Content-Type', contentType);\n    res.setHeader('Content-Disposition', `attachment; filename=\"${filename}\"`);\n    res.send(data);\n  } catch (error) {\n    console.error('Erro ao exportar logs:', error);\n    res.status(500).json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Erro interno do servidor' \n    });\n  }\n});\n\n/**\n * POST /api/social-media/scheduler/start\n * Inicia o scheduler\n */\nrouter.post('/scheduler/start', async (req, res) => {\n  try {\n    socialMediaManager.startScheduler();\n    res.json({ success: true, message: 'Scheduler iniciado' });\n  } catch (error) {\n    console.error('Erro ao iniciar scheduler:', error);\n    res.status(500).json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Erro interno do servidor' \n    });\n  }\n});\n\n/**\n * POST /api/social-media/scheduler/stop\n * Para o scheduler\n */\nrouter.post('/scheduler/stop', async (req, res) => {\n  try {\n    socialMediaManager.stopScheduler();\n    res.json({ success: true, message: 'Scheduler parado' });\n  } catch (error) {\n    console.error('Erro ao parar scheduler:', error);\n    res.status(500).json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Erro interno do servidor' \n    });\n  }\n});\n\nexport default router;\n","size_bytes":17755},"server/social-media/publishers/youtube-publisher.ts":{"content":"import { google } from 'googleapis';\nimport fs from 'fs';\nimport path from 'path';\nimport { PostContent, PublishResult } from '../config';\n\nexport class YouTubePublisher {\n  private oauth2Client: any;\n\n  constructor(oauth2Client: any) {\n    this.oauth2Client = oauth2Client;\n  }\n\n  /**\n   * Publica um vídeo no YouTube\n   */\n  async publishVideo(\n    accessToken: string,\n    content: PostContent,\n    isShort: boolean = false\n  ): Promise<PublishResult> {\n    try {\n      // Configura as credenciais\n      this.oauth2Client.setCredentials({\n        access_token: accessToken\n      });\n\n      const youtube = google.youtube({ version: 'v3', auth: this.oauth2Client });\n\n      // Verifica se o arquivo existe\n      if (!fs.existsSync(content.videoPath)) {\n        throw new Error('Arquivo de vídeo não encontrado');\n      }\n\n      // Prepara os metadados do vídeo\n      const videoMetadata = this.prepareVideoMetadata(content, isShort);\n\n      // Faz upload do vídeo\n      const response = await youtube.videos.insert({\n        part: ['snippet', 'status'],\n        requestBody: videoMetadata,\n        media: {\n          body: fs.createReadStream(content.videoPath)\n        }\n      });\n\n      if (!response.data.id) {\n        throw new Error('Falha no upload do vídeo');\n      }\n\n      const videoId = response.data.id;\n      const videoUrl = `https://www.youtube.com/watch?v=${videoId}`;\n\n      // Se for um Short, tenta definir como Short (não há API oficial, mas podemos usar tags)\n      if (isShort) {\n        await this.markAsShort(youtube, videoId);\n      }\n\n      return {\n        platform: 'youtube',\n        success: true,\n        postId: videoId,\n        postUrl: videoUrl\n      };\n    } catch (error) {\n      console.error('Erro ao publicar vídeo no YouTube:', error);\n      return {\n        platform: 'youtube',\n        success: false,\n        error: error instanceof Error ? error.message : 'Erro desconhecido'\n      };\n    }\n  }\n\n  /**\n   * Prepara os metadados do vídeo\n   */\n  private prepareVideoMetadata(content: PostContent, isShort: boolean = false) {\n    // Formata a descrição\n    const description = this.formatDescription(content, isShort);\n\n    // Prepara as tags\n    const tags = this.prepareTags(content.hashtags, isShort);\n\n    return {\n      snippet: {\n        title: content.title.substring(0, 100), // YouTube tem limite de 100 caracteres para título\n        description: description.substring(0, 5000), // Limite de 5000 caracteres para descrição\n        tags: tags,\n        categoryId: '22', // Categoria \"People & Blogs\" por padrão\n        defaultLanguage: 'pt-BR',\n        defaultAudioLanguage: 'pt-BR'\n      },\n      status: {\n        privacyStatus: this.mapPrivacyStatus(content.privacy),\n        selfDeclaredMadeForKids: false,\n        embeddable: true,\n        license: 'youtube',\n        publicStatsViewable: true\n      }\n    };\n  }\n\n  /**\n   * Formata a descrição do vídeo\n   */\n  private formatDescription(content: PostContent, isShort: boolean): string {\n    let description = '';\n\n    if (content.description) {\n      description += content.description + '\\n\\n';\n    }\n\n    // Adiciona hashtags na descrição\n    if (content.hashtags && content.hashtags.length > 0) {\n      const hashtags = content.hashtags\n        .map(tag => tag.startsWith('#') ? tag : `#${tag}`)\n        .join(' ');\n      description += hashtags + '\\n\\n';\n    }\n\n    // Adiciona informações específicas para Shorts\n    if (isShort) {\n      description += '#Shorts #YouTubeShorts\\n\\n';\n    }\n\n    // Adiciona informações padrão\n    description += '🔔 Inscreva-se no canal e ative o sininho!\\n';\n    description += '👍 Deixe seu like se gostou do conteúdo!\\n';\n    description += '💬 Comente sua opinião!\\n\\n';\n\n    // Adiciona timestamp se necessário\n    description += '⏰ Criado automaticamente pelo ViralCutsAI';\n\n    return description;\n  }\n\n  /**\n   * Prepara as tags do vídeo\n   */\n  private prepareTags(hashtags: string[], isShort: boolean = false): string[] {\n    const tags: string[] = [];\n\n    // Adiciona hashtags como tags (remove o #)\n    if (hashtags && hashtags.length > 0) {\n      hashtags.forEach(tag => {\n        const cleanTag = tag.replace('#', '').trim();\n        if (cleanTag && cleanTag.length <= 30) { // YouTube tem limite de 30 caracteres por tag\n          tags.push(cleanTag);\n        }\n      });\n    }\n\n    // Adiciona tags específicas para Shorts\n    if (isShort) {\n      tags.push('Shorts', 'YouTubeShorts', 'Short', 'Viral');\n    }\n\n    // Adiciona tags padrão\n    tags.push('ViralCutsAI', 'Conteúdo', 'Brasil');\n\n    // YouTube permite máximo 500 caracteres total para tags\n    const maxLength = 500;\n    let totalLength = 0;\n    const finalTags: string[] = [];\n\n    for (const tag of tags) {\n      if (totalLength + tag.length + 1 <= maxLength) { // +1 para a vírgula\n        finalTags.push(tag);\n        totalLength += tag.length + 1;\n      } else {\n        break;\n      }\n    }\n\n    return finalTags;\n  }\n\n  /**\n   * Mapeia o status de privacidade\n   */\n  private mapPrivacyStatus(privacy: string): string {\n    switch (privacy) {\n      case 'public':\n        return 'public';\n      case 'private':\n        return 'private';\n      case 'unlisted':\n        return 'unlisted';\n      default:\n        return 'public';\n    }\n  }\n\n  /**\n   * Tenta marcar o vídeo como Short (método não oficial)\n   */\n  private async markAsShort(youtube: any, videoId: string): Promise<void> {\n    try {\n      // Não há uma API oficial para marcar como Short\n      // O YouTube detecta automaticamente baseado na duração (≤60s) e orientação (vertical)\n      // Aqui podemos adicionar tags específicas ou outras estratégias\n      \n      console.log(`Vídeo ${videoId} será detectado automaticamente como Short se tiver ≤60s e orientação vertical`);\n    } catch (error) {\n      console.warn('Não foi possível marcar como Short:', error);\n    }\n  }\n\n  /**\n   * Atualiza os metadados de um vídeo existente\n   */\n  async updateVideo(\n    accessToken: string,\n    videoId: string,\n    updates: {\n      title?: string;\n      description?: string;\n      tags?: string[];\n      privacy?: string;\n    }\n  ): Promise<boolean> {\n    try {\n      this.oauth2Client.setCredentials({\n        access_token: accessToken\n      });\n\n      const youtube = google.youtube({ version: 'v3', auth: this.oauth2Client });\n\n      // Primeiro, obtém os dados atuais do vídeo\n      const currentVideo = await youtube.videos.list({\n        part: ['snippet', 'status'],\n        id: [videoId]\n      });\n\n      if (!currentVideo.data.items || currentVideo.data.items.length === 0) {\n        throw new Error('Vídeo não encontrado');\n      }\n\n      const video = currentVideo.data.items[0];\n      \n      // Prepara os dados atualizados\n      const updatedSnippet = {\n        ...video.snippet,\n        title: updates.title || video.snippet!.title,\n        description: updates.description || video.snippet!.description,\n        tags: updates.tags || video.snippet!.tags\n      };\n\n      const updatedStatus = {\n        ...video.status,\n        privacyStatus: updates.privacy ? this.mapPrivacyStatus(updates.privacy) : video.status!.privacyStatus\n      };\n\n      // Atualiza o vídeo\n      await youtube.videos.update({\n        part: ['snippet', 'status'],\n        requestBody: {\n          id: videoId,\n          snippet: updatedSnippet,\n          status: updatedStatus\n        }\n      });\n\n      return true;\n    } catch (error) {\n      console.error('Erro ao atualizar vídeo no YouTube:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Deleta um vídeo\n   */\n  async deleteVideo(accessToken: string, videoId: string): Promise<boolean> {\n    try {\n      this.oauth2Client.setCredentials({\n        access_token: accessToken\n      });\n\n      const youtube = google.youtube({ version: 'v3', auth: this.oauth2Client });\n\n      await youtube.videos.delete({\n        id: videoId\n      });\n\n      return true;\n    } catch (error) {\n      console.error('Erro ao deletar vídeo no YouTube:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Obtém informações de um vídeo\n   */\n  async getVideoInfo(accessToken: string, videoId: string): Promise<{\n    id: string;\n    title: string;\n    description: string;\n    publishedAt: string;\n    thumbnails: any;\n    duration: string;\n    viewCount: string;\n    likeCount: string;\n    commentCount: string;\n    tags?: string[];\n  }> {\n    try {\n      this.oauth2Client.setCredentials({\n        access_token: accessToken\n      });\n\n      const youtube = google.youtube({ version: 'v3', auth: this.oauth2Client });\n\n      const response = await youtube.videos.list({\n        part: ['snippet', 'statistics', 'contentDetails'],\n        id: [videoId]\n      });\n\n      if (!response.data.items || response.data.items.length === 0) {\n        throw new Error('Vídeo não encontrado');\n      }\n\n      const video = response.data.items[0];\n\n      return {\n        id: video.id!,\n        title: video.snippet!.title!,\n        description: video.snippet!.description!,\n        publishedAt: video.snippet!.publishedAt!,\n        thumbnails: video.snippet!.thumbnails,\n        duration: video.contentDetails!.duration!,\n        viewCount: video.statistics!.viewCount!,\n        likeCount: video.statistics!.likeCount!,\n        commentCount: video.statistics!.commentCount!,\n        tags: video.snippet!.tags\n      };\n    } catch (error) {\n      console.error('Erro ao obter informações do vídeo YouTube:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Lista os vídeos do canal\n   */\n  async getChannelVideos(\n    accessToken: string,\n    maxResults: number = 25\n  ): Promise<Array<{\n    id: string;\n    title: string;\n    description: string;\n    publishedAt: string;\n    thumbnails: any;\n  }>> {\n    try {\n      this.oauth2Client.setCredentials({\n        access_token: accessToken\n      });\n\n      const youtube = google.youtube({ version: 'v3', auth: this.oauth2Client });\n\n      // Primeiro, obtém o canal\n      const channelResponse = await youtube.channels.list({\n        part: ['contentDetails'],\n        mine: true\n      });\n\n      if (!channelResponse.data.items || channelResponse.data.items.length === 0) {\n        throw new Error('Canal não encontrado');\n      }\n\n      const uploadsPlaylistId = channelResponse.data.items[0].contentDetails!.relatedPlaylists!.uploads;\n\n      // Obtém os vídeos da playlist de uploads\n      const playlistResponse = await youtube.playlistItems.list({\n        part: ['snippet'],\n        playlistId: uploadsPlaylistId,\n        maxResults: maxResults\n      });\n\n      return playlistResponse.data.items?.map(item => ({\n        id: item.snippet!.resourceId!.videoId!,\n        title: item.snippet!.title!,\n        description: item.snippet!.description!,\n        publishedAt: item.snippet!.publishedAt!,\n        thumbnails: item.snippet!.thumbnails\n      })) || [];\n    } catch (error) {\n      console.error('Erro ao obter vídeos do canal YouTube:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Verifica se um vídeo é um Short baseado na duração\n   */\n  isVideoShort(duration: string): boolean {\n    // Converte duração ISO 8601 para segundos\n    const match = duration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\n    if (!match) return false;\n\n    const hours = parseInt(match[1] || '0');\n    const minutes = parseInt(match[2] || '0');\n    const seconds = parseInt(match[3] || '0');\n\n    const totalSeconds = hours * 3600 + minutes * 60 + seconds;\n    \n    // Shorts devem ter 60 segundos ou menos\n    return totalSeconds <= 60;\n  }\n}","size_bytes":11577},"client/src/pages/Accounts.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport type { SocialAccount } from \"@shared/schema\";\nimport { Trash2, Plus, Loader2, CheckCircle2, XCircle, ArrowLeft } from \"lucide-react\";\nimport { SiTiktok, SiYoutube, SiInstagram, SiFacebook } from \"react-icons/si\";\nimport { OAuthButton } from \"@/components/OAuthButton\";\nimport { Link } from \"wouter\";\n\nexport default function Accounts() {\n  const [provider, setProvider] = useState<string>(\"\");\n  const [name, setName] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [providerId, setProviderId] = useState(\"\");\n  const [accessToken, setAccessToken] = useState(\"\");\n  const { toast } = useToast();\n\n  const { data: accounts = [], isLoading } = useQuery<SocialAccount[]>({\n    queryKey: [\"/api/social-accounts\"],\n  });\n\n  const addMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", \"/api/social-accounts\", {\n        provider,\n        name,\n        username: username || null,\n        providerId,\n        accessToken,\n        media: null,\n        data: {},\n        authorized: true,\n      });\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/social-accounts\"] });\n      setProvider(\"\");\n      setName(\"\");\n      setUsername(\"\");\n      setProviderId(\"\");\n      setAccessToken(\"\");\n      toast({\n        title: \"Sucesso!\",\n        description: \"Conta adicionada com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiRequest(\"DELETE\", `/api/social-accounts/${id}`, {});\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/social-accounts\"] });\n      toast({\n        title: \"Sucesso!\",\n        description: \"Conta removida com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleAdd = () => {\n    if (!provider || !name || !providerId || !accessToken) {\n      toast({\n        title: \"Erro\",\n        description: \"Preencha todos os campos obrigatórios\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    addMutation.mutate();\n  };\n\n  const platformIcons: Record<string, any> = {\n    tiktok: SiTiktok,\n    youtube: SiYoutube,\n    instagram: SiInstagram,\n    facebook: SiFacebook,\n  };\n\n  const platformLabels: Record<string, string> = {\n    tiktok: \"TikTok\",\n    youtube: \"YouTube\",\n    instagram: \"Instagram\",\n    facebook: \"Facebook\",\n  };\n\n  const platformHints: Record<string, string> = {\n    tiktok: \"Obtenha o open_id e access_token através da TikTok API\",\n    youtube: \"Use o ID do canal do YouTube e OAuth 2.0\",\n    instagram: \"Use o Instagram Business Account ID e Page Access Token\",\n    facebook: \"Use o Page ID e Page Access Token\",\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"border-b\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <div className=\"flex items-center gap-4 mb-2\">\n            <Link href=\"/\">\n              <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-back\">\n                <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                Voltar\n              </Button>\n            </Link>\n          </div>\n          <h1 className=\"text-2xl font-bold\">Contas Conectadas</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Gerencie suas contas de redes sociais para publicação automatizada\n          </p>\n        </div>\n      </header>\n\n      <main className=\"container mx-auto px-4 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Conectar Conta</CardTitle>\n              <CardDescription>\n                Conecte suas contas de redes sociais de forma rápida e segura\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"space-y-3\">\n                <h3 className=\"text-sm font-medium\">Conexão Automática (OAuth)</h3>\n                <p className=\"text-xs text-muted-foreground\">\n                  Clique no botão da plataforma para conectar sua conta de forma segura\n                </p>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <OAuthButton\n                    provider=\"youtube\"\n                    label=\"YouTube\"\n                    icon={<SiYoutube />}\n                    onSuccess={() => {\n                      queryClient.invalidateQueries({ queryKey: [\"/api/social-accounts\"] });\n                    }}\n                  />\n                  <OAuthButton\n                    provider=\"tiktok\"\n                    label=\"TikTok\"\n                    icon={<SiTiktok />}\n                    onSuccess={() => {\n                      queryClient.invalidateQueries({ queryKey: [\"/api/social-accounts\"] });\n                    }}\n                  />\n                  <OAuthButton\n                    provider=\"instagram\"\n                    label=\"Instagram\"\n                    icon={<SiInstagram />}\n                    onSuccess={() => {\n                      queryClient.invalidateQueries({ queryKey: [\"/api/social-accounts\"] });\n                    }}\n                  />\n                  <OAuthButton\n                    provider=\"facebook\"\n                    label=\"Facebook\"\n                    icon={<SiFacebook />}\n                    onSuccess={() => {\n                      queryClient.invalidateQueries({ queryKey: [\"/api/social-accounts\"] });\n                    }}\n                  />\n                </div>\n              </div>\n\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <Separator />\n                </div>\n                <div className=\"relative flex justify-center text-xs uppercase\">\n                  <span className=\"bg-card px-2 text-muted-foreground\">\n                    Ou conexão manual\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"provider\">Plataforma *</Label>\n                <Select value={provider} onValueChange={setProvider}>\n                  <SelectTrigger data-testid=\"select-platform\">\n                    <SelectValue placeholder=\"Selecione uma plataforma\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"tiktok\">TikTok</SelectItem>\n                    <SelectItem value=\"youtube\">YouTube</SelectItem>\n                    <SelectItem value=\"instagram\">Instagram</SelectItem>\n                    <SelectItem value=\"facebook\">Facebook</SelectItem>\n                  </SelectContent>\n                </Select>\n                {provider && (\n                  <p className=\"text-xs text-muted-foreground\">\n                    {platformHints[provider]}\n                  </p>\n                )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"name\">Nome da Conta *</Label>\n                <Input\n                  id=\"name\"\n                  data-testid=\"input-account-name\"\n                  placeholder=\"Meu Canal Incrível\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  Nome amigável para identificar esta conta\n                </p>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"username\">Username (opcional)</Label>\n                <Input\n                  id=\"username\"\n                  data-testid=\"input-username\"\n                  placeholder=\"@meucanalincivel\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"providerId\">ID da Conta na Plataforma *</Label>\n                <Input\n                  id=\"providerId\"\n                  data-testid=\"input-provider-id\"\n                  placeholder={\n                    provider === \"youtube\" ? \"UCxxxxxxxxxxxxxx\" :\n                    provider === \"tiktok\" ? \"open_id ou user_id\" :\n                    provider === \"instagram\" ? \"Instagram Business Account ID\" :\n                    provider === \"facebook\" ? \"Page ID\" :\n                    \"ID da conta\"\n                  }\n                  value={providerId}\n                  onChange={(e) => setProviderId(e.target.value)}\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  ID único da conta na plataforma selecionada\n                </p>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"accessToken\">Access Token *</Label>\n                <Input\n                  id=\"accessToken\"\n                  data-testid=\"input-access-token\"\n                  type=\"password\"\n                  placeholder=\"cole seu token de acesso aqui\"\n                  value={accessToken}\n                  onChange={(e) => setAccessToken(e.target.value)}\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  Token OAuth obtido no painel de desenvolvedor da plataforma\n                </p>\n                </div>\n\n                <Button\n                  onClick={handleAdd}\n                  disabled={addMutation.isPending}\n                  className=\"w-full\"\n                  data-testid=\"button-add-account\"\n                >\n                  {addMutation.isPending ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                      Adicionando...\n                    </>\n                  ) : (\n                    <>\n                      <Plus className=\"h-4 w-4 mr-2\" />\n                      Adicionar Manualmente\n                    </>\n                  )}\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Contas Conectadas</CardTitle>\n              <CardDescription>\n                Gerenciar suas contas de redes sociais ({accounts.length} {accounts.length === 1 ? 'conta' : 'contas'})\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"flex items-center justify-center py-8\">\n                  <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n                </div>\n              ) : accounts.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {accounts.map((account) => {\n                    const Icon = platformIcons[account.provider];\n                    return (\n                      <div\n                        key={account.id}\n                        className=\"flex items-center justify-between p-4 rounded-lg border hover-elevate\"\n                        data-testid={`account-${account.id}`}\n                      >\n                        <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                          <div className=\"flex-shrink-0\">\n                            {Icon && <Icon className=\"h-5 w-5\" />}\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-2\">\n                              <p className=\"font-medium truncate\">{account.name}</p>\n                              {account.authorized ? (\n                                <Badge variant=\"default\" className=\"flex-shrink-0\">\n                                  <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                                  Autorizada\n                                </Badge>\n                              ) : (\n                                <Badge variant=\"destructive\" className=\"flex-shrink-0\">\n                                  <XCircle className=\"h-3 w-3 mr-1\" />\n                                  Não autorizada\n                                </Badge>\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-2 mt-1\">\n                              <p className=\"text-sm text-muted-foreground\">\n                                {platformLabels[account.provider]}\n                              </p>\n                              {account.username && (\n                                <>\n                                  <span className=\"text-muted-foreground\">•</span>\n                                  <p className=\"text-sm text-muted-foreground\">\n                                    {account.username}\n                                  </p>\n                                </>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          onClick={() => deleteMutation.mutate(account.id)}\n                          disabled={deleteMutation.isPending}\n                          data-testid={`button-delete-${account.id}`}\n                          className=\"flex-shrink-0\"\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    );\n                  })}\n                </div>\n              ) : (\n                <div className=\"text-center py-12\">\n                  <div className=\"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-4\">\n                    <Plus className=\"h-6 w-6 text-muted-foreground\" />\n                  </div>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Nenhuma conta conectada ainda\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    Adicione sua primeira conta para começar a publicar\n                  </p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n    </div>\n  );\n}\n","size_bytes":15349},"client/src/pages/OAuthCallback.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { CheckCircle2, XCircle, Loader2 } from \"lucide-react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nexport default function OAuthCallback() {\n  const [, setLocation] = useLocation();\n  const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading');\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const success = params.get('success');\n    const error = params.get('error');\n    const provider = params.get('provider');\n    const accountId = params.get('accountId');\n\n    if (success === 'true' && accountId) {\n      setStatus('success');\n      setMessage(`Conta conectada com sucesso!`);\n      \n      if (window.opener) {\n        window.opener.postMessage(\n          {\n            type: 'oauth_success',\n            provider,\n            accountId,\n          },\n          window.location.origin\n        );\n        \n        setTimeout(() => {\n          window.close();\n        }, 1500);\n      } else {\n        setTimeout(() => {\n          setLocation('/accounts');\n        }, 2000);\n      }\n    } else if (error) {\n      setStatus('error');\n      setMessage(decodeURIComponent(error));\n      \n      if (window.opener) {\n        window.opener.postMessage(\n          {\n            type: 'oauth_error',\n            error: decodeURIComponent(error),\n          },\n          window.location.origin\n        );\n        \n        setTimeout(() => {\n          window.close();\n        }, 3000);\n      } else {\n        setTimeout(() => {\n          setLocation('/accounts');\n        }, 3000);\n      }\n    }\n  }, [setLocation]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            {status === 'loading' && (\n              <>\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\n                Processando...\n              </>\n            )}\n            {status === 'success' && (\n              <>\n                <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n                Sucesso!\n              </>\n            )}\n            {status === 'error' && (\n              <>\n                <XCircle className=\"h-5 w-5 text-red-500\" />\n                Erro na conexão\n              </>\n            )}\n          </CardTitle>\n          <CardDescription>\n            {status === 'loading' && 'Autenticando sua conta...'}\n            {status === 'success' && 'Esta janela será fechada automaticamente'}\n            {status === 'error' && 'Ocorreu um erro durante a autenticação'}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {message && (\n            <p className=\"text-sm text-muted-foreground\" data-testid=\"text-oauth-message\">\n              {message}\n            </p>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3087},"replit.md":{"content":"# Overview\n\nThis is a video cutting system for Reels with two main workflows:\n\n1. **Local Upload**: Users upload video files and manually cut them\n2. **URL Download**: Users provide YouTube/Instagram/TikTok URLs for automatic video download and AI-powered analysis\n\nThe application uses AI (Google Gemini) to analyze video content and generate intelligent cuts optimized for social media Reels format.\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n# System Architecture\n\n## Frontend Architecture\n\n**Framework**: React 18 with TypeScript, built with Vite\n\n**UI Component System**: \n- shadcn/ui components (Radix UI primitives)\n- Material Design 3 inspired design system\n- Tailwind CSS with custom theme variables\n- Dark/light mode support with persistent user preference\n\n**State Management**:\n- TanStack Query (React Query) for server state\n- Local React state for UI interactions\n- No global state management library (uses React Context where needed)\n\n**Routing**: Wouter for lightweight client-side routing\n\n**Key Design Patterns**:\n- Component composition with shadcn/ui\n- Mobile-first responsive design\n- Tab-based navigation for dual workflows\n- Real-time processing status updates\n\n## Backend Architecture\n\n**Runtime**: Node.js with Express.js and TypeScript\n\n**API Design**: RESTful endpoints with JSON responses\n- `/api/videos/upload` - Multipart form upload for local files\n- `/api/videos/url` - URL-based video download\n- `/api/videos` - Video listing and retrieval\n\n**File Upload Strategy**:\n- Multer middleware for multipart/form-data handling\n- Local filesystem storage in `uploads/` directory\n- 100MB file size limit\n- Video MIME type validation\n\n**Video Processing Pipeline**:\n1. Accept video (upload or download)\n2. Store locally with unique timestamp-based filename\n3. Send to Google Gemini for AI analysis\n4. Store analysis results in database\n5. Return metadata to frontend\n\n**Error Handling**:\n- Global Express error middleware\n- Status code-based error responses\n- Validation at route level\n\n## Database Architecture\n\n**ORM**: Drizzle ORM with PostgreSQL dialect\n\n**Database Provider**: Neon serverless PostgreSQL with WebSocket support\n\n**Schema Design**:\n- `users` table - User authentication (id, username, password)\n- `videos` table - Video metadata (id, title, videoPath, source, analysis, uploadedAt)\n\n**Key Patterns**:\n- UUID primary keys with `gen_random_uuid()`\n- Timestamp tracking with `now()` defaults\n- Zod schema validation via drizzle-zod integration\n- Type-safe queries with Drizzle's type inference\n\n## External Dependencies\n\n### AI/ML Services\n- **Google Gemini API** (@google/genai): Video content analysis using gemini-2.5-pro model\n  - Analyzes video frames, objects, actions, text\n  - Provides context-aware descriptions for intelligent cuts\n\n### Video Download Services\n- **yt-dlp** (system dependency): Multi-platform video downloader\n  - Supports YouTube, TikTok, Instagram, Facebook, Twitter, Vimeo\n  - Format selection for optimal quality (MP4 preferred)\n  - Shell command execution via Node.js child_process\n\n### Database & Infrastructure\n- **Neon Database**: Serverless PostgreSQL with WebSocket pooling\n- **PostgreSQL**: Primary data store (provisioned via DATABASE_URL)\n\n### Development Tools\n- **Vite**: Build tool and dev server\n- **Replit Plugins**: Runtime error overlay, cartographer, dev banner (development only)\n\n### UI Libraries\n- **Radix UI**: Headless component primitives (40+ components)\n- **TailwindCSS**: Utility-first styling\n- **Lucide React**: Icon library\n- **React Icons**: Social media platform icons (si-icons)\n- **date-fns**: Date formatting with Portuguese locale\n\n### Form & Validation\n- **React Hook Form**: Form state management\n- **Zod**: Schema validation\n- **@hookform/resolvers**: Zod integration for forms\n\n### File Handling\n- **Multer**: Multipart/form-data parsing for file uploads\n\n### Session Management\n- **express-session**: Session middleware\n- **connect-pg-simple**: PostgreSQL session store","size_bytes":4017},"mim/vite.config.ts":{"content":"import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\n\nexport default defineConfig({\n  plugins: [react()],\n  server: {\n    port: 3000,\n    open: true\n  }\n})","size_bytes":179},"server/social-media/ai/content-generator.ts":{"content":"import { GoogleGenAI } from '@google/genai';\nimport { analyzeVideo } from '../../gemini';\n\nexport interface ContentGenerationRequest {\n  videoPath?: string;\n  videoTitle?: string;\n  videoDescription?: string;\n  targetPlatforms: string[];\n  contentType: 'reel' | 'short' | 'video' | 'post';\n  tone: 'casual' | 'professional' | 'funny' | 'inspiring' | 'educational';\n  targetAudience: string;\n  keywords?: string[];\n}\n\nexport interface GeneratedContent {\n  titles: string[];\n  descriptions: { [platform: string]: string };\n  hashtags: { [platform: string]: string[] };\n  captions: string[];\n  suggestions: {\n    bestTitle: string;\n    bestDescription: string;\n    recommendedHashtags: string[];\n    platformSpecific: {\n      [platform: string]: {\n        title: string;\n        description: string;\n        hashtags: string[];\n      };\n    };\n  };\n}\n\nexport class ContentGenerator {\n  private ai: GoogleGenAI | null;\n\n  constructor(apiKey: string) {\n    this.ai = apiKey ? new GoogleGenAI({ apiKey }) : null;\n  }\n\n  /**\n   * Gera conteúdo completo para redes sociais\n   */\n  async generateContent(request: ContentGenerationRequest): Promise<GeneratedContent> {\n    try {\n      if (!this.ai) throw new Error('GEMINI_API_KEY n\u001ao configurada');\n      const prompt = this.buildPrompt(request);\n      const response = await (this.ai as any).models.generateContent({\n        model: 'gemini-2.0-flash',\n        contents: [prompt]\n      });\n      const text = (response as any).text || (typeof (response as any).candidates?.[0]?.content?.parts?.[0]?.text === 'string' ? (response as any).candidates[0].content.parts[0].text : '');\n\n      return this.parseGeneratedContent(text, request.targetPlatforms);\n    } catch (error) {\n      console.error('Erro ao gerar conteúdo com IA:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Gera apenas títulos virais\n   */\n  async generateViralTitles(\n    context: string,\n    platform: string,\n    count: number = 5\n  ): Promise<string[]> {\n    try {\n      const prompt = `\nGere ${count} títulos virais e chamativos para ${platform} baseado no seguinte contexto:\n\"${context}\"\n\nRequisitos:\n- Títulos que geram curiosidade e cliques\n- Adequados para ${platform}\n- Em português brasileiro\n- Máximo 60 caracteres para TikTok/Instagram, 100 para YouTube\n- Use emojis estrategicamente\n- Foque em gatilhos emocionais (surpresa, curiosidade, urgência)\n\nFormato: Retorne apenas os títulos, um por linha, sem numeração.\n`;\n\n      if (!this.ai) throw new Error('GEMINI_API_KEY n\u001ao configurada');\n      const response = await (this.ai as any).models.generateContent({ model: 'gemini-2.0-flash', contents: [prompt] });\n      const text = (response as any).text || (typeof (response as any).candidates?.[0]?.content?.parts?.[0]?.text === 'string' ? (response as any).candidates[0].content.parts[0].text : '');\n\n      return text.split('\\n')\n        .filter(line => line.trim())\n        .map(line => line.trim())\n        .slice(0, count);\n    } catch (error) {\n      console.error('Erro ao gerar títulos virais:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Gera descrições otimizadas\n   */\n  async generateDescriptions(\n    title: string,\n    context: string,\n    platforms: string[],\n    tone: string = 'casual'\n  ): Promise<{ [platform: string]: string }> {\n    try {\n      const descriptions: { [platform: string]: string } = {};\n\n      for (const platform of platforms) {\n        const prompt = `\nCrie uma descrição envolvente para ${platform} baseada no título: \"${title}\"\nContexto adicional: \"${context}\"\nTom: ${tone}\n\nRequisitos para ${platform}:\n${this.getPlatformRequirements(platform)}\n\nA descrição deve:\n- Ser cativante e engajadora\n- Incluir call-to-action apropriado\n- Usar linguagem adequada ao tom \"${tone}\"\n- Ser otimizada para ${platform}\n- Estar em português brasileiro\n\nRetorne apenas a descrição, sem formatação extra.\n`;\n\n        if (!this.ai) throw new Error('GEMINI_API_KEY n\u001ao configurada');\n        const response = await (this.ai as any).models.generateContent({ model: 'gemini-2.0-flash', contents: [prompt] });\n        const text = (response as any).text || (typeof (response as any).candidates?.[0]?.content?.parts?.[0]?.text === 'string' ? (response as any).candidates[0].content.parts[0].text : '');\n        descriptions[platform] = (text || '').trim();\n      }\n\n      return descriptions;\n    } catch (error) {\n      console.error('Erro ao gerar descrições:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Gera hashtags relevantes e virais\n   */\n  async generateHashtags(\n    content: string,\n    platforms: string[],\n    niche?: string\n  ): Promise<{ [platform: string]: string[] }> {\n    try {\n      const hashtags: { [platform: string]: string[] } = {};\n\n      for (const platform of platforms) {\n        const prompt = `\nGere hashtags estratégicas para ${platform} baseado no conteúdo: \"${content}\"\n${niche ? `Nicho: ${niche}` : ''}\n\nRequisitos para ${platform}:\n- ${this.getHashtagLimits(platform)}\n- Mix de hashtags populares e de nicho\n- Hashtags em português e inglês quando apropriado\n- Incluir hashtags trending quando relevante\n- Evitar hashtags banidas ou shadowbanned\n\nCategorias de hashtags:\n1. Hashtags de nicho específico\n2. Hashtags populares/trending\n3. Hashtags de comunidade\n4. Hashtags de localização (Brasil)\n5. Hashtags de call-to-action\n\nRetorne apenas as hashtags separadas por vírgula, sem o símbolo #.\n`;\n\n        if (!this.ai) throw new Error('GEMINI_API_KEY n\u001ao configurada');\n        const response = await (this.ai as any).models.generateContent({ model: 'gemini-2.0-flash', contents: [prompt] });\n        const raw = (response as any).text || (typeof (response as any).candidates?.[0]?.content?.parts?.[0]?.text === 'string' ? (response as any).candidates[0].content.parts[0].text : '');\n        const hashtagList = (raw || '')\n          .split(',')\n          .map(tag => tag.trim().replace('#', ''))\n          .filter(tag => tag.length > 0)\n          .slice(0, this.getMaxHashtags(platform));\n\n        hashtags[platform] = hashtagList;\n      }\n\n      return hashtags;\n    } catch (error) {\n      console.error('Erro ao gerar hashtags:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Analisa um vídeo e sugere conteúdo baseado no contexto visual\n   */\n  async analyzeVideoAndGenerateContent(\n    videoPath: string,\n    platforms: string[],\n    options?: {\n      tone?: 'casual' | 'professional' | 'funny' | 'inspiring' | 'educational';\n      targetAudience?: string;\n      keywords?: string[];\n    }\n  ): Promise<GeneratedContent> {\n    try {\n      // Nota: Para análise de vídeo, você precisaria implementar:\n      // 1. Extração de frames do vídeo\n      // 2. Análise de imagem com Gemini Vision\n      // 3. Transcrição de áudio (se houver)\n      \n      // Por enquanto, vamos usar uma abordagem baseada no nome do arquivo\n      const fileName = videoPath.split(/[/\\\\]/).pop() || '';\n      // Analisa o video com IA (com fallback local se preciso)\n      const analysisRaw = await analyzeVideo(videoPath);\n      const analysis = (analysisRaw || '').toString().trim();\n      // Limita o tamanho do contexto para o prompt\n      const maxCtx = 6000;\n      const analysisCtx = analysis.length > maxCtx ? analysis.slice(0, maxCtx) + '\\n[...]' : analysis;\n      const context = `Vídeo: ${fileName}`;\n\n      return this.generateContent({\n        videoPath,\n        targetPlatforms: platforms,\n        contentType: 'video',\n        tone: (options?.tone as any) || 'casual',\n        targetAudience: options?.targetAudience || 'geral',\n        videoTitle: fileName,\n        videoDescription: `Analise detalhada do video (base para geracao de conteudo):\\n${analysisCtx}`,\n        keywords: options?.keywords\n      });\n    } catch (error) {\n      console.error('Erro ao analisar vídeo:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Constrói o prompt principal para geração de conteúdo\n   */\n  private buildPrompt(request: ContentGenerationRequest): string {\n    return `\nVocê é um especialista em marketing digital e criação de conteúdo viral para redes sociais.\nCrie conteúdo otimizado para as seguintes plataformas: ${request.targetPlatforms.join(', ')}\n\nCONTEXTO:\n- Tipo de conteúdo: ${request.contentType}\n- Tom: ${request.tone}\n- Público-alvo: ${request.targetAudience}\n- Título do vídeo: ${request.videoTitle || 'Não informado'}\n- Descrição: ${request.videoDescription || 'Não informada'}\n- Palavras-chave: ${request.keywords?.join(', ') || 'Não informadas'}\n\nTAREFA:\nGere conteúdo completo incluindo:\n\n1. TÍTULOS (5 opções virais):\n- Que geram curiosidade e cliques\n- Adequados para cada plataforma\n- Com emojis estratégicos\n- Focados em gatilhos emocionais\n\n2. DESCRIÇÕES (para cada plataforma):\n- Envolventes e engajadoras\n- Com call-to-action apropriado\n- Otimizadas para algoritmo de cada rede\n- No tom especificado\n\n3. HASHTAGS (para cada plataforma):\n- Mix de populares e de nicho\n- Estratégicas para alcance\n- Adequadas aos limites de cada rede\n\n4. SUGESTÕES ESTRATÉGICAS:\n- Melhor título geral\n- Melhor descrição geral\n- Hashtags mais recomendadas\n- Adaptações específicas por plataforma\n\nFORMATO DE RESPOSTA:\nOrganize a resposta em JSON com a seguinte estrutura:\n{\n  \"titles\": [\"título1\", \"título2\", ...],\n  \"descriptions\": {\n    \"tiktok\": \"descrição para tiktok\",\n    \"instagram\": \"descrição para instagram\",\n    \"youtube\": \"descrição para youtube\"\n  },\n  \"hashtags\": {\n    \"tiktok\": [\"tag1\", \"tag2\", ...],\n    \"instagram\": [\"tag1\", \"tag2\", ...],\n    \"youtube\": [\"tag1\", \"tag2\", ...]\n  },\n  \"suggestions\": {\n    \"bestTitle\": \"melhor título\",\n    \"bestDescription\": \"melhor descrição\",\n    \"recommendedHashtags\": [\"tag1\", \"tag2\", ...],\n    \"platformSpecific\": {\n      \"tiktok\": {\"title\": \"\", \"description\": \"\", \"hashtags\": []},\n      \"instagram\": {\"title\": \"\", \"description\": \"\", \"hashtags\": []},\n      \"youtube\": {\"title\": \"\", \"description\": \"\", \"hashtags\": []}\n    }\n  }\n}\n\nResponda APENAS com o JSON, sem texto adicional.\n`;\n  }\n\n  /**\n   * Faz parse do conteúdo gerado pela IA\n   */\n  private parseGeneratedContent(text: string, platforms: string[]): GeneratedContent {\n    try {\n      // Tenta fazer parse do JSON\n      const parsed = JSON.parse(text);\n      \n      // Valida e ajusta a estrutura se necessário\n      return {\n        titles: parsed.titles || [],\n        descriptions: parsed.descriptions || {},\n        hashtags: parsed.hashtags || {},\n        captions: [], // Pode ser derivado das descrições\n        suggestions: parsed.suggestions || {\n          bestTitle: parsed.titles?.[0] || '',\n          bestDescription: '',\n          recommendedHashtags: [],\n          platformSpecific: {}\n        }\n      };\n    } catch (error) {\n      console.error('Erro ao fazer parse do conteúdo gerado:', error);\n      \n      // Fallback: tenta extrair conteúdo manualmente\n      return this.extractContentManually(text, platforms);\n    }\n  }\n\n  /**\n   * Extrai conteúdo manualmente se o JSON falhar\n   */\n  private extractContentManually(text: string, platforms: string[]): GeneratedContent {\n    const lines = text.split('\\n').filter(line => line.trim());\n    \n    return {\n      titles: lines.slice(0, 5).map(line => line.replace(/^\\d+\\.?\\s*/, '').trim()),\n      descriptions: platforms.reduce((acc, platform) => {\n        acc[platform] = `Conteúdo gerado para ${platform}`;\n        return acc;\n      }, {} as { [key: string]: string }),\n      hashtags: platforms.reduce((acc, platform) => {\n        acc[platform] = ['viral', 'conteudo', 'brasil'];\n        return acc;\n      }, {} as { [key: string]: string[] }),\n      captions: [],\n      suggestions: {\n        bestTitle: lines[0] || 'Título gerado',\n        bestDescription: 'Descrição gerada',\n        recommendedHashtags: ['viral', 'conteudo'],\n        platformSpecific: {}\n      }\n    };\n  }\n\n  /**\n   * Retorna requisitos específicos da plataforma\n   */\n  private getPlatformRequirements(platform: string): string {\n    const requirements = {\n      tiktok: '- Máximo 2200 caracteres\\n- Linguagem casual e divertida\\n- Foco em trends e challenges\\n- Call-to-action para engajamento',\n      instagram: '- Máximo 2200 caracteres\\n- Visual e inspiracional\\n- Uso estratégico de emojis\\n- Incentivo para salvar e compartilhar',\n      youtube: '- Máximo 5000 caracteres\\n- Mais detalhado e informativo\\n- Timestamps se aplicável\\n- Links e recursos adicionais',\n      facebook: '- Foco em conversação\\n- Perguntas para engajamento\\n- Conteúdo que gera discussão'\n    };\n\n    return requirements[platform.toLowerCase()] || requirements.instagram;\n  }\n\n  /**\n   * Retorna limites de hashtags por plataforma\n   */\n  private getHashtagLimits(platform: string): string {\n    const limits = {\n      tiktok: 'Máximo 100 caracteres total para hashtags',\n      instagram: 'Máximo 30 hashtags, recomendado 5-10',\n      youtube: 'Máximo 500 caracteres total, foco em palavras-chave',\n      facebook: 'Máximo 2-3 hashtags, foco em relevância'\n    };\n\n    return limits[platform.toLowerCase()] || limits.instagram;\n  }\n\n  /**\n   * Retorna número máximo de hashtags por plataforma\n   */\n  private getMaxHashtags(platform: string): number {\n    const maxHashtags = {\n      tiktok: 10,\n      instagram: 15,\n      youtube: 10,\n      facebook: 3\n    };\n\n    return maxHashtags[platform.toLowerCase()] || 10;\n  }\n}\n","size_bytes":13378},"server/social-media/auth/tiktok-auth.ts":{"content":"import axios from 'axios';\nimport crypto from 'crypto';\nimport { socialMediaConfig } from '../config';\nimport { SocialMediaAccount } from '../config';\n\nexport class TikTokAuth {\n  private config = socialMediaConfig.tiktok;\n  private baseUrl = 'https://www.tiktok.com/v2/auth/authorize/';\n  private tokenUrl = 'https://open.tiktokapis.com/v2/oauth/token/';\n  private pkceStore: Map<string, { verifier: string; createdAt: number }> = new Map();\n\n  private generateState(): string {\n    return crypto.randomBytes(16).toString('hex');\n  }\n\n  private generateCodeVerifier(): string {\n    return crypto.randomBytes(64).toString('base64url');\n  }\n\n  /**\n   * Gera a URL de autorização para o TikTok\n   */\n  getAuthUrl(state?: string): string {\n    const finalState = state || this.generateState();\n    const verifier = this.generateCodeVerifier();\n    this.pkceStore.set(finalState, { verifier, createdAt: Date.now() });\n\n    const challenge = crypto\n      .createHash('sha256')\n      .update(verifier)\n      .digest('base64')\n      .replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/g, '');\n\n    const params = new URLSearchParams({\n      client_key: this.config.clientId,\n      scope: this.config.scope.join(' '),\n      response_type: 'code',\n      redirect_uri: this.config.redirectUri,\n      state: finalState,\n      code_challenge: challenge,\n      code_challenge_method: 'S256'\n    });\n\n    return `${this.baseUrl}?${params.toString()}`;\n  }\n\n  /**\n   * Troca o código de autorização por tokens de acesso\n   */\n  async exchangeCodeForTokens(code: string, state?: string): Promise<{\n    access_token: string;\n    refresh_token: string;\n    expires_in: number;\n    token_type: string;\n    scope: string;\n  }> {\n    try {\n      const verifier = state ? this.pkceStore.get(state)?.verifier : undefined;\n      if (!verifier) {\n        throw new Error('PKCE code_verifier não encontrado para o state. Reinicie a autenticação.');\n      }\n\n      const body = new URLSearchParams({\n        client_key: this.config.clientId,\n        client_secret: this.config.clientSecret,\n        code: code,\n        grant_type: 'authorization_code',\n        redirect_uri: this.config.redirectUri,\n        code_verifier: verifier\n      });\n\n      const response = await axios.post(this.tokenUrl, body.toString(), {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n\n      if (response.data.error) {\n        throw new Error(`TikTok OAuth Error: ${response.data.error_description}`);\n      }\n\n      return response.data;\n    } catch (error) {\n      console.error('Erro ao trocar código por tokens do TikTok:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Atualiza o token de acesso usando o refresh token\n   */\n  async refreshAccessToken(refreshToken: string): Promise<{\n    access_token: string;\n    refresh_token: string;\n    expires_in: number;\n  }> {\n    try {\n      const response = await axios.post(this.tokenUrl, {\n        client_key: this.config.clientId,\n        client_secret: this.config.clientSecret,\n        grant_type: 'refresh_token',\n        refresh_token: refreshToken\n      }, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n\n      if (response.data.error) {\n        throw new Error(`TikTok Refresh Token Error: ${response.data.error_description}`);\n      }\n\n      return response.data;\n    } catch (error) {\n      console.error('Erro ao atualizar token do TikTok:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Obtém informações do usuário autenticado\n   */\n  async getUserInfo(accessToken: string): Promise<{\n    open_id: string;\n    union_id: string;\n    avatar_url: string;\n    display_name: string;\n    username: string;\n  }> {\n    try {\n      const response = await axios.get('https://open.tiktokapis.com/v2/user/info/', {\n        headers: {\n          'Authorization': `Bearer ${accessToken}`\n        },\n        params: {\n          fields: 'open_id,union_id,avatar_url,display_name,username'\n        }\n      });\n\n      if (response.data.error) {\n        throw new Error(`TikTok User Info Error: ${response.data.error.message}`);\n      }\n\n      return response.data.data.user;\n    } catch (error) {\n      console.error('Erro ao obter informações do usuário TikTok:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Revoga o token de acesso\n   */\n  async revokeToken(accessToken: string): Promise<boolean> {\n    try {\n      const response = await axios.post('https://open.tiktokapis.com/v2/oauth/revoke/', {\n        client_key: this.config.clientId,\n        client_secret: this.config.clientSecret,\n        token: accessToken\n      }, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n\n      return response.status === 200;\n    } catch (error) {\n      console.error('Erro ao revogar token do TikTok:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Verifica se o token ainda é válido\n   */\n  async validateToken(accessToken: string): Promise<boolean> {\n    try {\n      await this.getUserInfo(accessToken);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n}\n\n","size_bytes":5166},"client/src/components/SocialMediaPublisher.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Progress } from '@/components/ui/progress';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Separator } from '@/components/ui/separator';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { useToast } from '@/hooks/use-toast';\nimport { \n  Upload, \n  Wand2, \n  Send, \n  Eye, \n  Settings, \n  Plus, \n  Trash2, \n  ExternalLink,\n  CheckCircle,\n  XCircle,\n  Clock,\n  Sparkles\n} from 'lucide-react';\n\ninterface Platform {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  maxDuration: number | null;\n  supportedFormats: string[];\n}\n\ninterface ConnectedAccount {\n  id: string;\n  platform: string;\n  accountName: string;\n  isActive: boolean;\n  createdAt: string;\n  expiresAt?: string;\n}\n\ninterface GeneratedContent {\n  titles: string[];\n  descriptions: string[];\n  hashtags: string[];\n  suggestions: {\n    bestTitle: string;\n    bestDescription: string;\n    recommendedHashtags: string[];\n    platformSpecific: Record<string, any>;\n  };\n}\n\ninterface PublishResult {\n  platform: string;\n  success: boolean;\n  postId?: string;\n  postUrl?: string;\n  error?: string;\n}\n\nexport default function SocialMediaPublisher() {\n  const { toast } = useToast();\n  \n  // Estados principais\n  const [activeTab, setActiveTab] = useState('upload');\n  const [platforms, setPlatforms] = useState<Platform[]>([]);\n  const [connectedAccounts, setConnectedAccounts] = useState<ConnectedAccount[]>([]);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isPublishing, setIsPublishing] = useState(false);\n  const [isGeneratingContent, setIsGeneratingContent] = useState(false);\n  \n  // Estados do formulário\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [hashtags, setHashtags] = useState<string[]>([]);\n  const [newHashtag, setNewHashtag] = useState('');\n  const [selectedAccounts, setSelectedAccounts] = useState<string[]>([]);\n  const [privacy, setPrivacy] = useState('public');\n  \n  // Estados de geração de conteúdo\n  const [generateContent, setGenerateContent] = useState(false);\n  const [contentTone, setContentTone] = useState('casual');\n  const [targetAudience, setTargetAudience] = useState('');\n  const [keywords, setKeywords] = useState<string[]>([]);\n  const [generatedContent, setGeneratedContent] = useState<GeneratedContent | null>(null);\n  \n  // Estados de resultados\n  const [publishResults, setPublishResults] = useState<PublishResult[]>([]);\n  const [previewData, setPreviewData] = useState<any>(null);\n\n  // Carrega dados iniciais\n  useEffect(() => {\n    loadPlatforms();\n    loadConnectedAccounts();\n  }, []);\n\n  const loadPlatforms = async () => {\n    try {\n      const response = await fetch('/api/social-media/platforms');\n      const data = await response.json();\n      if (data.success) {\n        setPlatforms(data.platforms);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar plataformas:', error);\n    }\n  };\n\n  const loadConnectedAccounts = async () => {\n    try {\n      const response = await fetch('/api/social-media/accounts');\n      const data = await response.json();\n      if (data.success) {\n        setConnectedAccounts(data.accounts);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar contas:', error);\n    }\n  };\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n      if (!title) {\n        setTitle(file.name.replace(/\\.[^/.]+$/, ''));\n      }\n    }\n  };\n\n  const addHashtag = () => {\n    if (newHashtag.trim() && !hashtags.includes(newHashtag.trim())) {\n      setHashtags([...hashtags, newHashtag.trim()]);\n      setNewHashtag('');\n    }\n  };\n\n  const removeHashtag = (index: number) => {\n    setHashtags(hashtags.filter((_, i) => i !== index));\n  };\n\n  const addKeyword = (keyword: string) => {\n    if (keyword.trim() && !keywords.includes(keyword.trim())) {\n      setKeywords([...keywords, keyword.trim()]);\n    }\n  };\n\n  const generateContentWithAI = async () => {\n    if (!selectedFile) {\n      toast({\n        title: 'Erro',\n        description: 'Selecione um vídeo primeiro',\n        variant: 'destructive'\n      });\n      return;\n    }\n\n    setIsGeneratingContent(true);\n    try {\n      const formData = new FormData();\n      formData.append('video', selectedFile);\n      formData.append('platforms', JSON.stringify(getSelectedPlatforms()));\n      formData.append('tone', contentTone);\n      formData.append('targetAudience', targetAudience);\n      formData.append('keywords', JSON.stringify(keywords));\n\n      const response = await fetch('/api/social-media/generate-content', {\n        method: 'POST',\n        body: formData\n      });\n\n      const data = await response.json();\n      if (data.success) {\n        setGeneratedContent(data.content);\n        \n        // Aplica sugestões automaticamente\n        if (data.content.suggestions.bestTitle) {\n          setTitle(data.content.suggestions.bestTitle);\n        }\n        if (data.content.suggestions.bestDescription) {\n          setDescription(data.content.suggestions.bestDescription);\n        }\n        if (data.content.suggestions.recommendedHashtags) {\n          setHashtags(data.content.suggestions.recommendedHashtags);\n        }\n\n        toast({\n          title: 'Sucesso!',\n          description: 'Conteúdo gerado com IA com sucesso'\n        });\n      } else {\n        throw new Error(data.error || 'Erro ao gerar conteúdo');\n      }\n    } catch (error) {\n      console.error('Erro ao gerar conteúdo:', error);\n      toast({\n        title: 'Erro',\n        description: error instanceof Error ? error.message : 'Erro ao gerar conteúdo',\n        variant: 'destructive'\n      });\n    } finally {\n      setIsGeneratingContent(false);\n    }\n  };\n\n  const generatePreview = async () => {\n    if (!selectedFile || selectedAccounts.length === 0) {\n      toast({\n        title: 'Erro',\n        description: 'Selecione um vídeo e pelo menos uma conta',\n        variant: 'destructive'\n      });\n      return;\n    }\n\n    try {\n      const formData = new FormData();\n      formData.append('video', selectedFile);\n      formData.append('title', title);\n      formData.append('description', description);\n      formData.append('hashtags', JSON.stringify(hashtags));\n      formData.append('accounts', JSON.stringify(selectedAccounts));\n      formData.append('generateContent', generateContent.toString());\n      \n      if (generateContent) {\n        formData.append('contentOptions', JSON.stringify({\n          tone: contentTone,\n          targetAudience,\n          keywords\n        }));\n      }\n\n      const response = await fetch('/api/social-media/preview', {\n        method: 'POST',\n        body: formData\n      });\n\n      const data = await response.json();\n      if (data.success) {\n        setPreviewData(data.preview);\n        setActiveTab('preview');\n      } else {\n        throw new Error(data.error || 'Erro ao gerar preview');\n      }\n    } catch (error) {\n      console.error('Erro ao gerar preview:', error);\n      toast({\n        title: 'Erro',\n        description: error instanceof Error ? error.message : 'Erro ao gerar preview',\n        variant: 'destructive'\n      });\n    }\n  };\n\n  const publishContent = async () => {\n    if (!selectedFile || selectedAccounts.length === 0) {\n      toast({\n        title: 'Erro',\n        description: 'Selecione um vídeo e pelo menos uma conta',\n        variant: 'destructive'\n      });\n      return;\n    }\n\n    setIsPublishing(true);\n    setPublishResults([]);\n\n    try {\n      const formData = new FormData();\n      formData.append('video', selectedFile);\n      formData.append('title', title);\n      formData.append('description', description);\n      formData.append('hashtags', JSON.stringify(hashtags));\n      formData.append('accounts', JSON.stringify(selectedAccounts));\n      formData.append('privacy', privacy);\n      formData.append('generateContent', generateContent.toString());\n      \n      if (generateContent) {\n        formData.append('contentOptions', JSON.stringify({\n          tone: contentTone,\n          targetAudience,\n          keywords\n        }));\n      }\n\n      const response = await fetch('/api/social-media/publish', {\n        method: 'POST',\n        body: formData\n      });\n\n      const data = await response.json();\n      setPublishResults(data.results || []);\n\n      if (data.success) {\n        toast({\n          title: 'Sucesso!',\n          description: 'Conteúdo publicado com sucesso'\n        });\n        setActiveTab('results');\n      } else {\n        toast({\n          title: 'Erro na publicação',\n          description: data.errors?.join(', ') || 'Erro desconhecido',\n          variant: 'destructive'\n        });\n      }\n    } catch (error) {\n      console.error('Erro ao publicar:', error);\n      toast({\n        title: 'Erro',\n        description: error instanceof Error ? error.message : 'Erro ao publicar',\n        variant: 'destructive'\n      });\n    } finally {\n      setIsPublishing(false);\n    }\n  };\n\n  const connectAccount = async (platform: string) => {\n    try {\n      const response = await fetch(`/api/social-media/auth/${platform}`);\n      const data = await response.json();\n      \n      if (data.success) {\n        // Abre popup para autorização\n        const popup = window.open(\n          data.authUrl,\n          'social-auth',\n          'width=600,height=700,scrollbars=yes,resizable=yes'\n        );\n\n        // Monitora o popup para capturar o código de autorização\n        const checkClosed = setInterval(() => {\n          if (popup?.closed) {\n            clearInterval(checkClosed);\n            // Recarrega contas após possível conexão\n            setTimeout(() => loadConnectedAccounts(), 1000);\n          }\n        }, 1000);\n      }\n    } catch (error) {\n      console.error('Erro ao conectar conta:', error);\n      toast({\n        title: 'Erro',\n        description: 'Erro ao conectar conta',\n        variant: 'destructive'\n      });\n    }\n  };\n\n  const disconnectAccount = async (accountId: string) => {\n    try {\n      const response = await fetch(`/api/social-media/accounts/${accountId}`, {\n        method: 'DELETE'\n      });\n\n      const data = await response.json();\n      if (data.success) {\n        setConnectedAccounts(accounts => accounts.filter(acc => acc.id !== accountId));\n        setSelectedAccounts(selected => selected.filter(id => id !== accountId));\n        toast({\n          title: 'Sucesso',\n          description: 'Conta desconectada com sucesso'\n        });\n      }\n    } catch (error) {\n      console.error('Erro ao desconectar conta:', error);\n      toast({\n        title: 'Erro',\n        description: 'Erro ao desconectar conta',\n        variant: 'destructive'\n      });\n    }\n  };\n\n  const getSelectedPlatforms = () => {\n    return selectedAccounts.map(accountId => {\n      const account = connectedAccounts.find(acc => acc.id === accountId);\n      return account?.platform || '';\n    }).filter(Boolean);\n  };\n\n  const getPlatformIcon = (platform: string) => {\n    const platformData = platforms.find(p => p.id === platform);\n    return platformData?.icon || '📱';\n  };\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-6 space-y-6\">\n      <div className=\"text-center space-y-2\">\n        <h1 className=\"text-3xl font-bold\">Publicador de Redes Sociais</h1>\n        <p className=\"text-muted-foreground\">\n          Publique seus vídeos em múltiplas redes sociais com IA\n        </p>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-5\">\n          <TabsTrigger value=\"upload\">Upload</TabsTrigger>\n          <TabsTrigger value=\"content\">Conteúdo</TabsTrigger>\n          <TabsTrigger value=\"accounts\">Contas</TabsTrigger>\n          <TabsTrigger value=\"preview\">Preview</TabsTrigger>\n          <TabsTrigger value=\"results\">Resultados</TabsTrigger>\n        </TabsList>\n\n        {/* Tab Upload */}\n        <TabsContent value=\"upload\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Upload className=\"h-5 w-5\" />\n                Upload de Vídeo\n              </CardTitle>\n              <CardDescription>\n                Selecione o vídeo que deseja publicar nas redes sociais\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center\">\n                <input\n                  type=\"file\"\n                  accept=\"video/*\"\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                  id=\"video-upload\"\n                />\n                <label htmlFor=\"video-upload\" className=\"cursor-pointer\">\n                  <Upload className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n                  <p className=\"text-lg font-medium\">\n                    {selectedFile ? selectedFile.name : 'Clique para selecionar um vídeo'}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    Suporta MP4, MOV, AVI e outros formatos\n                  </p>\n                </label>\n              </div>\n\n              {selectedFile && (\n                <Alert>\n                  <CheckCircle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    Vídeo selecionado: {selectedFile.name} ({(selectedFile.size / 1024 / 1024).toFixed(2)} MB)\n                  </AlertDescription>\n                </Alert>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Tab Conteúdo */}\n        <TabsContent value=\"content\" className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Formulário de conteúdo */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Informações do Post</CardTitle>\n                <CardDescription>\n                  Configure o título, descrição e hashtags\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"title\">Título</Label>\n                  <Input\n                    id=\"title\"\n                    value={title}\n                    onChange={(e) => setTitle(e.target.value)}\n                    placeholder=\"Digite o título do vídeo\"\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"description\">Descrição</Label>\n                  <Textarea\n                    id=\"description\"\n                    value={description}\n                    onChange={(e) => setDescription(e.target.value)}\n                    placeholder=\"Digite a descrição do vídeo\"\n                    rows={4}\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label>Hashtags</Label>\n                  <div className=\"flex gap-2\">\n                    <Input\n                      value={newHashtag}\n                      onChange={(e) => setNewHashtag(e.target.value)}\n                      placeholder=\"Digite uma hashtag\"\n                      onKeyPress={(e) => e.key === 'Enter' && addHashtag()}\n                    />\n                    <Button onClick={addHashtag} size=\"sm\">\n                      <Plus className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                  <div className=\"flex flex-wrap gap-2 mt-2\">\n                    {hashtags.map((tag, index) => (\n                      <Badge key={index} variant=\"secondary\" className=\"flex items-center gap-1\">\n                        #{tag}\n                        <button\n                          onClick={() => removeHashtag(index)}\n                          className=\"ml-1 hover:text-destructive\"\n                        >\n                          <Trash2 className=\"h-3 w-3\" />\n                        </button>\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"privacy\">Privacidade</Label>\n                  <Select value={privacy} onValueChange={setPrivacy}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"public\">Público</SelectItem>\n                      <SelectItem value=\"private\">Privado</SelectItem>\n                      <SelectItem value=\"unlisted\">Não listado</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Geração com IA */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Wand2 className=\"h-5 w-5\" />\n                  Geração com IA\n                </CardTitle>\n                <CardDescription>\n                  Use IA para gerar conteúdo otimizado\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <Checkbox\n                    id=\"generate-content\"\n                    checked={generateContent}\n                    onCheckedChange={(checked) => setGenerateContent(checked as boolean)}\n                  />\n                  <Label htmlFor=\"generate-content\">Gerar conteúdo com IA</Label>\n                </div>\n\n                {generateContent && (\n                  <>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"tone\">Tom do conteúdo</Label>\n                      <Select value={contentTone} onValueChange={setContentTone}>\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"casual\">Casual</SelectItem>\n                          <SelectItem value=\"professional\">Profissional</SelectItem>\n                          <SelectItem value=\"funny\">Engraçado</SelectItem>\n                          <SelectItem value=\"inspiring\">Inspirador</SelectItem>\n                          <SelectItem value=\"educational\">Educativo</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"audience\">Público-alvo</Label>\n                      <Input\n                        id=\"audience\"\n                        value={targetAudience}\n                        onChange={(e) => setTargetAudience(e.target.value)}\n                        placeholder=\"Ex: jovens interessados em tecnologia\"\n                      />\n                    </div>\n\n                    <Button\n                      onClick={generateContentWithAI}\n                      disabled={isGeneratingContent || !selectedFile}\n                      className=\"w-full\"\n                    >\n                      {isGeneratingContent ? (\n                        <>\n                          <Clock className=\"h-4 w-4 mr-2 animate-spin\" />\n                          Gerando conteúdo...\n                        </>\n                      ) : (\n                        <>\n                          <Sparkles className=\"h-4 w-4 mr-2\" />\n                          Gerar conteúdo com IA\n                        </>\n                      )}\n                    </Button>\n                  </>\n                )}\n\n                {generatedContent && (\n                  <Alert>\n                    <Sparkles className=\"h-4 w-4\" />\n                    <AlertDescription>\n                      Conteúdo gerado com sucesso! As sugestões foram aplicadas automaticamente.\n                    </AlertDescription>\n                  </Alert>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        {/* Tab Contas */}\n        <TabsContent value=\"accounts\" className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Plataformas disponíveis */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Plataformas Disponíveis</CardTitle>\n                <CardDescription>\n                  Conecte suas contas de redes sociais\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {platforms.map((platform) => (\n                    <div key={platform.id} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                      <div className=\"flex items-center gap-3\">\n                        <span className=\"text-2xl\">{platform.icon}</span>\n                        <div>\n                          <h3 className=\"font-medium\">{platform.name}</h3>\n                          <p className=\"text-sm text-muted-foreground\">{platform.description}</p>\n                        </div>\n                      </div>\n                      <Button\n                        onClick={() => connectAccount(platform.id)}\n                        size=\"sm\"\n                        variant=\"outline\"\n                      >\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        Conectar\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Contas conectadas */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Contas Conectadas</CardTitle>\n                <CardDescription>\n                  Gerencie suas contas conectadas\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <ScrollArea className=\"h-[400px]\">\n                  <div className=\"space-y-4\">\n                    {connectedAccounts.length === 0 ? (\n                      <p className=\"text-center text-muted-foreground py-8\">\n                        Nenhuma conta conectada\n                      </p>\n                    ) : (\n                      connectedAccounts.map((account) => (\n                        <div key={account.id} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                          <div className=\"flex items-center gap-3\">\n                            <Checkbox\n                              checked={selectedAccounts.includes(account.id)}\n                              onCheckedChange={(checked) => {\n                                if (checked) {\n                                  setSelectedAccounts([...selectedAccounts, account.id]);\n                                } else {\n                                  setSelectedAccounts(selectedAccounts.filter(id => id !== account.id));\n                                }\n                              }}\n                            />\n                            <span className=\"text-xl\">{getPlatformIcon(account.platform)}</span>\n                            <div>\n                              <h3 className=\"font-medium\">{account.accountName}</h3>\n                              <p className=\"text-sm text-muted-foreground capitalize\">\n                                {account.platform}\n                              </p>\n                            </div>\n                          </div>\n                          <Button\n                            onClick={() => disconnectAccount(account.id)}\n                            size=\"sm\"\n                            variant=\"outline\"\n                            className=\"text-destructive hover:text-destructive\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      ))\n                    )}\n                  </div>\n                </ScrollArea>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        {/* Tab Preview */}\n        <TabsContent value=\"preview\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Eye className=\"h-5 w-5\" />\n                Preview da Publicação\n              </CardTitle>\n              <CardDescription>\n                Visualize como seu conteúdo aparecerá nas redes sociais\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              {previewData ? (\n                <div className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <h3 className=\"font-semibold mb-2\">Conteúdo Final</h3>\n                      <div className=\"space-y-2 p-4 bg-muted rounded-lg\">\n                        <p><strong>Título:</strong> {previewData.content.title}</p>\n                        <p><strong>Descrição:</strong> {previewData.content.description}</p>\n                        <div>\n                          <strong>Hashtags:</strong>\n                          <div className=\"flex flex-wrap gap-1 mt-1\">\n                            {previewData.content.hashtags.map((tag: string, index: number) => (\n                              <Badge key={index} variant=\"secondary\">#{tag}</Badge>\n                            ))}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <h3 className=\"font-semibold mb-2\">Informações do Vídeo</h3>\n                      <div className=\"space-y-2 p-4 bg-muted rounded-lg\">\n                        <p><strong>Arquivo:</strong> {previewData.videoInfo.filename}</p>\n                        <p><strong>Tamanho:</strong> {(previewData.videoInfo.size / 1024 / 1024).toFixed(2)} MB</p>\n                        <p><strong>Tipo:</strong> {previewData.videoInfo.mimetype}</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-4\">\n                    <Button onClick={generatePreview} variant=\"outline\">\n                      <Eye className=\"h-4 w-4 mr-2\" />\n                      Atualizar Preview\n                    </Button>\n                    <Button\n                      onClick={publishContent}\n                      disabled={isPublishing}\n                      className=\"flex-1\"\n                    >\n                      {isPublishing ? (\n                        <>\n                          <Clock className=\"h-4 w-4 mr-2 animate-spin\" />\n                          Publicando...\n                        </>\n                      ) : (\n                        <>\n                          <Send className=\"h-4 w-4 mr-2\" />\n                          Publicar Agora\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <p className=\"text-muted-foreground mb-4\">\n                    Nenhum preview disponível\n                  </p>\n                  <Button onClick={generatePreview} disabled={!selectedFile || selectedAccounts.length === 0}>\n                    <Eye className=\"h-4 w-4 mr-2\" />\n                    Gerar Preview\n                  </Button>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Tab Resultados */}\n        <TabsContent value=\"results\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Resultados da Publicação</CardTitle>\n              <CardDescription>\n                Status das publicações em cada rede social\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              {publishResults.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <p className=\"text-muted-foreground\">\n                    Nenhuma publicação realizada ainda\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {publishResults.map((result, index) => (\n                    <div key={index} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                      <div className=\"flex items-center gap-3\">\n                        <span className=\"text-xl\">{getPlatformIcon(result.platform)}</span>\n                        <div>\n                          <h3 className=\"font-medium capitalize\">{result.platform}</h3>\n                          {result.success ? (\n                            <p className=\"text-sm text-green-600\">Publicado com sucesso</p>\n                          ) : (\n                            <p className=\"text-sm text-red-600\">{result.error}</p>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        {result.success ? (\n                          <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                        ) : (\n                          <XCircle className=\"h-5 w-5 text-red-600\" />\n                        )}\n                        {result.postUrl && (\n                          <Button size=\"sm\" variant=\"outline\" asChild>\n                            <a href={result.postUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                              <ExternalLink className=\"h-4 w-4\" />\n                            </a>\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}","size_bytes":31019},"server/social-media/config.ts":{"content":"// Configurações das APIs das redes sociais\nexport interface SocialMediaConfig {\n  tiktok: {\n    clientId: string;\n    clientSecret: string;\n    redirectUri: string;\n    scope: string[];\n  };\n  instagram: {\n    clientId: string;\n    clientSecret: string;\n    redirectUri: string;\n    scope: string[];\n  };\n  youtube: {\n    clientId: string;\n    clientSecret: string;\n    redirectUri: string;\n    scope: string[];\n  };\n  facebook: {\n    clientId: string;\n    clientSecret: string;\n    redirectUri: string;\n    scope: string[];\n  };\n}\n\nexport const socialMediaConfig: SocialMediaConfig = {\n  tiktok: {\n    clientId: process.env.TIKTOK_CLIENT_ID || '',\n    clientSecret: process.env.TIKTOK_CLIENT_SECRET || '',\n    redirectUri: process.env.TIKTOK_REDIRECT_URI || 'http://localhost:5000/auth/tiktok/callback',\n    scope: ['user.info.basic', 'video.upload', 'video.publish']\n  },\n  instagram: {\n    clientId: process.env.INSTAGRAM_CLIENT_ID || '',\n    clientSecret: process.env.INSTAGRAM_CLIENT_SECRET || '',\n    redirectUri: process.env.INSTAGRAM_REDIRECT_URI || 'http://localhost:5000/auth/instagram/callback',\n    scope: ['instagram_basic', 'instagram_content_publish', 'pages_show_list', 'business_management']\n  },\n  youtube: {\n    clientId: process.env.YOUTUBE_CLIENT_ID || '',\n    clientSecret: process.env.YOUTUBE_CLIENT_SECRET || '',\n    redirectUri: process.env.YOUTUBE_REDIRECT_URI || 'http://localhost:5000/auth/youtube/callback',\n    scope: ['https://www.googleapis.com/auth/youtube.upload', 'https://www.googleapis.com/auth/youtube']\n  },\n  facebook: {\n    clientId: process.env.FACEBOOK_CLIENT_ID || '',\n    clientSecret: process.env.FACEBOOK_CLIENT_SECRET || '',\n    redirectUri: process.env.FACEBOOK_REDIRECT_URI || 'http://localhost:5000/auth/facebook/callback',\n    scope: ['pages_manage_posts', 'pages_read_engagement', 'business_management']\n  }\n};\n\nexport interface SocialMediaAccount {\n  id: string;\n  platform: 'tiktok' | 'instagram' | 'youtube' | 'facebook';\n  accountId: string;\n  accountName: string;\n  accessToken: string;\n  refreshToken?: string;\n  expiresAt?: Date;\n  isActive: boolean;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface PostContent {\n  title: string;\n  description: string;\n  hashtags: string[];\n  videoPath: string;\n  thumbnailPath?: string;\n  platforms: string[];\n  scheduledAt?: Date;\n  privacy: 'public' | 'private' | 'unlisted';\n}\n\nexport interface PublishResult {\n  platform: string;\n  success: boolean;\n  postId?: string;\n  postUrl?: string;\n  error?: string;\n}","size_bytes":2520},"client/src/components/OAuthButton.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2 } from \"lucide-react\";\n\ninterface OAuthButtonProps {\n  provider: string;\n  label: string;\n  icon?: React.ReactNode;\n  onSuccess?: (accountId: string) => void;\n  onError?: (error: string) => void;\n}\n\nexport function OAuthButton({ provider, label, icon, onSuccess, onError }: OAuthButtonProps) {\n  const [isConnecting, setIsConnecting] = useState(false);\n  const { toast } = useToast();\n\n  const handleConnect = async () => {\n    try {\n      setIsConnecting(true);\n\n      const response = await fetch(`/api/oauth/connect/${provider}`);\n      const data = await response.json();\n\n      if (!response.ok) {\n        if (data.setup_required) {\n          toast({\n            title: \"Configuração necessária\",\n            description: data.error,\n            variant: \"destructive\",\n          });\n          return;\n        }\n        throw new Error(data.error || \"Erro ao conectar\");\n      }\n\n      const width = 600;\n      const height = 700;\n      const left = window.screen.width / 2 - width / 2;\n      const top = window.screen.height / 2 - height / 2;\n\n      const popup = window.open(\n        data.authUrl,\n        `oauth_${provider}`,\n        `width=${width},height=${height},left=${left},top=${top},toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes`\n      );\n\n      if (!popup) {\n        toast({\n          title: \"Pop-up bloqueado\",\n          description: \"Por favor, permita pop-ups para este site\",\n          variant: \"destructive\",\n        });\n        setIsConnecting(false);\n        return;\n      }\n\n      const handleMessage = (event: MessageEvent) => {\n        if (event.origin !== window.location.origin) {\n          return;\n        }\n\n        if (event.data.type === 'oauth_success') {\n          window.removeEventListener('message', handleMessage);\n          setIsConnecting(false);\n          \n          toast({\n            title: \"Sucesso!\",\n            description: `Conta ${provider} conectada com sucesso`,\n          });\n          \n          if (onSuccess) {\n            onSuccess(event.data.accountId);\n          }\n        } else if (event.data.type === 'oauth_error') {\n          window.removeEventListener('message', handleMessage);\n          setIsConnecting(false);\n          \n          toast({\n            title: \"Erro na conexão\",\n            description: event.data.error || \"Erro ao conectar conta\",\n            variant: \"destructive\",\n          });\n          \n          if (onError) {\n            onError(event.data.error);\n          }\n        }\n      };\n\n      window.addEventListener('message', handleMessage);\n\n      const checkClosed = setInterval(() => {\n        if (popup.closed) {\n          clearInterval(checkClosed);\n          window.removeEventListener('message', handleMessage);\n          setIsConnecting(false);\n        }\n      }, 500);\n\n    } catch (error: any) {\n      console.error(\"Erro ao conectar:\", error);\n      toast({\n        title: \"Erro\",\n        description: error.message || \"Erro ao conectar conta\",\n        variant: \"destructive\",\n      });\n      setIsConnecting(false);\n      \n      if (onError) {\n        onError(error.message);\n      }\n    }\n  };\n\n  return (\n    <Button\n      onClick={handleConnect}\n      disabled={isConnecting}\n      variant=\"outline\"\n      className=\"w-full\"\n      data-testid={`button-oauth-${provider}`}\n    >\n      {isConnecting ? (\n        <>\n          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n          Conectando...\n        </>\n      ) : (\n        <>\n          {icon && <span className=\"mr-2\">{icon}</span>}\n          {label}\n        </>\n      )}\n    </Button>\n  );\n}\n","size_bytes":3730},"client/src/pages/OAuthSetup.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ExternalLink, Info } from \"lucide-react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\n\nexport default function OAuthSetup() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"border-b\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <h1 className=\"text-2xl font-bold\">Configuração OAuth</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Guia para obter credenciais OAuth das plataformas sociais\n          </p>\n        </div>\n      </header>\n\n      <main className=\"container mx-auto px-4 py-8 max-w-4xl\">\n        <Alert className=\"mb-6\">\n          <Info className=\"h-4 w-4\" />\n          <AlertDescription>\n            Para usar a conexão OAuth automática, você precisa configurar as credenciais de cada plataforma\n            nas variáveis de ambiente do projeto. Siga os passos abaixo para cada plataforma.\n          </AlertDescription>\n        </Alert>\n\n        <Tabs defaultValue=\"youtube\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"youtube\">YouTube</TabsTrigger>\n            <TabsTrigger value=\"tiktok\">TikTok</TabsTrigger>\n            <TabsTrigger value=\"instagram\">Instagram</TabsTrigger>\n            <TabsTrigger value=\"facebook\">Facebook</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"youtube\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  YouTube / Google OAuth\n                  <Badge>Google Cloud Console</Badge>\n                </CardTitle>\n                <CardDescription>\n                  Configure o OAuth 2.0 através do Google Cloud Console\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 1: Criar Projeto</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Acesse o{\" \"}\n                    <a\n                      href=\"https://console.cloud.google.com\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-primary hover:underline inline-flex items-center gap-1\"\n                    >\n                      Google Cloud Console <ExternalLink className=\"h-3 w-3\" />\n                    </a>{\" \"}\n                    e crie um novo projeto\n                  </p>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 2: Ativar YouTube Data API v3</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    No menu, vá em \"APIs & Services\" → \"Library\" e ative a YouTube Data API v3\n                  </p>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 3: Criar Credenciais OAuth</h3>\n                  <ul className=\"text-sm text-muted-foreground list-disc list-inside space-y-1\">\n                    <li>Vá em \"APIs & Services\" → \"Credentials\"</li>\n                    <li>Clique em \"Create Credentials\" → \"OAuth client ID\"</li>\n                    <li>Escolha \"Web application\"</li>\n                    <li>Adicione o redirect URI: <code className=\"bg-muted px-1 py-0.5 rounded text-xs\">https://seu-dominio.repl.co/api/oauth/callback/youtube</code></li>\n                  </ul>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 4: Configurar Variáveis de Ambiente</h3>\n                  <div className=\"bg-muted p-3 rounded-md font-mono text-xs space-y-1\">\n                    <div>GOOGLE_CLIENT_ID=seu_client_id</div>\n                    <div>GOOGLE_CLIENT_SECRET=seu_client_secret</div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"tiktok\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  TikTok OAuth\n                  <Badge>TikTok for Developers</Badge>\n                </CardTitle>\n                <CardDescription>\n                  Configure o OAuth através do TikTok for Developers\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 1: Criar Aplicação</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Acesse{\" \"}\n                    <a\n                      href=\"https://developers.tiktok.com\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-primary hover:underline inline-flex items-center gap-1\"\n                    >\n                      TikTok for Developers <ExternalLink className=\"h-3 w-3\" />\n                    </a>{\" \"}\n                    e crie uma nova aplicação\n                  </p>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 2: Configurar OAuth</h3>\n                  <ul className=\"text-sm text-muted-foreground list-disc list-inside space-y-1\">\n                    <li>Adicione o redirect URI na configuração do app</li>\n                    <li>URI: <code className=\"bg-muted px-1 py-0.5 rounded text-xs\">https://seu-dominio.repl.co/api/oauth/callback/tiktok</code></li>\n                    <li>Solicite as permissões: user.info.basic, video.list, video.upload</li>\n                  </ul>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 3: Configurar Variáveis de Ambiente</h3>\n                  <div className=\"bg-muted p-3 rounded-md font-mono text-xs space-y-1\">\n                    <div>TIKTOK_CLIENT_KEY=seu_client_key</div>\n                    <div>TIKTOK_CLIENT_SECRET=seu_client_secret</div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"instagram\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  Instagram OAuth\n                  <Badge>Meta for Developers</Badge>\n                </CardTitle>\n                <CardDescription>\n                  Configure através do Meta for Developers (Facebook)\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 1: Criar App no Facebook</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Acesse{\" \"}\n                    <a\n                      href=\"https://developers.facebook.com\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-primary hover:underline inline-flex items-center gap-1\"\n                    >\n                      Meta for Developers <ExternalLink className=\"h-3 w-3\" />\n                    </a>{\" \"}\n                    e crie uma nova aplicação\n                  </p>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 2: Adicionar Produto Instagram</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Adicione o produto \"Instagram Basic Display\" ou \"Instagram Graph API\" ao seu app\n                  </p>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 3: Configurar OAuth Redirect</h3>\n                  <ul className=\"text-sm text-muted-foreground list-disc list-inside space-y-1\">\n                    <li>Adicione Valid OAuth Redirect URIs</li>\n                    <li>URI: <code className=\"bg-muted px-1 py-0.5 rounded text-xs\">https://seu-dominio.repl.co/api/oauth/callback/instagram</code></li>\n                  </ul>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 4: Configurar Variáveis de Ambiente</h3>\n                  <div className=\"bg-muted p-3 rounded-md font-mono text-xs space-y-1\">\n                    <div>INSTAGRAM_CLIENT_ID=seu_app_id</div>\n                    <div>INSTAGRAM_CLIENT_SECRET=seu_app_secret</div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"facebook\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  Facebook OAuth\n                  <Badge>Meta for Developers</Badge>\n                </CardTitle>\n                <CardDescription>\n                  Configure através do Meta for Developers\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 1: Criar App no Facebook</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Acesse{\" \"}\n                    <a\n                      href=\"https://developers.facebook.com\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-primary hover:underline inline-flex items-center gap-1\"\n                    >\n                      Meta for Developers <ExternalLink className=\"h-3 w-3\" />\n                    </a>{\" \"}\n                    e crie uma nova aplicação\n                  </p>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 2: Adicionar Facebook Login</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Adicione o produto \"Facebook Login\" ao seu app\n                  </p>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 3: Configurar OAuth Redirect URIs</h3>\n                  <ul className=\"text-sm text-muted-foreground list-disc list-inside space-y-1\">\n                    <li>Em Facebook Login Settings, adicione Valid OAuth Redirect URIs</li>\n                    <li>URI: <code className=\"bg-muted px-1 py-0.5 rounded text-xs\">https://seu-dominio.repl.co/api/oauth/callback/facebook</code></li>\n                  </ul>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h3 className=\"font-medium\">Passo 4: Configurar Variáveis de Ambiente</h3>\n                  <div className=\"bg-muted p-3 rounded-md font-mono text-xs space-y-1\">\n                    <div>FACEBOOK_APP_ID=seu_app_id</div>\n                    <div>FACEBOOK_APP_SECRET=seu_app_secret</div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n\n        <Alert className=\"mt-6\">\n          <Info className=\"h-4 w-4\" />\n          <AlertDescription>\n            <strong>Nota:</strong> Após configurar as variáveis de ambiente, reinicie o servidor para que\n            as alterações tenham efeito. As credenciais OAuth são mantidas seguras no servidor e nunca\n            são expostas ao cliente.\n          </AlertDescription>\n        </Alert>\n      </main>\n    </div>\n  );\n}\n","size_bytes":12065},"server/video-downloader.ts":{"content":"import { exec } from \"child_process\";\nimport { promisify } from \"util\";\nimport path from \"path\";\nimport fs from \"fs\";\n\nconst execAsync = promisify(exec);\n\nconst SUPPORTED_PLATFORMS = [\n  \"youtube.com\",\n  \"youtu.be\",\n  \"tiktok.com\",\n  \"instagram.com\",\n  \"facebook.com\",\n  \"twitter.com\",\n  \"x.com\",\n  \"vimeo.com\",\n];\n\nexport function isSocialMediaUrl(url: string): boolean {\n  try {\n    const parsedUrl = new URL(url);\n    const hostname = parsedUrl.hostname.toLowerCase();\n\n    return SUPPORTED_PLATFORMS.some((platform) => {\n      return (\n        hostname === platform ||\n        hostname === `www.${platform}` ||\n        hostname.endsWith(`.${platform}`)\n      );\n    });\n  } catch {\n    return false;\n  }\n}\n\nexport async function downloadVideoFromPlatform(\n  url: string,\n  outputDir: string,\n  maxSizeBytes: number = 100 * 1024 * 1024\n): Promise<string> {\n  const timestamp = Date.now();\n  const outputTemplate = path.join(outputDir, `${timestamp}-%(title)s.%(ext)s`);\n\n  try {\n    // Try multiple strategies to maximize compatibility across platforms/videos.\n    const commands: string[] = [\n      // Prefer MP4 when available.\n      `yt-dlp --restrict-filenames -f \"bv*[ext=mp4]+ba[ext=m4a]/b[ext=mp4]\" --merge-output-format mp4 --print after_move:filepath -o \"${outputTemplate}\" \"${url}\"`,\n      // Fallback to best available streams (any ext), merge to MKV for broad codec/container support.\n      `yt-dlp --restrict-filenames -f \"bv*+ba/b\" --merge-output-format mkv --print after_move:filepath -o \"${outputTemplate}\" \"${url}\"`,\n      // Last resort: best single file without forcing a merge.\n      `yt-dlp --restrict-filenames -f \"best\" --print after_move:filepath -o \"${outputTemplate}\" \"${url}\"`,\n    ];\n\n    let absolutePath: string | undefined;\n    let lastError: any;\n\n    for (const command of commands) {\n      try {\n        const { stdout } = await execAsync(command, {\n          timeout: 180000,\n          maxBuffer: 10 * 1024 * 1024,\n          env: { ...process.env, PYTHONIOENCODING: \"utf-8\" },\n        });\n\n        const downloadedFilename = stdout\n          .split(\"\\n\")\n          .map((s) => s.trim())\n          .filter(Boolean)\n          .pop();\n        if (!downloadedFilename) {\n          throw new Error(\"Não foi possível determinar o arquivo baixado\");\n        }\n\n        absolutePath = path.isAbsolute(downloadedFilename)\n          ? downloadedFilename\n          : path.join(outputDir, downloadedFilename);\n\n        if (fs.existsSync(absolutePath)) {\n          break;\n        }\n        // Fallback: search by timestamped prefix in outputDir (handles encoding quirks)\n        const prefix = `${timestamp}-`;\n        const candidates = fs\n          .readdirSync(outputDir)\n          .filter((name) => name.startsWith(prefix))\n          .map((name) => path.join(outputDir, name))\n          .filter((p) => fs.existsSync(p));\n\n        if (candidates.length > 0) {\n          candidates.sort((a, b) => fs.statSync(b).mtimeMs - fs.statSync(a).mtimeMs);\n          absolutePath = candidates[0];\n          break;\n        }\n\n        throw new Error(`Arquivo não encontrado após download: ${absolutePath}`);\n      } catch (err) {\n        lastError = err;\n        // Continue to next strategy\n      }\n    }\n\n    if (!absolutePath) {\n      throw lastError || new Error(\"Falha ao baixar o vídeo com os formatos disponíveis\");\n    }\n\n    const stats = fs.statSync(absolutePath);\n    if (stats.size > maxSizeBytes) {\n      fs.unlinkSync(absolutePath);\n      throw new Error(\n        `Vídeo muito grande (${(stats.size / 1024 / 1024).toFixed(2)}MB). Máximo permitido: ${\n          maxSizeBytes / 1024 / 1024\n        }MB`\n      );\n    }\n\n    return absolutePath;\n  } catch (error: any) {\n    console.error(\"Erro ao baixar vídeo:\", error);\n    throw new Error(`Falha ao baixar vídeo: ${error.message}`);\n  }\n}\n","size_bytes":3828},"server/oauth-helpers.ts":{"content":"import crypto from 'crypto';\n\nexport interface OAuthProvider {\n  name: string;\n  authUrl: string;\n  tokenUrl: string;\n  scopes: string[];\n  clientId: string;\n  clientSecret: string;\n}\n\nexport const OAUTH_PROVIDERS: Record<string, () => OAuthProvider> = {\n  youtube: () => ({\n    name: 'youtube',\n    authUrl: 'https://accounts.google.com/o/oauth2/v2/auth',\n    tokenUrl: 'https://oauth2.googleapis.com/token',\n    scopes: [\n      'https://www.googleapis.com/auth/youtube.readonly',\n      'https://www.googleapis.com/auth/youtube.upload',\n      'https://www.googleapis.com/auth/userinfo.profile'\n    ],\n    clientId: process.env.GOOGLE_CLIENT_ID || '',\n    clientSecret: process.env.GOOGLE_CLIENT_SECRET || '',\n  }),\n  instagram: () => ({\n    name: 'instagram',\n    authUrl: 'https://api.instagram.com/oauth/authorize',\n    tokenUrl: 'https://api.instagram.com/oauth/access_token',\n    scopes: [\n      'user_profile',\n      'user_media'\n    ],\n    clientId: process.env.INSTAGRAM_CLIENT_ID || '',\n    clientSecret: process.env.INSTAGRAM_CLIENT_SECRET || '',\n  }),\n  tiktok: () => ({\n    name: 'tiktok',\n    authUrl: 'https://www.tiktok.com/v2/auth/authorize',\n    tokenUrl: 'https://open.tiktokapis.com/v2/oauth/token',\n    scopes: [\n      'user.info.basic',\n      'video.list',\n      'video.upload'\n    ],\n    clientId: process.env.TIKTOK_CLIENT_KEY || '',\n    clientSecret: process.env.TIKTOK_CLIENT_SECRET || '',\n  }),\n  facebook: () => ({\n    name: 'facebook',\n    authUrl: 'https://www.facebook.com/v18.0/dialog/oauth',\n    tokenUrl: 'https://graph.facebook.com/v18.0/oauth/access_token',\n    scopes: [\n      'public_profile',\n      'pages_show_list',\n      'pages_read_engagement',\n      'pages_manage_posts'\n    ],\n    clientId: process.env.FACEBOOK_APP_ID || '',\n    clientSecret: process.env.FACEBOOK_APP_SECRET || '',\n  }),\n};\n\nexport function generateState(): string {\n  return crypto.randomBytes(32).toString('hex');\n}\n\nexport function buildAuthorizationUrl(\n  provider: OAuthProvider,\n  state: string,\n  redirectUri: string\n): string {\n  if (provider.name === 'tiktok') {\n    const params = new URLSearchParams({\n      client_key: provider.clientId,\n      redirect_uri: redirectUri,\n      response_type: 'code',\n      scope: provider.scopes.join(','),\n      state,\n    });\n    return `${provider.authUrl}?${params.toString()}`;\n  } else if (provider.name === 'instagram' || provider.name === 'facebook') {\n    const params = new URLSearchParams({\n      client_id: provider.clientId,\n      redirect_uri: redirectUri,\n      response_type: 'code',\n      scope: provider.scopes.join(','),\n      state,\n    });\n    return `${provider.authUrl}?${params.toString()}`;\n  } else {\n    const params = new URLSearchParams({\n      client_id: provider.clientId,\n      redirect_uri: redirectUri,\n      response_type: 'code',\n      scope: provider.scopes.join(' '),\n      state,\n      access_type: 'offline',\n      prompt: 'consent',\n    });\n    return `${provider.authUrl}?${params.toString()}`;\n  }\n}\n\nexport async function exchangeCodeForToken(\n  provider: OAuthProvider,\n  code: string,\n  redirectUri: string\n): Promise<{\n  access_token: string;\n  refresh_token?: string;\n  expires_in?: number;\n  token_type?: string;\n}> {\n  if (provider.name === 'tiktok') {\n    const body = {\n      client_key: provider.clientId,\n      client_secret: provider.clientSecret,\n      code,\n      grant_type: 'authorization_code',\n      redirect_uri: redirectUri,\n    };\n\n    const response = await fetch(provider.tokenUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: new URLSearchParams(body as any).toString(),\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(`Failed to exchange code for token: ${error}`);\n    }\n\n    const data = await response.json();\n    return {\n      access_token: data.data?.access_token || data.access_token,\n      refresh_token: data.data?.refresh_token || data.refresh_token,\n      expires_in: data.data?.expires_in || data.expires_in,\n      token_type: data.data?.token_type || data.token_type,\n    };\n  } else {\n    const params = new URLSearchParams({\n      client_id: provider.clientId,\n      client_secret: provider.clientSecret,\n      code,\n      redirect_uri: redirectUri,\n      grant_type: 'authorization_code',\n    });\n\n    const response = await fetch(provider.tokenUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: params.toString(),\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(`Failed to exchange code for token: ${error}`);\n    }\n\n    return await response.json();\n  }\n}\n\nexport async function getUserInfo(provider: string, accessToken: string): Promise<{\n  id: string;\n  name: string;\n  username?: string;\n  profile_picture?: string;\n  email?: string;\n}> {\n  let url = '';\n  let headers: Record<string, string> = {\n    'Authorization': `Bearer ${accessToken}`,\n  };\n\n  switch (provider) {\n    case 'youtube':\n      url = 'https://www.googleapis.com/youtube/v3/channels?part=snippet&mine=true';\n      break;\n    case 'instagram':\n      url = 'https://graph.instagram.com/me?fields=id,username,account_type,media_count';\n      break;\n    case 'tiktok':\n      url = 'https://open.tiktokapis.com/v2/user/info/?fields=open_id,union_id,avatar_url,display_name';\n      break;\n    case 'facebook':\n      url = 'https://graph.facebook.com/me?fields=id,name,picture';\n      break;\n    default:\n      throw new Error(`Unknown provider: ${provider}`);\n  }\n\n  const response = await fetch(url, { headers });\n\n  if (!response.ok) {\n    const error = await response.text();\n    throw new Error(`Failed to get user info: ${error}`);\n  }\n\n  const data = await response.json();\n\n  switch (provider) {\n    case 'youtube':\n      const channel = data.items?.[0];\n      return {\n        id: channel.id,\n        name: channel.snippet.title,\n        username: channel.snippet.customUrl,\n        profile_picture: channel.snippet.thumbnails.default.url,\n      };\n    case 'instagram':\n      return {\n        id: data.id,\n        name: data.username,\n        username: data.username,\n      };\n    case 'tiktok':\n      return {\n        id: data.data.user.open_id,\n        name: data.data.user.display_name,\n        profile_picture: data.data.user.avatar_url,\n      };\n    case 'facebook':\n      return {\n        id: data.id,\n        name: data.name,\n        profile_picture: data.picture?.data?.url,\n      };\n    default:\n      throw new Error(`Unknown provider: ${provider}`);\n  }\n}\n","size_bytes":6640},"server/social-media/publishers/tiktok-publisher.ts":{"content":"import axios from 'axios';\nimport FormData from 'form-data';\nimport fs from 'fs';\nimport path from 'path';\nimport { PostContent, PublishResult } from '../config';\n\nexport class TikTokPublisher {\n  private baseUrl = 'https://open.tiktokapis.com';\n\n  /**\n   * Publica um vídeo no TikTok\n   */\n  async publishVideo(\n    accessToken: string,\n    content: PostContent\n  ): Promise<PublishResult> {\n    try {\n      // Primeiro, faz upload do vídeo\n      const uploadResult = await this.uploadVideo(accessToken, content.videoPath);\n      \n      if (!uploadResult.success) {\n        return {\n          platform: 'tiktok',\n          success: false,\n          error: uploadResult.error\n        };\n      }\n\n      // Depois, publica o vídeo\n      const publishResult = await this.createPost(\n        accessToken,\n        uploadResult.publish_id!,\n        content\n      );\n\n      return publishResult;\n    } catch (error) {\n      console.error('Erro ao publicar no TikTok:', error);\n      return {\n        platform: 'tiktok',\n        success: false,\n        error: error instanceof Error ? error.message : 'Erro desconhecido'\n      };\n    }\n  }\n\n  /**\n   * Faz upload do vídeo para o TikTok\n   */\n  private async uploadVideo(\n    accessToken: string,\n    videoPath: string\n  ): Promise<{\n    success: boolean;\n    publish_id?: string;\n    error?: string;\n  }> {\n    try {\n      // Verifica se o arquivo existe\n      if (!fs.existsSync(videoPath)) {\n        throw new Error('Arquivo de vídeo não encontrado');\n      }\n\n      const videoStats = fs.statSync(videoPath);\n      const videoSize = videoStats.size;\n\n      // Verifica o tamanho do arquivo (máximo 128MB para TikTok)\n      if (videoSize > 128 * 1024 * 1024) {\n        throw new Error('Arquivo muito grande. Máximo permitido: 128MB');\n      }\n\n      // Inicia o upload\n      const initResponse = await axios.post(\n        `${this.baseUrl}/v2/post/publish/video/init/`,\n        {\n          post_info: {\n            title: 'Video Upload',\n            privacy_level: 'SELF_ONLY', // Será alterado na publicação\n            disable_duet: false,\n            disable_comment: false,\n            disable_stitch: false,\n            video_cover_timestamp_ms: 1000\n          },\n          source_info: {\n            source: 'FILE_UPLOAD',\n            video_size: videoSize,\n            chunk_size: Math.min(videoSize, 10 * 1024 * 1024), // 10MB chunks\n            total_chunk_count: Math.ceil(videoSize / (10 * 1024 * 1024))\n          }\n        },\n        {\n          headers: {\n            'Authorization': `Bearer ${accessToken}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n\n      if (initResponse.data.error) {\n        throw new Error(`Erro ao iniciar upload: ${initResponse.data.error.message}`);\n      }\n\n      const { publish_id, upload_url } = initResponse.data.data;\n\n      // Faz upload do arquivo em chunks\n      const videoBuffer = fs.readFileSync(videoPath);\n      const chunkSize = 10 * 1024 * 1024; // 10MB\n      const totalChunks = Math.ceil(videoBuffer.length / chunkSize);\n\n      for (let i = 0; i < totalChunks; i++) {\n        const start = i * chunkSize;\n        const end = Math.min(start + chunkSize, videoBuffer.length);\n        const chunk = videoBuffer.slice(start, end);\n\n        const formData = new FormData();\n        formData.append('video', chunk, {\n          filename: path.basename(videoPath),\n          contentType: 'video/mp4'\n        });\n\n        await axios.put(upload_url, formData, {\n          headers: {\n            ...formData.getHeaders(),\n            'Content-Range': `bytes ${start}-${end - 1}/${videoBuffer.length}`\n          }\n        });\n      }\n\n      return {\n        success: true,\n        publish_id\n      };\n    } catch (error) {\n      console.error('Erro no upload do vídeo TikTok:', error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Erro no upload'\n      };\n    }\n  }\n\n  /**\n   * Cria o post no TikTok\n   */\n  private async createPost(\n    accessToken: string,\n    publishId: string,\n    content: PostContent\n  ): Promise<PublishResult> {\n    try {\n      // Combina título, descrição e hashtags\n      const caption = this.formatCaption(content);\n\n      const response = await axios.post(\n        `${this.baseUrl}/v2/post/publish/`,\n        {\n          post_id: publishId,\n          post_info: {\n            title: content.title.substring(0, 150), // TikTok tem limite de caracteres\n            text: caption.substring(0, 2200), // Limite do TikTok para descrição\n            privacy_level: this.mapPrivacyLevel(content.privacy),\n            disable_duet: false,\n            disable_comment: false,\n            disable_stitch: false,\n            video_cover_timestamp_ms: 1000\n          }\n        },\n        {\n          headers: {\n            'Authorization': `Bearer ${accessToken}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n\n      if (response.data.error) {\n        throw new Error(`Erro ao publicar: ${response.data.error.message}`);\n      }\n\n      const postId = response.data.data.publish_id;\n      \n      return {\n        platform: 'tiktok',\n        success: true,\n        postId: postId,\n        postUrl: `https://www.tiktok.com/@username/video/${postId}` // URL genérica\n      };\n    } catch (error) {\n      console.error('Erro ao criar post no TikTok:', error);\n      return {\n        platform: 'tiktok',\n        success: false,\n        error: error instanceof Error ? error.message : 'Erro ao criar post'\n      };\n    }\n  }\n\n  /**\n   * Formata a legenda combinando título, descrição e hashtags\n   */\n  private formatCaption(content: PostContent): string {\n    let caption = '';\n    \n    if (content.title) {\n      caption += content.title + '\\n\\n';\n    }\n    \n    if (content.description) {\n      caption += content.description + '\\n\\n';\n    }\n    \n    if (content.hashtags && content.hashtags.length > 0) {\n      const hashtags = content.hashtags\n        .map(tag => tag.startsWith('#') ? tag : `#${tag}`)\n        .join(' ');\n      caption += hashtags;\n    }\n    \n    return caption.trim();\n  }\n\n  /**\n   * Mapeia o nível de privacidade para o formato do TikTok\n   */\n  private mapPrivacyLevel(privacy: string): string {\n    switch (privacy) {\n      case 'public':\n        return 'PUBLIC_TO_EVERYONE';\n      case 'private':\n        return 'SELF_ONLY';\n      case 'unlisted':\n        return 'MUTUAL_FOLLOW_FRIENDS';\n      default:\n        return 'PUBLIC_TO_EVERYONE';\n    }\n  }\n\n  /**\n   * Verifica o status de uma publicação\n   */\n  async getPublishStatus(\n    accessToken: string,\n    publishId: string\n  ): Promise<{\n    status: 'processing' | 'success' | 'failed';\n    video_id?: string;\n    error?: string;\n  }> {\n    try {\n      const response = await axios.get(\n        `${this.baseUrl}/v2/post/publish/status/`,\n        {\n          headers: {\n            'Authorization': `Bearer ${accessToken}`\n          },\n          params: {\n            publish_id: publishId\n          }\n        }\n      );\n\n      if (response.data.error) {\n        return {\n          status: 'failed',\n          error: response.data.error.message\n        };\n      }\n\n      const data = response.data.data;\n      return {\n        status: data.status,\n        video_id: data.video_id,\n        error: data.fail_reason\n      };\n    } catch (error) {\n      console.error('Erro ao verificar status da publicação TikTok:', error);\n      return {\n        status: 'failed',\n        error: error instanceof Error ? error.message : 'Erro desconhecido'\n      };\n    }\n  }\n}","size_bytes":7587}},"version":2}